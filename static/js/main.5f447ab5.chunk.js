(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{146:function(e,t,n){},147:function(e,t,n){},149:function(e,t,n){},150:function(e,t,n){},151:function(e,t,n){},152:function(e,t,n){},198:function(e,t,n){},199:function(e,t,n){},200:function(e,t,n){},201:function(e,t,n){},202:function(e,t,n){},203:function(e,t,n){},204:function(e,t,n){},205:function(e,t,n){},206:function(e,t,n){},207:function(e,t,n){},208:function(e,t,n){},209:function(e,t,n){},210:function(e,t,n){},211:function(e,t,n){},212:function(e,t,n){},213:function(e,t,n){},221:function(e,t){},222:function(e,t,n){},223:function(e,t,n){},224:function(e,t,n){},225:function(e,t,n){},226:function(e,t,n){},227:function(e,t,n){},228:function(e,t,n){},229:function(e,t,n){},230:function(e,t,n){},233:function(e,t,n){"use strict";n.r(t);var r,a,o,c=n(31),s=n.n(c),i=n(42),u=n(87),l=n.n(u),m=n(0),d=n.n(m),p=n(49),g=n(8);function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.common,r=arguments.length>3?arguments[3]:void 0;return{type:o.addLogEntry,key:e,channel:n,channelContext:r,context:t}}!function(e){e.gameTick="gameTick"}(r||(r={})),function(e){e[e.common=0]="common",e[e.town=1]="town",e[e.quest=2]="quest"}(a||(a={})),(o||(o={})).addLogEntry="addLogEntry";var f,h,b=function(e){var t=e.split(".").map(function(e){return Number(e)});if(3!==t.length)throw new Error("Received invalid version string: ".concat(e));t.forEach(function(e){if(e>=1024)throw new Error("Version string invalid, ".concat(e," is too large"))});for(var n=0,r=0;r<3;r++)n|=t[r]<<10*r;return n}("0.0.4"),y=n(18),w=n(1),k=n(3),O=n(4),E=n(6),j=n(5),T=n(43),I=n(7);function C(e,t,n){return{type:f.moveItemInInventory,adventurerId:e,fromSlot:t,toSlot:n}}function N(e,t,n){return{type:f.addItemToInventory,adventurerId:e,item:t,toSlot:n}}function x(e,t){return{type:f.removeItemFromInventory,adventurerId:e,fromSlot:t}}function S(e,t){return{type:h.addItem,item:e,toSlot:t}}function q(e){return{type:h.removeItem,fromSlot:e}}!function(e){e.moveItemInInventory="moveItemInInventory",e.moveItemToOtherAdventurer="moveItemToOtherAdventurer",e.moveItemFromWarehouseToAdventurer="moveItemFromWarehouseToAdventurer",e.addItemToInventory="addItemToInventory",e.removeItemFromInventory="removeItemFromInventory",e.assignEquipment="assignEquipment"}(f||(f={})),function(e){e.addItem="addItem",e.moveItemInWarehouse="moveItemInWarehouse",e.removeItem="removeItem"}(h||(h={}));var A,D="adventurer",R="item";!function(e){e[e.adventurerInventory=0]="adventurerInventory",e[e.warehouse=1]="warehouse",e[e.tavern=2]="tavern",e[e.adventurerEquipment=3]="adventurerEquipment"}(A||(A={}));var W,M=n(13);!function(e){e[e.resource=0]="resource",e[e.production=1]="production",e[e.tavern=2]="tavern",e[e.warehouse=3]="warehouse"}(W||(W={}));var B,L,Q={type:W.production,cost:{gold:40,time:4e3},levels:[{displayName:"structure-alchemist-name",workerCapacity:2,cost:{gold:0},produces:[]},{displayName:"structure-alchemist-name",workerCapacity:5,cost:{gold:30},produces:[]},{displayName:"structure-alchemist-name",workerCapacity:10,cost:{gold:50},produces:[]}]},H=n(59),_=(n(121),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"milliseconds";return H.duration(e,t).format("d [days] h [hours] m [min] s [sec]",{trim:"both"})});!function(e){e[e.deed=0]="deed",e[e.equipment=1]="equipment",e[e.material=2]="material",e[e.questItem=3]="questItem",e[e.trinket=4]="trinket",e[e.weapon=5]="weapon"}(B||(B={})),function(e){e.deedForLumbermill="deedForLumbermill",e.deedForWeaponsmith="deedForWeaponsmith",e.boots1="boots1",e.boots2="boots2",e.boots3="boots3",e.chainmailHood="chainmailHood",e.chest="chest",e.clothGloves="clothGloves",e.cowl="cowl",e.fedora="fedora",e.druidChest="druidChest",e.druidFeet="druidFeet",e.druidHands="druidHands",e.druidHead="druidHead",e.druidLegs="druidLegs",e.greaves1="greaves1",e.greaves2="greaves2",e.hornedHelmet="hornedHelmet",e.leatherGloves="leatherGloves",e.nomadHelmet="nomadHelmet",e.pants1="pants1",e.pants2="pants2",e.plateChest1="plateChest1",e.plateChest2="plateChest2",e.plateChest3="plateChest3",e.plateChest4="plateChest4",e.plateGloves1="plateGloves1",e.plateGloves2="plateGloves2",e.plateHelmet="plateHelmet",e.platePants="platePants",e.plateShoulders1="plateShoulders1",e.plateShoulders2="plateShoulders2",e.robe="robe",e.shoulders1="shoulders1",e.shoulders2="shoulders2",e.shoulders3="shoulders3",e.vest="vest",e.arrowheads="arrowheads",e.bolts="bolts",e.buckle="buckle",e.chain="chain",e.cogs="cogs",e.gem="gem",e.gunpowder="gunpowder",e.ingot="ingot",e.nails="nails",e.poisonVial="poisonVial",e.ribbon="ribbon",e.rope="rope",e.scales="scales",e.spring="spring",e.thread="thread",e.blueprints="blueprints",e.crate="crate",e.dynamite="dynamite",e.eye="eye",e.feather="feather",e.food="food",e.heart="heart",e.horn="horn",e.key="key",e.letters="letters",e.lockPicks="lockPicks",e.oil="oil",e.orcFinger="orcFinger",e.plans="plans",e.purpleGems="purpleGems",e.runestone="runestone",e.sandwich="sandwich",e.teeth="teeth",e.tooth="tooth",e.torch="torch",e.tusk="tusk",e.vase="vase",e.vial="vial",e.weeds="weeds",e.ring="ring",e.magicAmulet="magicAmulet",e.battleAxe="battleAxe",e.brassKnuckles="brassKnuckles",e.cleaver="cleaver",e.club="club",e.crossbow="crossbow",e.dagger="dagger",e.flail="flail",e.greatswordOfGwai="greatswordOfGwai",e.khopesh="khopesh",e.longbow="longbow",e.mace="mace",e.morningStar="morningStar",e.poisonedDagger="poisonedDagger",e.ravenStaff="ravenStaff",e.savageStaff="savageStaff",e.spear="spear",e.sword="sword",e.warhammer="warhammer"}(L||(L={}));var F,G={item:L.boots1,cost:{resources:{wood:2,iron:15},time:18e5}},U={item:L.chest,cost:{resources:{wood:10,iron:45},time:36e5}},z={item:L.cowl,cost:{resources:{iron:15},time:36e5}},P={cost:{gold:40,time:4e3},type:W.production,levels:[{displayName:"structure-armoursmith-name",workerCapacity:2,cost:{gold:0},produces:[G]},{displayName:"structure-armoursmith-name",workerCapacity:5,cost:{gold:30},produces:[G,U]},{displayName:"structure-armoursmith-name",workerCapacity:10,cost:{gold:50},produces:[G,U,z]}]},V={type:W.resource,cost:{gold:40,time:4e3},levels:[{displayName:"structure-garden-name",workerCapacity:2,cost:{gold:0},generates:{food:2}},{displayName:"structure-garden-name",workerCapacity:5,cost:{gold:30},generates:{food:2}},{displayName:"structure-garden-name",workerCapacity:10,cost:{gold:50},generates:{food:2}}]},K={type:W.resource,cost:{gold:31,time:5e3},levels:[{displayName:"structure-lumber-mill-name",workerCapacity:2,cost:{gold:0},generates:{wood:2}},{displayName:"structure-lumber-mill-name",workerCapacity:5,cost:{gold:30},generates:{wood:2}},{displayName:"structure-lumber-mill-name",workerCapacity:10,cost:{gold:50},generates:{wood:2}}]},X={cost:{gold:40,time:4e3},type:W.resource,levels:[{displayName:"structure-mine-name",workerCapacity:2,cost:{gold:0},generates:{iron:2}},{displayName:"structure-mine-name",workerCapacity:5,cost:{gold:30},generates:{iron:2}},{displayName:"structure-mine-name",workerCapacity:10,cost:{gold:50},generates:{iron:2}}]},Y={cost:{gold:40,time:4e3},type:W.resource,levels:[{displayName:"structure-quarry-name",workerCapacity:2,cost:{gold:0},generates:{stone:2}},{displayName:"structure-quarry-name",workerCapacity:5,cost:{gold:30},generates:{stone:4}},{displayName:"structure-quarry-name",workerCapacity:10,cost:{gold:50},generates:{stone:6}}]},J={cost:{gold:40,time:4e3},type:W.resource,levels:[{displayName:"structure-tannery-name",workerCapacity:2,cost:{gold:0},generates:{leather:2}},{displayName:"structure-tannery-name",workerCapacity:5,cost:{gold:30},generates:{leather:5}},{displayName:"structure-tannery-name",workerCapacity:10,cost:{gold:50},generates:{leather:7}}]},Z={cost:{gold:40,time:4e3},type:W.tavern,levels:[{displayName:"structure-tavern-name",workerCapacity:2,cost:{gold:0},rooms:10},{displayName:"structure-tavern-name",workerCapacity:5,cost:{gold:30},rooms:12},{displayName:"structure-tavern-name",workerCapacity:10,cost:{gold:50},rooms:15}]},$={cost:{gold:40,time:4e3},type:W.warehouse,levels:[{displayName:"structure-warehouse-name",workerCapacity:2,cost:{gold:0},maxResources:{fabric:200,food:200,iron:200,leather:200,stone:200,wood:200}},{displayName:"structure-warehouse-name",workerCapacity:5,cost:{gold:30},maxResources:{fabric:500,food:500,iron:500,leather:500,stone:500,wood:500}},{displayName:"structure-warehouse-name",workerCapacity:10,cost:{gold:50},maxResources:{fabric:1e3,food:1e3,iron:1e3,leather:1e3,stone:1e3,wood:1e3}}]},ee={item:L.crossbow,cost:{resources:{wood:20,iron:5},time:18e5}},te={item:L.longbow,cost:{resources:{wood:40,iron:5},time:36e5}},ne={item:L.poisonedDagger,cost:{resources:{wood:50,iron:15},materials:[L.poisonVial],time:36e5}},re={item:L.dagger,cost:{resources:{wood:10,iron:10},time:36e5}},ae={item:L.sword,cost:{resources:{wood:10,iron:30},time:36e5}},oe={item:L.khopesh,cost:{resources:{wood:15,iron:40},time:12e4}},ce={type:W.production,cost:{gold:40,time:4e3},levels:[{displayName:"structure-weaponsmith-name",workerCapacity:2,cost:{gold:0},produces:[ee,re]},{displayName:"structure-weaponsmith-name",workerCapacity:5,cost:{gold:30},produces:[ee,re,te]},{displayName:"structure-weaponsmith-name",workerCapacity:10,cost:{gold:50},produces:[ee,re,te,ae,oe]},{displayName:"structure-weaponsmith-name",workerCapacity:14,cost:{gold:50},produces:[ee,re,te,ae,oe,ne]}]},se={cost:{gold:40,time:4e3},type:W.resource,levels:[{displayName:"structure-weaver-name",workerCapacity:2,cost:{gold:0},generates:{fabric:2}},{displayName:"structure-weaver-name",workerCapacity:5,cost:{gold:30},generates:{fabric:5}},{displayName:"structure-weaver-name",workerCapacity:10,cost:{gold:50},generates:{fabric:7}}]},ie={item:L.torch,cost:{resources:{wood:2,fabric:1},time:6e4}},ue={item:L.sandwich,cost:{resources:{food:1},time:3e4}},le={type:W.production,cost:{gold:40,time:4e3},levels:[{displayName:"structure-workshop-name",workerCapacity:2,cost:{gold:0},produces:[ie,ue]},{displayName:"structure-workshop-name",workerCapacity:5,cost:{gold:30},produces:[]},{displayName:"structure-workshop-name",workerCapacity:10,cost:{gold:50},produces:[]},{displayName:"structure-workshop-name",workerCapacity:14,cost:{gold:50},produces:[]}]};!function(e){e.alchemist="alchemist",e.armoursmith="armoursmith",e.garden="garden",e.lumberMill="lumberMill",e.mine="mine",e.quarry="quarry",e.tavern="tavern",e.tannery="tannery",e.warehouse="warehouse",e.weaponsmith="weaponsmith",e.weaver="weaver",e.workshop="workshop"}(F||(F={}));var me={alchemist:Q,armoursmith:P,garden:V,lumberMill:K,mine:X,quarry:Y,tavern:Z,tannery:J,warehouse:$,weaponsmith:ce,weaver:se,workshop:le},de=me;var pe,ge,ve=B.deed,fe={deedForLumbermill:{item:L.deedForLumbermill,structure:F.lumberMill,itemType:ve,subText:"It allows for the construction of a lumber mill",iconImg:"/img/items/deeds/deed.png"},deedForWeaponsmith:{item:L.deedForWeaponsmith,structure:F.weaponsmith,itemType:ve,subText:"It allows for the construction of a weaponsmith",iconImg:"/img/items/deeds/deed.png"}},he=B.equipment,be="/img/items/equipment/";!function(e){e[e.feet=0]="feet",e[e.hands=1]="hands",e[e.chest=2]="chest",e[e.legs=3]="legs",e[e.head=4]="head",e[e.shoulders=5]="shoulders"}(ge||(ge={}));var ye,we,ke,Oe,Ee,je=(pe={},Object(w.a)(pe,L.boots1,{item:L.boots1,equipmentType:ge.feet,itemType:he,subText:"These boots are made for questin'",iconImg:"".concat(be,"boots_1.png")}),Object(w.a)(pe,L.boots2,{item:L.boots2,equipmentType:ge.feet,itemType:he,subText:"",iconImg:"".concat(be,"boots_2.png")}),Object(w.a)(pe,L.boots3,{item:L.boots3,equipmentType:ge.feet,itemType:he,subText:"",iconImg:"".concat(be,"boots_3.png")}),Object(w.a)(pe,L.chainmailHood,{item:L.chainmailHood,equipmentType:ge.head,itemType:he,subText:"",iconImg:"".concat(be,"chainmail_hood.png")}),Object(w.a)(pe,L.chest,{item:L.chest,equipmentType:ge.chest,itemType:he,subText:"",iconImg:"".concat(be,"chest_1.png")}),Object(w.a)(pe,L.clothGloves,{item:L.clothGloves,equipmentType:ge.hands,itemType:he,subText:"",iconImg:"".concat(be,"cloth_gloves.png")}),Object(w.a)(pe,L.cowl,{item:L.cowl,equipmentType:ge.head,itemType:he,subText:"",iconImg:"".concat(be,"cowl.png")}),Object(w.a)(pe,L.druidChest,{item:L.druidHands,equipmentType:ge.chest,itemType:he,subText:"",iconImg:"".concat(be,"druid-chest.png")}),Object(w.a)(pe,L.druidFeet,{item:L.druidFeet,equipmentType:ge.feet,itemType:he,subText:"",iconImg:"".concat(be,"druid-feet.png")}),Object(w.a)(pe,L.druidHands,{item:L.druidHands,equipmentType:ge.hands,itemType:he,subText:"",iconImg:"".concat(be,"druid-hands.png")}),Object(w.a)(pe,L.druidHead,{item:L.druidHead,equipmentType:ge.head,itemType:he,subText:"",iconImg:"".concat(be,"druid-head.png")}),Object(w.a)(pe,L.druidLegs,{item:L.druidLegs,equipmentType:ge.legs,itemType:he,subText:"",iconImg:"".concat(be,"druid-legs.png")}),Object(w.a)(pe,L.fedora,{item:L.fedora,equipmentType:ge.head,itemType:he,subText:"I study the blade",iconImg:"".concat(be,"fedora.png")}),Object(w.a)(pe,L.greaves1,{item:L.greaves1,equipmentType:ge.hands,itemType:he,subText:"",iconImg:"".concat(be,"greaves_1.png")}),Object(w.a)(pe,L.greaves2,{item:L.greaves2,equipmentType:ge.hands,itemType:he,subText:"",iconImg:"".concat(be,"greaves_2.png")}),Object(w.a)(pe,L.hornedHelmet,{item:L.hornedHelmet,equipmentType:ge.head,itemType:he,subText:"",iconImg:"".concat(be,"horned_helmet.png")}),Object(w.a)(pe,L.leatherGloves,{item:L.leatherGloves,equipmentType:ge.hands,itemType:he,subText:"",iconImg:"".concat(be,"leather_gloves.png")}),Object(w.a)(pe,L.nomadHelmet,{item:L.nomadHelmet,equipmentType:ge.head,itemType:he,subText:"",iconImg:"".concat(be,"nomad_helmet.png")}),Object(w.a)(pe,L.pants1,{item:L.pants1,equipmentType:ge.legs,itemType:he,subText:"",iconImg:"".concat(be,"pants_1.png")}),Object(w.a)(pe,L.pants2,{item:L.pants2,equipmentType:ge.legs,itemType:he,subText:"",iconImg:"".concat(be,"pants_2.png")}),Object(w.a)(pe,L.plateChest1,{item:L.plateChest1,equipmentType:ge.chest,itemType:he,subText:"",iconImg:"".concat(be,"plate_chest_1.png")}),Object(w.a)(pe,L.plateChest2,{item:L.plateChest2,equipmentType:ge.chest,itemType:he,subText:"",iconImg:"".concat(be,"plate_chest_2.png")}),Object(w.a)(pe,L.plateChest3,{item:L.plateChest3,equipmentType:ge.chest,itemType:he,subText:"",iconImg:"".concat(be,"plate_chest_3.png")}),Object(w.a)(pe,L.plateChest4,{item:L.plateChest4,equipmentType:ge.chest,itemType:he,subText:"",iconImg:"".concat(be,"plate_chest_4.png")}),Object(w.a)(pe,L.plateGloves1,{item:L.plateGloves1,equipmentType:ge.hands,itemType:he,subText:"",iconImg:"".concat(be,"plate_gloves_1.png")}),Object(w.a)(pe,L.plateGloves2,{item:L.plateGloves2,equipmentType:ge.hands,itemType:he,subText:"",iconImg:"".concat(be,"plate_gloves_2.png")}),Object(w.a)(pe,L.plateHelmet,{item:L.plateHelmet,equipmentType:ge.head,itemType:he,subText:"",iconImg:"".concat(be,"plate_helmet_1.png")}),Object(w.a)(pe,L.platePants,{item:L.platePants,equipmentType:ge.legs,itemType:he,subText:"",iconImg:"".concat(be,"plate_pants1.png")}),Object(w.a)(pe,L.plateShoulders1,{item:L.plateShoulders1,equipmentType:ge.shoulders,itemType:he,subText:"",iconImg:"".concat(be,"plate_shoulders_1.png")}),Object(w.a)(pe,L.plateShoulders2,{item:L.plateShoulders2,equipmentType:ge.shoulders,itemType:he,subText:"",iconImg:"".concat(be,"plate_shoulders_2.png")}),Object(w.a)(pe,L.robe,{item:L.robe,equipmentType:ge.chest,itemType:he,subText:"",iconImg:"".concat(be,"robe_1.png")}),Object(w.a)(pe,L.shoulders1,{item:L.shoulders1,equipmentType:ge.shoulders,itemType:he,subText:"",iconImg:"".concat(be,"shoulders_1.png")}),Object(w.a)(pe,L.shoulders2,{item:L.shoulders2,equipmentType:ge.shoulders,itemType:he,subText:"",iconImg:"".concat(be,"shoulders_2.png")}),Object(w.a)(pe,L.shoulders3,{item:L.shoulders3,equipmentType:ge.shoulders,itemType:he,subText:"",iconImg:"".concat(be,"shoulders_3.png")}),Object(w.a)(pe,L.vest,{item:L.vest,equipmentType:ge.chest,itemType:he,subText:"",iconImg:"".concat(be,"vest_1.png")}),pe),Te=B.material,Ie="/img/items/materials/",Ce=(ye={},Object(w.a)(ye,L.arrowheads,{item:L.arrowheads,itemType:Te,iconImg:"".concat(Ie,"arrowheads.png")}),Object(w.a)(ye,L.bolts,{item:L.bolts,itemType:Te,iconImg:"".concat(Ie,"bolts.png")}),Object(w.a)(ye,L.buckle,{item:L.buckle,itemType:Te,iconImg:"".concat(Ie,"buckle.png")}),Object(w.a)(ye,L.chain,{item:L.chain,itemType:Te,iconImg:"".concat(Ie,"chain.png")}),Object(w.a)(ye,L.cogs,{item:L.cogs,itemType:Te,iconImg:"".concat(Ie,"cogs.png")}),Object(w.a)(ye,L.gem,{item:L.gem,itemType:Te,iconImg:"".concat(Ie,"gem.png")}),Object(w.a)(ye,L.ingot,{item:L.ingot,itemType:Te,iconImg:"".concat(Ie,"ingot.png")}),Object(w.a)(ye,L.nails,{item:L.nails,itemType:Te,iconImg:"".concat(Ie,"nails.png")}),Object(w.a)(ye,L.poisonVial,{item:L.poisonVial,itemType:Te,iconImg:"".concat(Ie,"poison-vial.png")}),Object(w.a)(ye,L.ribbon,{item:L.ribbon,itemType:Te,iconImg:"".concat(Ie,"ribbon.png")}),Object(w.a)(ye,L.rope,{item:L.rope,itemType:Te,iconImg:"".concat(Ie,"rope.png")}),Object(w.a)(ye,L.gem,{item:L.gem,itemType:Te,iconImg:"".concat(Ie,"gem.png")}),Object(w.a)(ye,L.gunpowder,{item:L.gunpowder,itemType:Te,iconImg:"".concat(Ie,"gunpowder.png")}),Object(w.a)(ye,L.scales,{item:L.scales,itemType:Te,iconImg:"".concat(Ie,"scales.png")}),Object(w.a)(ye,L.spring,{item:L.spring,itemType:Te,iconImg:"".concat(Ie,"spring.png")}),Object(w.a)(ye,L.thread,{item:L.thread,itemType:Te,iconImg:"".concat(Ie,"thread.png")}),ye),Ne=B.questItem,xe="/img/items/quest-items/",Se=(we={},Object(w.a)(we,L.blueprints,{item:L.blueprints,itemType:Ne,iconImg:"".concat(xe,"blueprints.png")}),Object(w.a)(we,L.crate,{item:L.crate,itemType:Ne,iconImg:"".concat(xe,"crate.png")}),Object(w.a)(we,L.dynamite,{item:L.dynamite,itemType:Ne,iconImg:"".concat(xe,"dynamite.png")}),Object(w.a)(we,L.eye,{item:L.eye,itemType:Ne,iconImg:"".concat(xe,"eye.png")}),Object(w.a)(we,L.feather,{item:L.feather,itemType:Ne,iconImg:"".concat(xe,"feather.png")}),Object(w.a)(we,L.food,{item:L.food,itemType:Ne,iconImg:"".concat(xe,"food.png")}),Object(w.a)(we,L.heart,{item:L.heart,itemType:Ne,iconImg:"".concat(xe,"heart.png")}),Object(w.a)(we,L.horn,{item:L.horn,itemType:Ne,iconImg:"".concat(xe,"horn.png")}),Object(w.a)(we,L.key,{item:L.key,itemType:Ne,iconImg:"".concat(xe,"key.png")}),Object(w.a)(we,L.letters,{item:L.letters,itemType:Ne,iconImg:"".concat(xe,"letters.png")}),Object(w.a)(we,L.lockPicks,{item:L.lockPicks,itemType:Ne,iconImg:"".concat(xe,"lock-picks.png")}),Object(w.a)(we,L.oil,{item:L.oil,itemType:Ne,iconImg:"".concat(xe,"oil.png")}),Object(w.a)(we,L.orcFinger,{item:L.orcFinger,itemType:Ne,iconImg:"".concat(xe,"orc-finger.png")}),Object(w.a)(we,L.plans,{item:L.plans,itemType:Ne,iconImg:"".concat(xe,"plans.png")}),Object(w.a)(we,L.purpleGems,{item:L.purpleGems,itemType:Ne,iconImg:"".concat(xe,"purple-gems.png")}),Object(w.a)(we,L.runestone,{item:L.runestone,itemType:Ne,iconImg:"".concat(xe,"runestone.png")}),Object(w.a)(we,L.sandwich,{item:L.sandwich,itemType:Ne,iconImg:"".concat(xe,"sandwich.png")}),Object(w.a)(we,L.teeth,{item:L.teeth,itemType:Ne,iconImg:"".concat(xe,"teeth.png")}),Object(w.a)(we,L.tooth,{item:L.tooth,itemType:Ne,iconImg:"".concat(xe,"tooth.png")}),Object(w.a)(we,L.torch,{item:L.torch,itemType:Ne,iconImg:"".concat(xe,"torch.png")}),Object(w.a)(we,L.tusk,{item:L.tusk,itemType:Ne,iconImg:"".concat(xe,"tusk.png")}),Object(w.a)(we,L.vase,{item:L.vase,itemType:Ne,iconImg:"".concat(xe,"vase.png")}),Object(w.a)(we,L.vial,{item:L.vial,itemType:Ne,iconImg:"".concat(xe,"vial.png")}),Object(w.a)(we,L.weeds,{item:L.weeds,itemType:Ne,iconImg:"".concat(xe,"weeds.png")}),we),qe=B.trinket,Ae=(ke={},Object(w.a)(ke,L.magicAmulet,{item:L.magicAmulet,itemType:qe,iconImg:"".concat("/img/items/trinkets/","magic_amulet.png")}),Object(w.a)(ke,L.ring,{item:L.ring,itemType:qe,iconImg:"".concat("/img/items/trinkets/","ring.png")}),ke),De=B.weapon,Re="/img/items/weapons/";!function(e){e[e.axe=0]="axe",e[e.bow=1]="bow",e[e.club=2]="club",e[e.crossbow=3]="crossbow",e[e.fist=4]="fist",e[e.flail=5]="flail",e[e.hammer=6]="hammer",e[e.melee=7]="melee",e[e.knife=8]="knife",e[e.staff=9]="staff",e[e.sword=10]="sword",e[e.poleArm=11]="poleArm"}(Ee||(Ee={}));var We=(Oe={},Object(w.a)(Oe,L.battleAxe,{item:L.battleAxe,itemType:De,weaponType:Ee.axe,subText:"It's an axe for battle",iconImg:"".concat(Re,"battle_axe.png")}),Object(w.a)(Oe,L.brassKnuckles,{item:L.brassKnuckles,itemType:De,weaponType:Ee.melee,subText:" Brass knuckles are pieces of metal shaped to fit around the knuckles.",iconImg:"".concat(Re,"brass_knuckles.png")}),Object(w.a)(Oe,L.crossbow,{item:L.crossbow,itemType:De,weaponType:Ee.crossbow,subText:"Shoots and reloads fast",iconImg:"".concat(Re,"crossbow.png")}),Object(w.a)(Oe,L.cleaver,{item:L.cleaver,itemType:De,weaponType:Ee.knife,subText:"A cleaver is a large knife that varies in its shape but usually resembles a rectangular-bladed hatchet.",iconImg:"".concat(Re,"cleaver.png")}),Object(w.a)(Oe,L.club,{item:L.club,itemType:De,weaponType:Ee.club,subText:"A club is among the simplest of all weapons: a short staff or stick, usually made of wood, wielded as a weapon",iconImg:"".concat(Re,"club.png")}),Object(w.a)(Oe,L.dagger,{item:L.dagger,itemType:De,weaponType:Ee.knife,subText:"Excellent for ritual sacrifice and cheese platters",iconImg:"".concat(Re,"dagger.png")}),Object(w.a)(Oe,L.flail,{item:L.flail,itemType:De,weaponType:Ee.flail,subText:"A flail is a weapon consisting of a striking head attached to a handle by a flexible rope, strap, or chain. ",iconImg:"".concat(Re,"flail.png")}),Object(w.a)(Oe,L.greatswordOfGwai,{item:L.greatswordOfGwai,itemType:De,weaponType:Ee.sword,subText:"Finer steel was seldom forged",iconImg:"".concat(Re,"greatsword-gwai.png"),unique:!0}),Object(w.a)(Oe,L.khopesh,{item:L.khopesh,itemType:De,weaponType:Ee.sword,subText:"Dafuq is this. Can I get garlic sauce with that?",iconImg:"".concat(Re,"khopesh.png")}),Object(w.a)(Oe,L.longbow,{item:L.longbow,itemType:De,weaponType:Ee.bow,subText:"A deadly killer from long range",iconImg:"".concat(Re,"longbow.png")}),Object(w.a)(Oe,L.mace,{item:L.mace,itemType:De,weaponType:Ee.club,subText:"A mace is a blunt weapon, a type of club or virge that uses a heavy head on the end of a handle to deliver powerful blows.",iconImg:"".concat(Re,"mace.png")}),Object(w.a)(Oe,L.morningStar,{item:L.morningStar,itemType:De,weaponType:Ee.club,subText:"A morning star is any of several medieval club-like weapons consisting of a shaft with an attached ball adorned with one or more spikes.",iconImg:"".concat(Re,"morning-star.png")}),Object(w.a)(Oe,L.poisonedDagger,{item:L.poisonedDagger,itemType:De,weaponType:Ee.knife,subText:"Excellent for ritual sacrifice and cheese platters",iconImg:"".concat(Re,"poisoned-dagger.png")}),Object(w.a)(Oe,L.ravenStaff,{item:L.ravenStaff,itemType:De,weaponType:Ee.staff,subText:"Kaa, kaa!",iconImg:"".concat(Re,"raven-staff.png")}),Object(w.a)(Oe,L.savageStaff,{item:L.savageStaff,itemType:De,weaponType:Ee.staff,subText:"Savage dude",iconImg:"".concat(Re,"savage-staff.png")}),Object(w.a)(Oe,L.spear,{item:L.spear,itemType:De,weaponType:Ee.poleArm,subText:"A spear is a pole weapon consisting of a shaft, usually of wood, with a pointed head. ",iconImg:"".concat(Re,"sword.png")}),Object(w.a)(Oe,L.sword,{item:L.sword,itemType:De,weaponType:Ee.sword,subText:"An elegant weapon for a more civilized age",iconImg:"".concat(Re,"sword.png")}),Object(w.a)(Oe,L.warhammer,{item:L.warhammer,itemType:De,weaponType:Ee.hammer,subText:"A war hammer is a late medieval weapon of war intended for close combat action, whose design resembles the hammer",iconImg:"".concat(Re,"warhammer.png")}),Oe),Me=Object(M.a)({},fe,je,Ce,Se,Ae,We),Be=Me;function Le(e){return Me[e]}var Qe=n(32),He=function(){function e(){Object(k.a)(this,e)}return Object(O.a)(e,null,[{key:"init",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.texts=e,this.templates={},t&&this.compileAll(),this.initialized=!0}},{key:"get",value:function(e,t){if(!this.initialized)throw new Error("Error ".concat(this," not initialized!"));var n=this.getTemplate(e);return n?n(t):(console.error("Key '".concat(e,"' not found in TextManager")),"<<'".concat(e,"' missing>>"))}},{key:"getTextEntry",value:function(e){return this.get(e.key,e.context)}},{key:"getTemplate",value:function(e){var t=this.templates[e];return!t&&this.texts[e]&&(this.compile(e,this.texts[e]),t=this.templates[e]),t}},{key:"getQuestTitle",value:function(e){return this.get("quest-".concat(e,"-title"))}},{key:"getQuestDescription",value:function(e){return this.get("quest-".concat(e,"-description"))}},{key:"getResourceName",value:function(e){return this.get("resource-".concat(e,"-name"))}},{key:"getItemName",value:function(e){var t=B[Le(e).itemType];return this.get("item-".concat(t,"-").concat(e,"-name"))}},{key:"getStructureName",value:function(e){return this.get("structure-".concat(e,"-name"))}},{key:"compileAll",value:function(){var e=this;Object.keys(this.texts).forEach(function(t){e.compile(t,e.texts[t])})}},{key:"compile",value:function(e,t){var n=Qe.compile(t);this.templates[e]=n}}]),e}();He.initialized=!1,He.texts=void 0,He.templates=void 0,Qe.registerHelper("item:name",function(e,t){if(!Be[e])return new Qe.SafeString("<<ITEM DEFINITION NOT FOUND: ".concat(e,">>"));switch(t){case"aA":return Ge(e);case"aD":case"aU":return ze(e);default:var n=Be[e].name;return new Qe.SafeString(n)}}),Qe.registerHelper("structure:name",function(e){var t=He.get("structure-".concat(e,"-name"));return new Qe.SafeString(t)});var _e,Fe,Ge=function(e){return Ue(e)},Ue=function(e){var t=He.getItemName(e),n=He.getTemplate("common-article-undefined");return new Qe.SafeString("".concat(n({noun:t})))},ze=function(e){var t=He.getItemName(e),n=He.getTemplate("common-article-defined");return new Qe.SafeString("".concat(n({noun:t})))},Pe=(n(146),n(147),function(e){var t=e.adventurer,n=(e.className||"")+" avatar";return m.createElement("div",{className:n,style:{backgroundImage:"url(".concat(t.avatarImg,")")},onClick:function(){e.onClick&&e.onClick(e.adventurer.id)}},m.createElement("div",{className:"sizer"}),e.displayName&&m.createElement("div",{className:"name"},t.name))}),Ve=n(20);n(44);!function(e){e[e.item=0]="item"}(_e||(_e={})),function(e){e[e.smallest=0]="smallest",e[e.small=1]="small",e[e.medium=2]="medium",e[e.big=3]="big",e[e.biggest=4]="biggest"}(Fe||(Fe={}));var Ke=function e(t){switch(t){case Fe.smallest:return"common-icon-smallest";case Fe.small:return"common-icon-small";case Fe.medium:return"common-icon-medium";case Fe.big:return"common-icon-big";case Fe.biggest:return"common-icon-biggest"}return e(Fe.medium)},Xe=(n(149),function(e){var t=e.item,n=Le(t),r=m.useContext(Rr),a=m.useRef(null);n||console.warn("could not find definition for ".concat(t));var o="item-icon "+Ke(e.size);return m.createElement("div",{className:o,onClick:function(n){if(!1!==e.showContext){var o=n.currentTarget.getBoundingClientRect();r.onContextualObjectActivated(_e.item,Le(t),a,o)}e.onClick&&e.onClick(n)},style:{backgroundImage:"url(".concat(n.iconImg,")")}})});var Ye,Je=function(e){function t(){return Object(k.a)(this,t),Object(E.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.onClick,r=e.isDragging,a=e.connectDragSource,o=e.size;return r?null:a(m.createElement("div",null,m.createElement(Xe,{item:t,onClick:function(e){n&&n(e)},size:o})))}}]),t}(m.Component),Ze=Object(Ve.c)(R,{beginDrag:function(e){return{inventorySlot:e.index,item:e.item,sourceId:e.sourceId,sourceType:e.sourceType}}},function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(Je),$e=function(e){return function(t){function n(){return Object(k.a)(this,n),Object(E.a)(this,Object(j.a)(n).apply(this,arguments))}return Object(I.a)(n,t),Object(O.a)(n,[{key:"render",value:function(){var t=this;return m.createElement(Rr.Consumer,null,function(n){return m.createElement(e,Object.assign({},t.props,n))})}}]),n}(m.Component)},et=(n(150),function(e){function t(){return Object(k.a)(this,t),Object(E.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isOver,n=e.canDrop,r=e.connectDropTarget;var a="inventory-item "+Ke(this.props.size);return r(m.createElement("div",{className:a},this.props.children))}}]),t}(m.Component)),tt=Object(Ve.d)(R,{drop:function(e,t){e.onDrop(t.getItem())},canDrop:function(e){return e.empty}},function(e,t){return{canDrop:t.canDrop(),connectDropTarget:e.dropTarget(),isOver:t.isOver()}})(et),nt=$e(function(e){for(var t=[],n=function(n){var r=void 0,a=e.items[n];a&&(r=m.createElement(Ze,{index:n,sourceId:e.sourceId,sourceType:e.sourceType,item:a}));var o=m.createElement(tt,{key:"inventory-slot-".concat(n),empty:void 0===r,size:e.iconSize,onDrop:function(t){if(e.onDropItem){var r=t.inventorySlot;e.onDropItem(t.item,r,n,t.sourceType,t.sourceId)}}},r);t.push(o)},r=0;r<e.items.length;r++)n(r);return m.createElement("div",{className:"inventory"},t)}),rt=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(E.a)(this,Object(j.a)(t).call(this,e))).state={selectedAdventurer:null},n}return Object(I.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=function(t){var n=t.id===e.state.selectedAdventurer?"selected":void 0;return m.createElement("li",{key:t.id,className:n},m.createElement(Pe,{adventurer:t,onClick:function(){var n=e.state.selectedAdventurer===t.id?null:t.id;e.setState({selectedAdventurer:n})}}))};return m.createElement("div",{className:"adventurers-box"},m.createElement("h3",null,"Adventurers"),m.createElement("ul",null,Object.keys(e.props.groupedAdventurers).map(function(n){return function(n,r){var a=r.find(function(t){return t.id===e.state.selectedAdventurer}),o=null;a&&(o=m.createElement("div",{className:"adventurer-info"},m.createElement("div",null,a.name," "),m.createElement("div",{className:"adventurer-info-container"},m.createElement("div",{className:"equipment"},m.createElement("br",null),"[ TODO: GEAR ]"),m.createElement(nt,{items:a.inventory,sourceId:a.id,sourceType:A.adventurerInventory,onDropItem:function(t,n,r,o){switch(o){case A.adventurerInventory:e.props.onMoveItemInInventory&&e.props.onMoveItemInInventory(a.id,n,r);break;case A.warehouse:e.props.onMoveItemFromWarehouseToAdventurer&&e.props.onMoveItemFromWarehouseToAdventurer(a.id,t,n,r)}}}))));var c=e.props.quests.find(function(e){return e.name===n}),s="",i="";return c&&(i="img/sigils/".concat(c.icon),s=He.getQuestTitle(c.name)),m.createElement("li",{key:n,className:"group"},m.createElement("div",{className:"sigil",style:{backgroundImage:"url(".concat(i,")")}}),m.createElement("span",{className:"title",title:s}," ",s," "),m.createElement("ul",{className:"adventurer-portraits"},r.map(function(e){return t(e)})),o)}(n,e.props.groupedAdventurers[n])})))}}]),t}(m.Component),at=n(36);!function(e){e[e.unavailable=0]="unavailable",e[e.available=1]="available",e[e.active=2]="active",e[e.completed=3]="completed"}(Ye||(Ye={}));var ot,ct=function(e){return e.adventurers},st=function(e){return e.quests},it=Object(at.a)([ct,st],function(e,t){var n=[],r=function(t){return e.find(function(e){return e.id===t})},a=Object.values(t).reduce(function(e,t){var a=t.party.map(function(e){return r(e)});return t.status===Ye.active&&(e[t.name]=a),n.push.apply(n,Object(y.a)(a)),e},{});return a.solo=e.filter(function(e){return-1===n.indexOf(e)}),a}),ut=Object(at.a)([ct,st],function(e,t){var n=t.reduce(function(e,t){return t.status===Ye.active&&e.push.apply(e,Object(y.a)(t.party)),e},[]);return e.filter(function(e){return-1===n.indexOf(e.id)})}),lt=Object(g.b)(function(e){return{groupedAdventurers:it(e),quests:e.quests}},function(e){return{onMoveItemFromWarehouseToAdventurer:function(t,n,r,a){var o=q(r);e(o);var c=N(t,n,a);e(c)},onMoveItemInInventory:function(t,n,r){var a=C(t,n,r);e(a)}}})(rt),mt=(n(151),function(e){var t=e.className||"";return m.createElement("div",{className:"ui-button widgets-squareiconbutton ".concat(t),onClick:function(t){e.onClick&&e.onClick(t)}},e.text)}),dt=(n(75),function(e){var t=(e.active?"active":"")+(e.className||"");return m.createElement("li",{className:"widget-tab ".concat(t),onClick:function(t){e.onClick&&e.onClick(t)}},e.children)}),pt=n(35),gt=function(e){var t=null;e.children&&e.children.length&&(t=e.children[0].props.id);var n=Object(m.useState)(t),r=Object(pt.a)(n,2),a=r[0],o=r[1],c=e.className||"",s=d.a.Children.map(e.children,function(e){return d.a.cloneElement(e,{active:e.props.id===a,onClick:function(){i(e.props.id)}})}),i=function(t){o(t),e.onTabSelected&&e.onTabSelected(t)};return d.a.createElement("ul",{className:"widget-tabstrip ".concat(c),onClick:function(t){e.onClick&&e.onClick(t)}},s)};n(152);!function(e){e[e.all=0]="all",e[e.town=1]="town",e[e.quest=2]="quest"}(ot||(ot={}));var vt,ft=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(E.a)(this,Object(j.a)(t).call(this,e))).state={expanded:!1,selectedTabId:"all"},n}return Object(I.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=[{label:He.get("common-log-tab-all"),tabId:"all",tabType:ot.all},{label:He.get("common-log-tab-town"),tabId:"town",tabType:ot.town}];this.props.questNames.forEach(function(e){t.push({channelContext:e,label:He.getQuestTitle(e),tabId:"quest-".concat(e),tabType:ot.quest})});var n=[],r=t.find(function(t){return t.tabId===e.state.selectedTabId});switch(r.tabType){case ot.all:n=this.props.logEntries;break;case ot.town:n=this.props.logEntries.filter(function(e){return e.channel===a.town});break;case ot.quest:n=this.props.logEntries.filter(function(e){return e.channel===a.quest&&e.channelContext===r.channelContext})}var o=t.map(function(e){return m.createElement(dt,{id:e.tabId,key:e.tabId},e.label)});return m.createElement("div",{className:"log ".concat(this.state.expanded?"expanded":"")},m.createElement("div",{className:"tab-bar"},m.createElement(gt,{className:"tabs",onTabSelected:function(t){return e.handleTabSelected(t)}},o),m.createElement(mt,{className:"expand-button",onClick:function(){return e.handleToggleExpand()},text:this.state.expanded?"\u25bc":"\u25b2"})),m.createElement("div",{className:"log-entries"},n.map(function(e){return function(e){var t=He.get(e.key,e.context);return m.createElement("div",{className:"entry",key:e.time},t)}(e)})))}},{key:"handleTabSelected",value:function(e){this.setState({selectedTabId:e})}},{key:"handleToggleExpand",value:function(){this.setState({expanded:!this.state.expanded})}}]),t}(m.Component),ht=function(e){return e.log},bt=Object(at.a)([function(e){return e.quests}],function(e){return e.filter(function(e){return e.status===Ye.active}).map(function(e){return e.name})}),yt=function(e,t){return Object(at.a)([ht],function(e){return e.find(function(e){return e.channel===a.quest&&e.channelContext===t})})(e)},wt=Object(g.b)(function(e){return{logEntries:e.log,questNames:bt(e)}},function(e){return{}})(ft),kt=n(33);!function(e){e[e.NotBuilt=0]="NotBuilt",e[e.Building=1]="Building",e[e.Built=2]="Built"}(vt||(vt={}));var Ot,Et,jt;vt.NotBuilt;!function(e){e[e.town=0]="town",e[e.world=1]="world"}(Ot||(Ot={})),function(e){e[e.buttonClick=0]="buttonClick"}(Et||(Et={}));var Tt={},It=null,Ct={},Nt=function(){function e(){Object(k.a)(this,e)}return Object(O.a)(e,null,[{key:"loadMedia",value:function(e){jt=e}},{key:"addSounds",value:function(e){Object.entries(e).forEach(function(e){var t=Object(pt.a)(e,2),n=t[0],r=t[1];Ct[n]=jt.find(function(e){return e.url===r}).content})}},{key:"playSound",value:function(e){Ct[e].play()}},{key:"addMusicTrack",value:function(e,t){var n=jt.find(function(e){return e.url===t});if(!n)throw new Error("No sound found at ".concat(t));Tt.hasOwnProperty(e)||(Tt[e]=n.content)}},{key:"playMusicTrack",value:function(e){null!==It&&Tt[It].fade(1,0,500);var t=Tt[e];t.playing()||(t.loop(!0),t.play()),t.fade(0,1,500),It=e}}]),e}(),xt=(n(198),function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(E.a)(this,Object(j.a)(t).call(this,e))).plasmaBeam=void 0,n.anim=void 0,n.handleStructureClick=function(e){n.props.onStructureClick&&n.props.onStructureClick(F[e.target.name()])},n.handleBackgroundClick=function(e){n.props.onStructureClick&&n.props.onStructureClick(null)},n.state={images:{}},Nt.addMusicTrack(Ot.town,"sound/music/Soliloquy.mp3"),n}return Object(I.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){this.playMusic()}},{key:"componentWillUnmount",value:function(){this.anim&&this.anim.stop(),delete this.anim}},{key:"render",value:function(){var e=this,t=Object.keys(F).map(function(t,n){var r=de[t],a=e.props.structures[t];if(a.state===vt.NotBuilt)return null;var o=r.levels[a.level],c=He.get(o.displayName);return m.createElement(kt.Text,{name:t,key:t,text:"".concat(c," (level ").concat(a.level+1,")"),x:100,y:50*n+100,fontSize:40,fill:"white",onClick:e.handleStructureClick})});return console.log("rendered the town"),m.createElement(kt.Stage,{width:1024,height:768,scale:{x:.4,y:.4}},m.createElement(kt.Layer,{name:"background",onClick:this.handleBackgroundClick},m.createElement(kt.Image,{image:this.imgSrc("img/town/sky.jpg")})),m.createElement(kt.Layer,{name:"town"},m.createElement(kt.Image,{name:"warehouse",image:this.imgSrc("img/town/tavern.png"),x:15,y:1057,shadowBlur:15,shadowColor:"red",shadowEnabled:!0,strokeWidth:30,ref:function(e){St(e)}}),m.createElement(kt.Image,{name:F.warehouse,image:this.imgSrc("img/town/lighthouse.png"),ref:function(e){St(e)}}),m.createElement(kt.Image,{name:"lumberMill",image:this.imgSrc("img/town/mill.png"),x:947,y:1384,shadowBlur:15,ref:function(e){St(e)}}),t))}},{key:"imgSrc",value:function(e){var t=this.props.media.find(function(t){return t.url===e});if(void 0===t)throw Error("Could not find image with url ".concat(e));return t.content}},{key:"playMusic",value:function(){Nt.playMusicTrack(Ot.town)}}]),t}(m.Component)),St=function(e){},qt=xt,At=n(15);var Dt,Rt,Wt=Object(At.c)(Object(g.b)(function(e,t){return{structures:e.structures}},function(e,t){return{}}),$e)(qt);function Mt(e){return{type:Dt.addGold,amount:e}}function Bt(e){return{type:Dt.addGold,amount:-e}}function Lt(e){return{type:Rt.addResources,resources:e}}(Dt||(Dt={})).addGold="addGold",function(e){e.addResources="addResources",e.removeResources="removeResources"}(Rt||(Rt={}));n(199);var Qt,Ht,_t=function(e){var t=e.itemsInInventory,n=(e.className||"")+" itemsbox",r=e.items.reduce(function(e,t){return e[t]||(e[t]=0),e[t]++,e},{}),a=Object.keys(r).map(function(e){var n=e,a=r[e],o="item";a>(t?t.filter(function(e){return e===n}).length:0)&&(o+=" missing");var c=Be[n];return m.createElement("li",{className:o,key:n},m.createElement("div",{className:"icon common-icon-smallest",style:{backgroundImage:"url(".concat(c.iconImg,")")}}),m.createElement("div",{className:"name"},"".concat(He.getItemName(n)," (").concat(a,")")))});return m.createElement("ul",{className:n},a)},Ft=Object(g.b)(function(e,t){var n=[],r=Object(y.a)(e.items);return t.items.forEach(function(e){var t=r.findIndex(function(t){return t===e});if(t>-1){var a=r.splice(t,1),o=Object(pt.a)(a,1)[0];o&&n.push(o)}}),{itemsInInventory:n}})(_t);!function(e){e.wood="wood",e.iron="iron",e.stone="stone",e.leather="leather",e.fabric="fabric",e.food="food"}(Ht||(Ht={}));var Gt=(Qt={},Object(w.a)(Qt,Ht.wood,{resource:Ht.wood,iconImg:"/img/resources/wood.png"}),Object(w.a)(Qt,Ht.iron,{resource:Ht.iron,iconImg:"/img/resources/iron.png"}),Object(w.a)(Qt,Ht.stone,{resource:Ht.stone,iconImg:"/img/resources/stone.png"}),Object(w.a)(Qt,Ht.leather,{resource:Ht.leather,iconImg:"/img/resources/leather.png"}),Object(w.a)(Qt,Ht.fabric,{resource:Ht.fabric,iconImg:"/img/resources/fabric.png"}),Object(w.a)(Qt,Ht.food,{resource:Ht.food,iconImg:"/img/resources/food.png"}),Qt),Ut=(n(58),function(e){var t=e.sufficientResources,n=(e.className||"")+" resourcesbox",r=Object.keys(e.resources).map(function(n){var r="resource";t&&!t[n]&&(r+=" insufficient");var a=Gt[n];if(!a)throw new Error("No resource description found for ".concat(n));return m.createElement("li",{className:r,key:n},m.createElement("div",{className:"icon",style:{backgroundImage:"url(".concat(a.iconImg,")")}}),m.createElement("div",{className:"name"},He.getResourceName(n)),m.createElement("div",{className:"amount"},e.resources[n]))});return m.createElement("ul",{className:n},r)}),zt=Object(g.b)(function(e,t){var n={};return Object.keys(t.resources).forEach(function(r){n[r]=e.resources[r]>=t.resources[r]}),{sufficientResources:n}})(Ut),Pt=function(e,t){if(t>6)throw new Error("Cannot possibly have more than ".concat(6," on one item!"));return e-.1*e*t},Vt=(n(200),function(e){var t,n,r,a=(t=e.progress||0,n=0,t>(r=1)?r:t<n?n:t);return m.createElement("div",{className:"progressbar"},m.createElement("div",{className:"progressbar-label"},e.label),m.createElement("div",{className:"progressbar-info",style:{width:"".concat(100*a,"%")}},"  "))});n(201);var Kt,Xt,Yt=function(e){var t;return t=null==e.max?e.value:m.createElement("span",null,e.value," / ",m.createElement("span",{className:"max"},e.max)),m.createElement("div",{className:"updownvalue"},m.createElement("label",null," ",e.label),t,m.createElement("i",{className:"arrow up"+(e.upDisabled?" disabled":""),onClick:function(t){e.onUp&&!e.upDisabled&&e.onUp(t)}}),m.createElement("i",{className:"arrow down"+(e.downDisabled?" disabled":""),onClick:function(t){e.onDown&&!e.downDisabled&&e.onDown(t)}}))},Jt=(n(202),function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(E.a)(this,Object(j.a)(t).call(this,e))).state={selectedItem:null,workersAssigned:0},n}return Object(I.a)(t,e),Object(O.a)(t,[{key:"componentWillMount",value:function(){console.log("component will mount"+this.props.type)}},{key:"componentWillUnmount",value:function(){console.log("component will unmount"+this.props.type)}},{key:"render",value:function(){var e=this,t=de[this.props.type];if(!t)throw new Error("No definition found for structure ".concat(this.props.type,"\n                with type ProductionStructureDefinition."));var n=this.props.level||0,r=t.levels[n],a=He.get(r.displayName);return m.createElement("details",{open:!0,className:"productionstructureview"},m.createElement("summary",null,a),m.createElement("section",null,function(){var r=e.props.gold,a=t.levels[n+1],o=null!=a?a.cost.gold||0:-1,c=null!=a&&r>=o,s="Upgrade! (".concat(o<0?"max":o+" gold",")");return m.createElement("div",null,m.createElement("label",null,"level:"),n+1+" / "+t.levels.length,m.createElement("button",{style:{float:"right"},onClick:function(t){e.props.onUpgrade&&e.props.onUpgrade(o,n+1)},disabled:!c},s))}(),m.createElement("div",null,"craft:"),m.createElement("div",{className:"crafting-area"},m.createElement("ul",{className:"vertical-tab-bar"},function(){var t=e.state.selectedItem;return r.produces.map(function(n){return m.createElement("li",{key:"craft".concat(n.item),onClick:function(t){t.stopPropagation(),e.setState({selectedItem:n.item})},className:t===n.item?"selected":""},m.createElement(Xe,{item:n.item}),He.getItemName(n.item))})}()),function(){var t=e.state.selectedItem;if(!t)return null;var n=r.produces.find(function(e){return e.item===t}),a=e.props.resources||{},o=n.cost.resources,c=Object.keys(o).some(function(e){return o[e]>a[e]}),s=!1,i=n.cost.materials;i&&(s=i.some(function(t){return-1===e.props.items.indexOf(t)}));var u=c||s||e.state.workersAssigned<1,l=Be[t],d=null;return i&&(d=m.createElement(Ft,{items:i})),m.createElement("div",{className:"crafting-details"},"Craft a ",He.getItemName(l.item),m.createElement("div",{className:"crafting-costs"},m.createElement("fieldset",null,m.createElement(zt,{resources:o})),m.createElement("fieldset",null,d)),m.createElement("div",{style:{display:"flex "}},m.createElement(Yt,{value:e.state.workersAssigned,label:"Workers: ",onUp:function(t){t.stopPropagation(),e.setState({workersAssigned:e.state.workersAssigned+1})},onDown:function(t){t.stopPropagation(),e.setState({workersAssigned:e.state.workersAssigned-1})},upDisabled:e.state.workersAssigned>=e.props.workersFree||e.state.workersAssigned>=6,downDisabled:e.state.workersAssigned<1}),"\xa0",function(t){if(0===e.state.workersAssigned)return"";var n=Pt(t,e.state.workersAssigned),r=_(n);return" Crafting time: ".concat(r)}(n.cost.time||0)),m.createElement("div",null,m.createElement("button",{disabled:u,onClick:function(t){t.stopPropagation(),e.props.onCraft&&(e.props.onCraft(n,e.state.workersAssigned),e.setState({workersAssigned:0}))}},"Craft")))}()),m.createElement("fieldset",null,m.createElement("legend",null,"Currently crafting:"),(e.props.tasks||[]).map(function(e){return m.createElement(Vt,{key:"".concat(e.name).concat(e.startTime),label:"".concat(e.name," (").concat(_(e.timeRemaining),")"),progress:e.progress})}))))}}]),t}(m.Component));function Zt(e){return{type:Kt.finishBuildingStructure,structure:e}}function $t(e){return{type:Kt.upgradeStructure,structure:e}}function en(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{type:Kt.increaseWorkers,structure:e,workers:t}}function tn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{type:Kt.decreaseWorkers,structure:e,workers:t}}function nn(e,t,n,r,a){return{type:Xt.start,taskType:e,name:t,origin:n,time:r,callbacks:a}}!function(e){e.upgradeStructure="upgradeStructure",e.increaseWorkers="increaseWorkers",e.decreaseWorkers="decreaseWorkers",e.startBuildingStructure="startBuildingStructure",e.finishBuildingStructure="finishBuildingStructure",e.setStructureState="setStructureState"}(Kt||(Kt={})),function(e){e.start="startTask",e.update="updateTasks"}(Xt||(Xt={}));var rn,an=Object(at.a)([function(e){return e.structures},function(e){return e.workers}],function(e,t){return t-Object.keys(e).map(function(t){return e[t]}).reduce(function(e,t){return e+t.workers},0)});!function(e){e[e.buildStructure=0]="buildStructure",e[e.craftItem=1]="craftItem"}(rn||(rn={}));var on=Object(g.b)(function(e,t){var n=e.structures[t.type],r=e.tasks.running.filter(function(e){return e.origin==="".concat(t.type,".craft")});return{gold:e.gold,items:e.items,level:n.level,resources:e.resources,tasks:r,workersFree:an(e)}},function(e,t){return{onCraft:function(n,r){var a,o=Pt(n.cost.time||0,r);e((a=n.cost.resources||{},{type:Rt.removeResources,resources:a})),e(en(t.type,r));var c=[S(n.item),tn(t.type,r)],s=nn(rn.craftItem,n.item,"".concat(t.type,".craft"),o,c);e(s)},onUpgrade:function(n,r){e(Bt(n)),e($t(t.type)),e(v("log-town-upgrade-structure-complete",{level:++r,structure:t.type},a.town))}}})(Jt),cn=function(e){var t=de[e.type];if(!t)throw new Error("No definition found for structure ".concat(e.type," with type ResourceStructureDefinition."));var n=e.level||0,r=t.levels[n],a=He.get(r.displayName);return m.createElement("details",{open:!0,className:"structureview"},m.createElement("summary",null,a),m.createElement("section",null,function(){var t=e.workers===r.workerCapacity||(e.workersFree||0)<1,n=0===e.workers;return m.createElement(Yt,{label:"workers:",value:e.workers,max:r.workerCapacity,upDisabled:t,downDisabled:n,onDown:function(){e.onWorkersDown&&e.onWorkersDown()},onUp:function(){e.onWorkersUp&&e.onWorkersUp()}})}(),function(){var r=e.gold||0,a=t.levels[n+1],o=null!=a?a.cost.gold||0:-1,c=null!=a&&r>=o,s="Upgrade! (".concat(o<0?"max":o+" gold",")");return m.createElement("div",null,m.createElement("label",null,"level:"),n+1+" / "+t.levels.length,m.createElement("button",{style:{float:"right"},onClick:function(t){e.onUpgrade&&e.onUpgrade(o,n+1)},disabled:!c},s))}(),function(){var t=r.generates,n=Object.keys(t).reduce(function(n,r){return t[r]&&n.push("".concat(t[r]," x ").concat(e.workers," = ").concat(t[r]*(e.workers||0)," ").concat(r)),n},[]).join(",");return m.createElement("div",null,"Generates (every minute): ",m.createElement("br",null),n)}()))};var sn,un=Object(g.b)(function(e,t){var n=e.structures[t.type];if(!n)throw new Error("No structure '".concat(t.type,"' found in the store!"));return{gold:e.gold,level:n.level,workers:n.workers,workersFree:an(e)}},function(e,t){return{onUpgrade:function(n,r){e(Bt(n)),e($t(t.type)),e(v("log-town-upgrade-structure-complete",{level:++r,structure:t.type},a.town))},onWorkersDown:function(){e(tn(t.type))},onWorkersUp:function(){e(en(t.type))}}})(cn);function ln(e){return{type:sn.advanceQuest,questName:e}}function mn(e,t){return{type:sn.startEncounter,questName:e,encounter:t}}!function(e){e.launchQuest="launchQuest",e.advanceQuest="advanceQuest",e.updateQuestVars="updateQuestVars",e.updateEncounterResult="updateEncounterResult",e.startEncounter="startEncounter",e.updateQuests="updateQuests"}(sn||(sn={}));n(203);var dn={beginDrag:function(e){return{adventurer:e.adventurer,sourceId:e.sourceId,sourceType:A.adventurerInventory}}};var pn,gn,vn=function(e){function t(){return Object(k.a)(this,t),Object(E.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isDragging,n=e.connectDragSource,r="draggable-adventurer-avatar";return e.disabled&&(r+=" disabled"),t&&(r+=" dragging"),n(m.createElement("div",{className:r},m.createElement(Pe,this.props)))}}]),t}(m.Component),fn=Object(Ve.c)(D,dn,function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(vn);!function(e){e.backstabbed="backstabbed",e.goblinHouseHallway="goblinHouseHallway",e.goblinHouseOutside="goblinHouseOutside",e.theBigTree="theBigTree"}(pn||(pn={})),function(e){e[e.nothing=0]="nothing",e[e.encounter=1]="encounter",e[e.combat=2]="combat",e[e.boss=3]="boss"}(gn||(gn={}));var hn={kill10Boars:{nodes:[{x:0,y:1,type:gn.nothing,log:"quest-kill10Boars-node0"},{x:0,y:3,type:gn.nothing,log:"quest-kill10Boars-node1"},{x:0,y:2,type:gn.encounter,encounter:pn.goblinHouseOutside},{x:0,y:3,type:gn.nothing,log:"quest-kill10Boars-node4"},{x:1,y:3,type:gn.nothing},{x:1,y:3,type:gn.nothing},{x:2,y:1,type:gn.encounter,encounter:pn.backstabbed},{x:1,y:3,type:gn.nothing,log:"The party spots a boss"},{x:2,y:3,type:gn.boss}]},retrieveMagicAmulet:{requiredItems:[L.torch,L.torch,L.torch,L.sandwich,L.sandwich],nodes:[{x:0,y:1,type:gn.nothing},{x:1,y:1,type:gn.nothing,log:"Papa loves mambo"},{x:1,y:1,type:gn.nothing,log:"Mama loves mambo"},{x:1,y:1,type:gn.nothing,log:"Look at 'em sway with it"},{x:1,y:1,type:gn.nothing,log:"gettin' so gay with it"},{x:1,y:1,type:gn.nothing},{x:1,y:1,type:gn.nothing},{x:0,y:2,type:gn.encounter,encounter:pn.theBigTree},{x:1,y:1,type:gn.nothing},{x:1,y:1,type:gn.nothing},{x:1,y:1,type:gn.nothing},{x:1,y:1,type:gn.nothing},{x:1,y:1,type:gn.nothing},{x:1,y:1,type:gn.nothing},{x:1,y:1,type:gn.nothing},{x:1,y:1,type:gn.nothing},{x:1,y:1,type:gn.nothing},{x:2,y:1,type:gn.encounter,encounter:pn.backstabbed},{x:3,y:1,type:gn.boss}]}},bn=hn;function yn(e){return hn[e]}n(204);var wn=function(e){function t(){return Object(k.a)(this,t),Object(E.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isOver,n=e.canDrop,r="droppable-adventurer-slot";return t?r+=" active-drop":n&&(r+=" can-drop"),(0,e.connectDropTarget)(m.createElement("div",{className:r}))}}]),t}(m.Component),kn=Object(Ve.d)(D,{drop:function(e,t){e.onDrop(t.getItem())},canDrop:function(e,t){return!0}},function(e,t){return{canDrop:t.canDrop(),connectDropTarget:e.dropTarget(),isOver:t.isOver()}})(wn),On=(n(205),function(e){return m.createElement("ul",{className:"assign-adventurers"},function(){for(var t=[],n=function(n){var r=void 0,a="";if(e.assignedAventurers[n]){var o=e.assignedAventurers[n];r=m.createElement(Pe,{adventurer:o,displayName:!1,onClick:function(){return e.onRemoveAdventurer(n)}}),a="has-adventurer"}else r=m.createElement(kn,{onDrop:function(t){e.onAddEventurer(t,n)}});t.push(m.createElement("li",{key:"slot".concat(n),className:a}," ",r," "))},r=0;r<e.availableSlots;r++)n(r);return t}())}),En=(n(206),function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(E.a)(this,Object(j.a)(t).call(this,e))).state={selectedQuest:null},n}return Object(I.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=this.props.availableQuests.map(function(t){var n="img/sigils/".concat(t.icon),r="quest"+(t.name===e.props.selectedQuestName?" selected":"");return m.createElement("li",{key:t.name,className:r,onClick:function(){e.props.onQuestClick(t.name)}},m.createElement("div",{className:"icon",style:{backgroundImage:"url(".concat(n,")")}}),m.createElement("div",{className:"title"},He.getQuestTitle(t.name)," "))});return m.createElement("div",{className:"quest-board"},m.createElement("h2",null," ",He.get("structure-tavern-title-quest-board")," "),m.createElement("ul",{className:"quest-list"},t),function(){if(!e.props.selectedQuestName)return null;var t=e.props.availableQuests.find(function(t){return t.name===e.props.selectedQuestName});if(!t)return m.createElement("div",null," ",He.get("structure-tavern-quest-launched")," ");var n=yn(t.name),r=e.props.assignedAventurers.filter(function(e){return null!==e}).length>=3,a=e.checkEnoughItems(n),o=r&&a;return m.createElement("div",{className:"quest-details"},He.getQuestDescription(e.props.selectedQuestName),m.createElement(On,{availableSlots:5,assignedAventurers:e.props.assignedAventurers,onRemoveAdventurer:e.props.onRemoveAdventurer,onAddEventurer:e.props.onAddAdventurer}),m.createElement(Ft,{items:n.requiredItems||[]}),m.createElement("button",{disabled:!o,onClick:function(){return e.props.onLaunchQuest()}},He.get("structure-tavern-button-launch-quest")))}())}},{key:"checkEnoughItems",value:function(e){var t=this;return!e.requiredItems||e.requiredItems.every(function(n){var r=e.requiredItems.filter(function(e){return e===n}).length;return t.props.items.filter(function(e){return e===n}).length>=r})}}]),t}(m.Component));var jn=Object(g.b)(function(e,t){return{items:e.items}})(En),Tn=(n(207),function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(E.a)(this,Object(j.a)(t).call(this,e))).state={assignedAventurers:[],selectedQuestName:null},n}return Object(I.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=de[F.tavern],n=this.props.level||0,r=t.levels[n],a=He.get(r.displayName),o=r.rooms,c=this.props.quests.filter(function(e){return e.status===Ye.available});return m.createElement("details",{open:!0,className:"tavernstructureview"},m.createElement("summary",null,a),function(){var r=e.props.gold,a=t.levels[n+1],o=null!=a?a.cost.gold||0:-1,c=null!=a&&r>=o,s="Upgrade! (".concat(o<0?"max":o+" gold",")");return m.createElement("div",null,m.createElement("label",null,"level:"),n+1+" / "+t.levels.length,m.createElement("button",{style:{float:"right"},onClick:function(t){e.props.onUpgrade&&e.props.onUpgrade(o,n+1)},disabled:!c},s))}(),m.createElement("section",null,function(){for(var t=[],n=function(n){var r=e.props.adventurers.find(function(e){return e.room===n}),a=null;if(r){var o=r.name,c=e.state.assignedAventurers.indexOf(r)>-1,s=e.getQuestByAdventurer(r.id);s&&(o+=" (on a quest)"),a=[m.createElement(fn,{disabled:c||null!=s,adventurer:r,className:"adventurer-icon",sourceId:"tavern",key:"avatar:".concat(r.id)}),o]}else a="(empty room)";t.push(m.createElement("div",{key:"room".concat(n),className:"room"},a))},r=0;r<o;r++)n(r);return m.createElement("div",{className:"rooms"},m.createElement("h2",null,"Rooms"),t)}(),m.createElement(jn,{availableQuests:c,selectedQuestName:this.state.selectedQuestName,assignedAventurers:this.state.assignedAventurers,onQuestClick:function(t){return e.handleQuestClick(t)},onAddAdventurer:function(t,n){return e.handleAddAdventurer(t,n)},onRemoveAdventurer:function(t){return e.handleRemoveAdventurer(t)},onLaunchQuest:function(){return e.handleLaunchQuest()}})))}},{key:"handleQuestClick",value:function(e){this.state.selectedQuestName===e?this.setState({selectedQuestName:null}):this.setState({selectedQuestName:e}),this.setState({assignedAventurers:[]})}},{key:"handleAddAdventurer",value:function(e,t){if("tavern"===e.sourceId){var n=Object(y.a)(this.state.assignedAventurers);n[t]=e.adventurer,this.setState({assignedAventurers:n})}}},{key:"handleRemoveAdventurer",value:function(e){var t=Object(y.a)(this.state.assignedAventurers);delete t[e],this.setState({assignedAventurers:t})}},{key:"handleLaunchQuest",value:function(){var e=this.state.assignedAventurers,t=this.state.selectedQuestName;this.props.onLaunchQuest(t,e)}},{key:"getQuestByAdventurer",value:function(e){return Object.values(this.props.quests).find(function(t){return t.party.indexOf(e)>-1})}}]),t}(m.Component));var In=Object(g.b)(function(e,t){var n=e.structures[F.tavern];return{adventurers:e.adventurers,gold:e.gold,level:n.level,quests:e.quests}},function(e,t){return{onLaunchQuest:function(t,n){e(function(e,t){return{type:sn.launchQuest,questName:e,assignedAventurers:t}}(t,n))},onUpgrade:function(t,n){e(Bt(t)),e($t(F.tavern)),e(v("log-town-upgrade-structure-complete",{level:++n,structure:F.tavern},a.town))}}})(Tn),Cn=function(e){var t=e.sufficientResources,n=e.resources,r=e.deltaResources,a=(e.className||"")+" resourcesbox",o=Object.keys(n).map(function(n){var a="resource";t&&!t[n]&&(a+=" insufficient");var o,c=Gt[n],s=e.resources[n];if(!c)throw new Error("No resource description found for ".concat(n));return r[n]&&(o=m.createElement("span",{className:"animate-up"},"+ ".concat(r[n].toFixed(2)))),m.createElement("li",{className:a,key:n},m.createElement("div",{className:"icon common-icon-smallest",style:{backgroundImage:"url(".concat(c.iconImg,")")}}),m.createElement("div",{className:"name"},He.getResourceName(n)),m.createElement("div",{className:"amount"},s.toFixed(1)),m.createElement("div",{className:"max"}," / ".concat(e.maxResources[n])),m.createElement("div",{className:"delta"},o))});return m.createElement("ul",{className:a},o)},Nn=(n(208),A.warehouse),xn=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(E.a)(this,Object(j.a)(t).call(this,e))).resourcesDelta=void 0,n.resourcesRef=void 0,n.state={selectedAdventurer:null},n.resourcesDelta={},n.resourcesRef=null,n}return Object(I.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=de[F.warehouse];if(!n)throw new Error("No definition found for structure ".concat(F.warehouse," with type StructureDefinition."));var r=t.level,a=He.getStructureName(F.warehouse),o=null;if(this.state.selectedAdventurer){var c=t.adventurersInTown.find(function(t){return t.id===e.state.selectedAdventurer});o=m.createElement(nt,{sourceType:Nn,items:c.inventory,onDropItem:function(n,r,a,o,c){var s=e.state.selectedAdventurer;switch(o){case A.adventurerInventory:t.onMoveItemInInventory&&t.onMoveItemInInventory(s,r,a);break;case Nn:t.onMoveItemToAdventurer&&t.onMoveItemToAdventurer(s,n,r,a)}}})}var s=m.createElement(m.Fragment,null,m.createElement(gt,{className:"adventurers-tabstrip",onTabSelected:function(t){return function(t){e.setState({selectedAdventurer:t})}(t)}},t.adventurersInTown.map(function(e){return m.createElement(dt,{id:e.id,key:e.id},m.createElement(Pe,{adventurer:e,className:"common-icon-small"}))})),m.createElement("div",{className:"adventurer-info"},o));return m.createElement("details",{open:!0,className:"warehouse-structureview"},m.createElement("summary",null,a),function(){var e=t.gold,a=n.levels[r+1],o=null!=a?a.cost.gold||0:-1,c=null!=a&&e>=o,s="Upgrade! (".concat(o<0?"max":o+" gold",")");return m.createElement("div",null,m.createElement("label",null,"level:"),r+1+" / "+n.levels.length,m.createElement("button",{style:{float:"right"},onClick:function(e){t.onUpgrade&&t.onUpgrade(o,r+1)},disabled:!c},s))}(),m.createElement("fieldset",{className:"resources",ref:function(t){e.resourcesRef=t}},m.createElement("legend",null,"Resources"),m.createElement(Cn,{resources:t.resources,maxResources:t.maxResources,deltaResources:this.resourcesDelta})),m.createElement(nt,{sourceType:Nn,items:t.items,onDropItem:function(e,n,r,a,o){switch(a){case Nn:t.onMoveItemInWarehouse&&t.onMoveItemInWarehouse(n,r);break;case A.adventurerInventory:t.onMoveItemFromAdventurer&&t.onMoveItemFromAdventurer(o,e,n,r)}}}),s)}},{key:"componentDidUpdate",value:function(e){var t=this;Object.keys(e.resources).forEach(function(n){t.resourcesDelta[n]=t.props.resources[n]-e.resources[n]}),this.resourcesRef&&(this.resourcesRef.classList.remove("animate"),setTimeout(function(){t.resourcesRef&&t.resourcesRef.classList.add("animate")},200))}}]),t}(m.Component);var Sn=Object(g.b)(function(e,t){var n=e.structures[F.warehouse],r=de[F.warehouse],a=n.level,o=r.levels[a],c=ut(e);if(!n)throw new Error("No structure '".concat(F.warehouse,"' found in the store!"));return{adventurersInTown:c,gold:e.gold,items:e.items,level:a,maxResources:o.maxResources,resources:e.resources,workers:n.workers,workersFree:an(e)}},function(e,t){return{onMoveItemFromAdventurer:function(t,n,r,a){var o=x(t,r);e(o);var c=S(n,a);e(c)},onMoveItemInWarehouse:function(t,n){e(function(e,t){return{type:h.moveItemInWarehouse,fromSlot:e,toSlot:t}}(t,n))},onMoveItemInInventory:function(t,n,r){var a=C(t,n,r);e(a)},onMoveItemToAdventurer:function(t,n,r,a){var o=q(r);e(o);var c=N(t,n,a);e(c)},onUpgrade:function(t,n){e(Bt(t)),e($t(F.warehouse)),e(v("log-town-upgrade-structure-complete",{level:++n,structure:F.warehouse},a.town))}}})(xn),qn=(n(209),function(e){var t;if(e.structures[e.structure].state===vt.Building){var n=e.buildTask?e.buildTask.progress:1;t=m.createElement("div",null,m.createElement(Vt,{label:"Building...",progress:n}))}else t=function(e){switch(de[e].type){case W.production:return m.createElement(on,{type:e});case W.resource:return m.createElement(un,{type:e});case W.warehouse:return m.createElement(Sn,null);case W.tavern:return m.createElement(In,null);default:return m.createElement("div",null," ",e," ")}}(e.structure);return m.createElement("fieldset",{className:"structure-details"},m.createElement("legend",null,"Structure"),t)}),An=(n(210),function(e){var t=null;!1!==e.backEnabled&&(t=m.createElement(mt,{className:"back-button",onClick:function(t){e.onBack&&e.onBack()},text:"<"}));var n=null;return!1!==e.closeEnabled&&(n=m.createElement(mt,{className:"close-button",onClick:function(t){e.onClose&&e.onClose()},text:"x"})),m.createElement("div",{className:"window"},m.createElement("div",{className:"header"},t,m.createElement("h3",null,e.title),n),e.children)}),Dn=function(e){return function(t){function n(e){return Object(k.a)(this,n),Object(E.a)(this,Object(j.a)(n).call(this,e))}return Object(I.a)(n,t),Object(O.a)(n,[{key:"render",value:function(){return m.createElement(An,this.props,m.createElement(e,this.props))}}]),n}(m.Component)};var Rn,Wn=Object(At.c)(Object(g.b)(function(e,t){return{buildTask:e.tasks.running.filter(function(e){return"town"===e.origin&&e.name==="".concat(t.structure,".build")})[0],structures:e.structures}},function(e){return{onCheatGold:function(t){return e(Mt(t))},onCheatResources:function(t){return e(Lt(t))}}}),Dn)(qn),Mn=(n(211),function(e){function t(){return Object(k.a)(this,t),Object(E.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return(0,this.props.connectDropTarget)(m.createElement("div",{className:"droppable-adventurer-avatar"},m.createElement(Pe,{adventurer:this.props.adventurer,onClick:this.props.onClick})))}}]),t}(m.Component)),Bn=Object(Ve.d)(R,{drop:function(e,t){e.onDrop(t.getItem())},canDrop:function(e,t){return!0}},function(e,t){return{canDrop:t.canDrop(),connectDropTarget:e.dropTarget(),isOver:t.isOver()}})(Mn),Ln=(n(212),n(213),{drop:function(e,t){e.onDrop(t.getItem())},canDrop:function(e,t){var n=Le(t.getItem().item);return n.itemType===B.equipment&&n.equipmentType===e.type}}),Qn=Object(Ve.d)(R,Ln,function(e,t){return{canDrop:t.canDrop(),connectDropTarget:e.dropTarget(),isOver:t.isOver()}})(function(e){var t=e.isOver,n=e.canDrop,r="grey";return t&&n?r="green":n&&(r="orange"),(0,e.connectDropTarget)(m.createElement("div",{className:"equipment-slot",style:{borderColor:r}},e.children))}),Hn=function(e){var t=m.useContext(Rr),n=e.adventurer,r=Object.keys(n.stats).map(function(e){var t=n.stats[e];return m.createElement("div",{key:"".concat(n.id,"-").concat(e)}," ",m.createElement("b",null,e),": ",t.toFixed(1)," ")}),a=function(r){var a=n.equipment[ge[r]],o=null;if(a){var c=m.createRef();o=m.createElement(Ze,{index:r,sourceId:n.id,sourceType:A.adventurerEquipment,item:a,onClick:function(e){var n=e.currentTarget.getBoundingClientRect();t.onContextualObjectActivated(_e.item,Le(a),c,n),e.stopPropagation()},ref:c,size:Fe.medium})}return m.createElement(Qn,{onDrop:function(t){return function(t,r){var a=r.item;e.onRemoveItemFromInventory(n.id,r.inventorySlot),e.onAssignEquipment(n.id,t,a)}(r,t)},type:r},o)},o=m.createElement("ul",null,m.createElement("li",null,a(ge.head)),m.createElement("li",null,a(ge.shoulders)),m.createElement("li",null,a(ge.chest)),m.createElement("li",null,a(ge.hands)),m.createElement("li",null,a(ge.legs)),m.createElement("li",null,a(ge.feet)));return m.createElement("div",{className:"adventurer-info"},m.createElement("div",{className:"left"},m.createElement("div",{className:"name"},m.createElement("b",null,n.name)),m.createElement("div",{className:"attributes"},r),m.createElement("div",{className:"equipment"},o)),m.createElement("div",{className:"right"},m.createElement(nt,{sourceType:A.adventurerInventory,sourceId:n.id,items:n.inventory,onDropItem:function(t,r,a){e.onMoveItemInInventory&&e.onMoveItemInInventory(n.id,r,a)}})))},_n=Object(g.b)(function(e){return{}},function(e){return{onAssignEquipment:function(t,n,r){var a=function(e,t,n){return{type:f.assignEquipment,adventurerId:e,item:n,equipmentType:t}}(t,n,r);e(a)},onMoveItemInInventory:function(t,n,r){var a=C(t,n,r);e(a)},onRemoveItemFromInventory:function(t,n){var r=x(t,n);e(r)}}})(Hn),Fn=function(e,t){return t.party.map(function(t){return Gn(e,t)})},Gn=function(e,t){return e.adventurers.find(function(e){return e.id===t})},Un=function(e){return!!e.rngState},zn=n(90),Pn=n.n(zn);function Vn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return e=Math.ceil(e),t=Math.floor(t),Math.floor(function(){if(!Rn)throw new Error("Call init() before random()");return Kn=!0,Rn()}()*(t-e+1))+e}var Kn=!1,Xn=function(){function e(t,n){Object(k.a)(this,e),this.questName=void 0,this.store=void 0,this.questName=t,this.store=n}return Object(O.a)(e,[{key:"getAdventurerWithHighest",value:function(e){return Fn(this.store,this.quest).concat().sort(function(t,n){return n.stats[e]-t.stats[e]})[0]}},{key:"getAdventurerWithLowest",value:function(e){return Fn(this.store,this.quest).concat().sort(function(t,n){return t.stats[e]-n.stats[e]})[0]}},{key:"getRandomAdventurer",value:function(){return this.adventurers[Vn(0,this.adventurers.length)]}},{key:"questVars",get:function(){return this.quest.questVars}},{key:"quest",get:function(){var e=this;return this.store.quests.find(function(t){return t.name===e.questName})}},{key:"adventurers",get:function(){return Fn(this.store,this.quest)}}]),e}(),Yn={},Jn={name:pn.backstabbed,getOracle:function(e,t){return new Xn(e,t)},getDescription:function(e){return{key:"encounter-backstabbed-description"}},getOptions:function(e){return{fight:"Fight the brigands",flight:"Run away!"}},answer:function(e,t,n){switch(e){case"flight":return"You run away like a pussy";case"fight":var r=t.getRandomAdventurer();return n(N(r.id,L.deedForWeaponsmith)),"The party fights off the rogues. One of them drops a document. ".concat(r.name," picks it up");default:throw new Error("Unhandled option '".concat(e))}}},Zn={name:pn.goblinHouseOutside,getOracle:function(e,t){return new Xn(e,t)},getDescription:function(e){return{key:"encounter-goblinHouseOutside-description"}},getOptions:function(e){return{investigate:"Investigate",leave:"Keep walking"}},answer:function(e,t,n){t.store,t.questVars;var r=t.quest;switch(e){case"investigate":return n(mn(r.name,pn.goblinHouseHallway)),"The party coutiously opens the door and goes inside";case"leave":return n(mn(r.name,pn.goblinHouseHallway)),"The party coutiously opens the door and goes inside";default:throw new Error("Unhandled option ".concat(e))}}},$n={backstabbed:Jn,goblinHouseHallway:{name:pn.goblinHouseHallway,getOracle:function(e,t){return new Xn(e,t)},getDescription:function(e){return{key:"encounter-goblinHouseHallway-description"}},getOptions:function(e){return{investigate:"Go inside the house",leave:"Leave the premise"}},answer:function(e,t,n){t.store,t.questVars,t.quest;switch(e){case"walkAround":return"Your party walks around the tree";case"leave":return n(ln(t.questName)),"The party escapes the house unscathed";default:throw new Error("Unhandled option ".concat(e))}}},goblinHouseOutside:Zn,theBigTree:{name:pn.theBigTree,getOracle:function(e,t){return new Xn(e,t)},getDescription:function(e){return{key:"encounter-thebigtree-description"}},getOptions:function(e){var t=e.getAdventurerWithHighest("strength");return{walkAround:"Walk around the tree",lift:"Lift the tree (".concat(t.name,")")}},answer:function(e,t,n){var r=t.questVars,a=t.quest;switch(e){case"walkAround":return"Your party walks around the tree";case"lift":var o=t.getAdventurerWithHighest("strength");r.treeState="lifted",n(function(e,t){return{type:sn.updateQuestVars,questName:e,vars:t}}(a.name,r));var c=Vn(2,5);return n(Mt(c)),"".concat(o.name," heaves and lifts the heavy tree, moving it aside. Underneath your party finds ").concat(c," gold coins");default:throw new Error("Unhandled option ".concat(e))}}}},er=$n;n(222);var tr=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(E.a)(this,Object(j.a)(t).call(this,e))).getAvatars=function(){return n.props.adventurers.map(function(e){var t=n.state.selectedAdventurer===e.id;return d.a.createElement(Bn,{key:"".concat(e.id,"-avatar"),className:t?" selected":"",adventurer:e,onClick:function(){return n.handleAvatarClick(e.id)},onDrop:function(t){var r=n.state.selectedAdventurer;if(e.id!==r&&n.props.onMoveItemToOtherAdventurer){var a=t.inventorySlot;n.props.onMoveItemToOtherAdventurer(r,a,e.id)}}})})},n.getBottomPart=function(){if(n.state.selectedAdventurer){var e=n.props.adventurers.find(function(e){return e.id===n.state.selectedAdventurer});return n.getAdventurerInfo(e)}var t=n.props.quest,r=yn(t.name),a=Math.floor(t.progress),o=r.nodes[a],c=d.a.createElement("p",null),s=d.a.createElement("p",null);switch(o.type){case gn.nothing:c=d.a.createElement("div",null," ",n.props.lastLog&&He.getTextEntry(n.props.lastLog)," ");break;case gn.encounter:var i=n.props.store,u=function(e){return $n[e]}(t.currentEncounter),l=u.getOracle(t.name,i),m=u.getDescription(l),p=He.getTextEntry(m);c=d.a.createElement("div",null,d.a.createElement("p",null," ",p," "));var g=u.getOptions(l);s=d.a.createElement("ul",null,Object.keys(g).map(function(e){return d.a.createElement("li",{key:e},d.a.createElement("button",{onClick:function(){return n.handleEncounterOptionClick(u,e,l)}},e),g[e])}));break;case gn.boss:c=d.a.createElement("p",null," ","Boss fight!"," ")}return d.a.createElement("div",{className:"questlog"},c,d.a.createElement("div",{className:"actions"},s))},n.state={selectedAdventurer:null},n}return Object(I.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return d.a.createElement("div",{className:"partywindow"},d.a.createElement("div",{className:"avatars"},this.getAvatars()),this.getBottomPart())}},{key:"componentDidUpdate",value:function(e){e.quest!==this.props.quest&&this.setState({selectedAdventurer:null})}},{key:"getAdventurerInfo",value:function(e){return e?d.a.createElement(_n,{adventurer:e}):null}},{key:"handleAvatarClick",value:function(e){this.state.selectedAdventurer===e&&(e=null),this.setState({selectedAdventurer:e})}},{key:"handleEncounterOptionClick",value:function(e,t,n){var r=e.answer(t,n,this.props.onDispatch);this.props.onUpdateEncounterResult(this.props.quest.progress,r)}}]),t}(d.a.Component);var nr=Object(At.c)(Object(g.b)(function(e,t){return{adventurers:Fn(e,t.quest),lastLog:yt(e,t.quest.name),store:e}},function(e,t){return{onAdvanceQuest:function(t){e(ln(t))},onDispatch:e,onMoveItemInInventory:function(t,n,r){var a=C(t,n,r);e(a)},onMoveItemToOtherAdventurer:function(t,n,r){var a=function(e,t,n,r){return{type:f.moveItemToOtherAdventurer,adventurerId:e,fromSlot:t,toAdventurerId:n,toSlot:r}}(t,n,r);e(a)},onUpdateEncounterResult:function(n,r){var a=function(e,t,n){return{type:sn.updateEncounterResult,questName:e,nodeIndex:t,result:n}}(t.quest.name,n,r);e(a)}}}),Dn)(tr),rr=(n(223),function(e){var t=e.quest,n=bn[t.name],r=n.nodes.map(function(e,n){return function(e,n){var r={className:Math.floor(t.progress)===n?"active":"",key:"node_".concat(n)};switch(e.type){case gn.encounter:return m.createElement("span",Object.assign({title:"encounter"},r),"*");case gn.boss:return m.createElement("span",Object.assign({title:"boss"},r),"#");case gn.nothing:default:return m.createElement("span",r,"-")}}(e,n)});return m.createElement("div",{className:"questlinevisualization"},m.createElement("div",{className:"questname"}," ",He.getQuestTitle(t.name)," "),r,e.selected?m.createElement("span",{className:"selected"},"selected"):m.createElement("button",{className:"select",onClick:function(){return e.onSelectQuest(t.name)}},"select"))}),ar=(n(224),function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(E.a)(this,Object(j.a)(t).call(this,e))).state={selectedQuest:null},Nt.addMusicTrack(Ot.world,"sound/music/TheLoomingBattle.ogg"),n}return Object(I.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=this.props.quests.find(function(t){return t.name===e.state.selectedQuest}),n=this.props.quests.filter(function(e){return e.status===Ye.active}).map(function(n){return m.createElement(rr,{key:n.name,selected:n===t,quest:n,onSelectQuest:function(){return e.handleSelectQuest(n.name)}})});return m.createElement("div",{className:"realworldview"},m.createElement("fieldset",{className:"progress"},m.createElement("legend",null,"Quest progress"),n))}},{key:"handleSelectQuest",value:function(e){this.setState({selectedQuest:e});var t=this.props.quests.find(function(t){return t.name===e}),n=He.getQuestTitle(t.name),r=m.createElement(nr,{quest:t,title:n});this.props.onOpenWindow(r)}},{key:"componentDidMount",value:function(){this.playMusic()}},{key:"playMusic",value:function(){Nt.playMusicTrack(Ot.world)}}]),t}(m.Component));var or,cr=Object(At.c)(Object(g.b)(function(e,t){return{quests:e.quests}},function(e,t){return{onAdvanceQuest:function(e){}}}),$e)(ar);n(225);!function(e){e[e.bottom=0]="bottom",e[e.top=1]="top",e[e.left=2]="left",e[e.right=3]="right"}(or||(or={}));var sr,ir=["img/town/effects/plasma_beam_heavy_green.png","img/town/effects/smoke.png","img/town/sky.jpg","img/town/lighthouse.png","img/town/tavern.png","img/town/mill.png","sound/fx/button-click.ogg","sound/music/Soliloquy.mp3","sound/music/TheLoomingBattle.ogg"],ur=n(94),lr=n(46),mr=n(37);(sr||(sr={})).addWorkers="addWorkers";n(86);var dr,pr=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(E.a)(this,Object(j.a)(t).call(this,e))).itemSelectRef=void 0,n.handleCheatGold=function(e){var t=n.state.gold;n.props.onCheatGold&&n.props.onCheatGold(t)},n.handleCheatWorkers=function(e){var t=n.state.workers;n.props.onCheatWorkers&&n.props.onCheatWorkers(t)},n.handleCheatResources=function(e){n.props.onCheatResources&&n.props.onCheatResources(n.state.resources)},n.handleCheatItem=function(e){var t=n.itemSelectRef.current.value;n.props.onCheatItem&&n.props.onCheatItem(t)},n.handleChangeStructureState=function(e,t){n.props.onCheatStructureState&&n.props.onCheatStructureState(e,t?vt.Built:vt.NotBuilt)},n.handleChangeGold=function(e){var t=Number(e.target.value);n.setState({gold:t})},n.handleChangeWorkers=function(e){var t=Number(e.target.value);n.setState({workers:t})},n.handleChangeResources=function(e){var t=Number(e.target.checked);n.setState({resources:t})},n.state={gold:50,resources:50,workers:10},n.itemSelectRef=m.createRef(),n}return Object(I.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=Object.keys(this.props.structures).map(function(t){return function(t){var n=de[t],r=e.props.structures[t],a=n.levels[r.level],o=He.get(a.displayName);return m.createElement("div",{className:"label-dropdown",key:t},m.createElement("label",{title:t},"".concat(o)),m.createElement("input",{key:t,type:"checkbox",checked:e.props.structures[t].state===vt.Built,onChange:function(){return e.handleChangeStructureState(t,e.props.structures[t].state!==vt.Built)}}))}(t)}),n=function(e){return m.createElement("option",{value:e,key:e},He.getItemName(e))},r=Object.keys(B).filter(function(e){return!isNaN(e)}).map(function(e){return m.createElement("optgroup",{label:B[e],key:e},function(e){return Object.keys(L).filter(function(t){return Le(t).itemType==e}).map(function(e){return n(e)})}(e))});return m.createElement("div",{className:"cheat-box"},m.createElement("div",{className:"label-numberbox-button"},m.createElement("label",null,"Gold"),m.createElement("input",{type:"number",value:this.state.gold,style:{width:"50px"},onChange:this.handleChangeGold}),m.createElement("button",{onClick:this.handleCheatGold},"Add")),m.createElement("div",{className:"label-numberbox-button"},m.createElement("label",null,"Workers"),m.createElement("input",{type:"number",value:this.state.workers,style:{width:"50px"},onChange:this.handleChangeWorkers}),m.createElement("button",{onClick:this.handleCheatWorkers},"Add")),m.createElement("div",{className:"label-numberbox-button"},m.createElement("label",null,"Resources"),m.createElement("input",{type:"number",value:this.state.resources,style:{width:"50px"},onChange:this.handleChangeResources}),m.createElement("button",{onClick:this.handleCheatResources},"Add")),m.createElement("div",{className:"label-numberbox-button"},m.createElement("label",null,"Items"),m.createElement("select",{style:{width:"150px"},ref:this.itemSelectRef},r),m.createElement("button",{onClick:this.handleCheatItem},"Add")),t)}}]),t}(m.Component),gr=[Ht.food,Ht.wood,Ht.stone,Ht.fabric,Ht.leather],vr=Object(At.c)(Object(g.b)(function(e){return{structures:e.structures}},function(e){return{onCheatGold:function(t){e(Mt(t)),e(v("common-cheat-gold-added",{amount:t},a.common))},onCheatItem:function(t){e(S(t)),e(v("common-cheat-item-added",{item:t},a.common))},onCheatResources:function(t){var n=gr.reduce(function(e,n){return e[n]=t,e},{});e(Lt(n)),e(v("common-cheat-resources-added",{amount:t},a.common))},onCheatStructureState:function(t,n){return e(function(e,t){return{type:Kt.setStructureState,structure:e,state:t}}(t,n))},onCheatWorkers:function(t){var n;e((n=t,{type:sr.addWorkers,value:n})),e(v("common-cheat-workers-added",{amount:t},a.common))}}}),Dn)(pr),fr=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(E.a)(this,Object(j.a)(t).call(this,e))).state={},n}return Object(I.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this;return m.createElement("div",{className:"menu"},m.createElement("ul",null,m.createElement("li",{onClick:function(){var t=m.createElement(vr,{title:"Cheats"});e.props.onOpenWindow(t)}},"Cheats!")))}}]),t}(m.Component),hr=Object(At.c)(Dn,$e)(fr),br=(n(226),function(e){var t=function(e,t,n){return m.createElement("li",{title:n,key:n},m.createElement("div",{className:"icon common-icon-smallest",style:{backgroundImage:"url(".concat(e,")")}}),m.createElement("div",{className:"amount"},t.toFixed(0)))},n=gr.map(function(n){return t(Gt[n].iconImg,e.resources[n],He.getResourceName(n))});return n.push(t("/img/resources/worker.png",e.workersFree,"workers"),t("/img/resources/gold.png",e.gold,"gold")),m.createElement("ul",{className:"resourcebar"},n)}),yr=Object(g.b)(function(e){return{gold:e.gold,resources:e.resources,workers:e.workers,workersFree:an(e)}})(br),wr=(n(227),Object(At.c)(Object(g.b)(function(e){return{}}),mr.f,$e)(function(e){return m.createElement("div",{className:"topbar"},m.createElement("div",{className:"topbar-left"},m.createElement(yr,null)),m.createElement("div",{className:"topbar-right"},m.createElement("div",{className:"hamburger",onClick:function(t){var n=m.createElement(hr,{title:"Menu"});e.onOpenWindow(n)}},"\u2630")))})),kr=(n(228),n(92)),Or=function(e){function t(){return Object(k.a)(this,t),Object(E.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props,t=e.itemsLoaded,n=e.itemsTotal;return m.createElement("div",null," ","Loading (".concat(Math.floor((t||0)/(n||0)*100),")%")," ")}}]),t}(m.Component);!function(e){e[e.image=0]="image",e[e.sound=1]="sound"}(dr||(dr={}));var Er=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(E.a)(this,Object(j.a)(t).call(this,e))).loadMedia=function(){n.setState({itemsLoaded:0});var e=n.props.manifest.map(function(e){return n.loadItem(e).catch(function(e){return console.error(e)})});Promise.all(e).then(function(e){n.props.onLoadComplete&&n.props.onLoadComplete(jr),n.setState({completed:!0})})},n.loadItem=function(){var e=Object(i.a)(s.a.mark(function e(t){var r,a,o,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(jr.some(function(e){return e.url===t})&&console.warn("Loading media with url ".concat(t," more than once! Will overwrite.")),(r=Ir(t))!==dr.image){e.next=7;break}return e.next=5,Tr(t);case 5:o=e.sent,a={content:o,mediaType:r,url:t};case 7:if(r===dr.sound&&(c=new kr.Howl({src:[t]}),a={content:c,mediaType:r,url:t}),!a){e.next=14;break}return jr.push(a),n.setState({itemsLoaded:n.state.itemsLoaded+1}),e.abrupt("return",a);case 14:throw new Error("Unknown error while trying to load ".concat(t));case 15:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.state={completed:!1,itemsLoaded:0},n}return Object(I.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){this.loadMedia()}},{key:"componentDidUpdate",value:function(e){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.manifest,r=this.state.completed,a=m.createElement(Or,{itemsLoaded:this.state.itemsLoaded,itemsTotal:n.length});return r?t:a}}]),t}(m.Component),jr=[],Tr=function(e){var t=new Image;return t.src=e,new Promise(function(e,n){function r(){t.naturalWidth?e(t):n(null),t.removeEventListener("load",r),t.removeEventListener("error",r)}t.naturalWidth?e(t):t.complete?n(null):(t.addEventListener("load",r),t.addEventListener("error",r))})},Ir=function(e){if((e=e.toLowerCase()).endsWith("png")||e.endsWith("jpg")||e.endsWith("gif"))return dr.image;if(e.endsWith("mp3")||e.endsWith("ogg")||e.endsWith("wav"))return dr.sound;throw Error("Could not determine type for ".concat(e))};var Cr,Nr,xr=Object(g.b)(function(e,t){return{store:e}},function(e,t){return{handleStartConstruction:function(t){e(function(e){return{type:Kt.startBuildingStructure,structure:e}}(t));var n=[Zt(t)],r=de[t].cost.time,a=nn(rn.buildStructure,"".concat(t,".build"),"town",r,n);e(a)}}})(function(e){var t=e.info;switch(t.itemType){case B.deed:var n=e.store.gold,r=t,a=de[r.structure],o=a.cost.gold||0<=n,c=!(e.store.structures[r.structure].state===vt.NotBuilt)||!o;return m.createElement("div",null,m.createElement("p",null,' " ',t.subText,' " '),m.createElement("button",{disabled:c,onClick:function(){return e.handleStartConstruction(r.structure)}},"Start construction (",a.cost.gold," gold)"));default:return m.createElement("p",null,' " ',t.subText,' " ')}}),Sr=(n(229),function(e){function t(){return Object(k.a)(this,t),Object(E.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e,t=this.props.info,n=this.props.type;switch(t||(t={iconImg:"/img/items/deeds/deed.png",item:L.deedForWeaponsmith,itemType:B.weapon,subText:"It allows for the construction of a weaponsmith"}),n){case _e.item:default:e=m.createElement(xr,{info:t})}var r=He.getItemName(t.item);return m.createElement("div",{className:"contextbox"},m.createElement("div",null,r," "),e)}},{key:"componentDidUpdate",value:function(){}}]),t}(m.Component)),qr=(Cr=Sr,function(e){var t=m.useRef(null),n=m.useState(e.placement||or.bottom),r=Object(pt.a)(n,2),a=r[0],o=r[1],c=e.containerRect,s=e.referenceRect;m.useEffect(function(){var e=t.current,n=e.getBoundingClientRect();switch(a){case or.top:if(n.top-n.height-8-8<c.top)return void o(or.bottom);case or.bottom:if(n.top+n.height+8+8>c.height)return void o(or.top)}if(e.style.opacity="1",n.left<c.left+8){var r=c.left-n.left+8;e.querySelector(".popup-content").style.transform="translateX(".concat(r,"px)")}if(n.right>c.right-8){var s=n.right-c.right+8;e.querySelector(".popup-content").style.transform="translateX(".concat(-s,"px)")}});var i=0,u=0,l="";switch(a){case or.bottom:i=s.left-c.left+s.width/2,u=s.top-c.top+s.height,l="popup-bottom";break;case or.top:i=s.left-c.left+s.width/2,u=s.top-c.top,l="popup-top"}return m.createElement("div",{className:"popup ".concat(l),style:{left:i,opacity:0,top:u},ref:t},m.createElement("div",{className:"popup-arrow"}),m.createElement("div",{className:"popup-content"},m.createElement(Cr,e)))});!function(e){e[e.Town=0]="Town",e[e.World=1]="World"}(Nr||(Nr={}));var Ar=860,Dr=648,Rr=m.createContext(null),Wr=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(E.a)(this,Object(j.a)(t).call(this,e))).containerRef=void 0,n.selectStructure=function(e){if(e){var t=He.getStructureName(e),r=m.createElement(Wn,{structure:e,title:t});n.handleWindowOpened(r)}},n.handleMediaLoadComplete=function(e){var t=e.filter(function(e){return e.mediaType===dr.sound});Nt.loadMedia(t),Nt.addSounds(Object(w.a)({},Et.buttonClick,"sound/fx/button-click.ogg")),n.setState({media:e})},n.handleContextualObjectActivated=function(e,t,r,a){n.setState({selectedContext:{contextInfo:t,contextType:e,contextRect:a}})},n.handleAppClick=function(){n.state.selectedContext&&n.setState({selectedContext:null})},n.handleWindowOpened=function(e){n.setState({activeWindows:[].concat(Object(y.a)(n.state.activeWindows),[e])})},n.handleWindowClose=function(){n.state.activeWindows.length&&n.setState({activeWindows:[]})},n.handleWindowBack=function(){n.state.activeWindows.length&&n.setState({activeWindows:n.state.activeWindows.slice(0,-1)})},n.state={selectedContext:null,containerRect:null,media:[],selectedStructure:null,activeWindows:[]},n.containerRef=m.createRef(),n.handleResize=n.handleResize.bind(Object(T.a)(n)),n}return Object(I.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=function(){Nt.playSound(Et.buttonClick)},n=null;if(this.state.selectedContext){var r=this.state.selectedContext,a=r.contextType,o=r.contextInfo,c=r.contextRect;n=m.createElement(qr,{type:a,info:o,containerRect:this.state.containerRect,referenceRect:c,placement:or.bottom})}var s=this.getActiveWindow();return m.createElement(Rr.Provider,{value:{media:this.state.media,onContextualObjectActivated:this.handleContextualObjectActivated,onOpenWindow:this.handleWindowOpened}},m.createElement("div",{className:"app",ref:this.containerRef,style:{width:Dr,height:Ar},onClick:this.handleAppClick},m.createElement(Ve.b,{backend:ur.a},m.createElement(lr.a,null,m.createElement(Er,{manifest:ir,onLoadComplete:this.handleMediaLoadComplete},m.createElement(wr,null),m.createElement(mr.a,{from:"/",to:"town"}),m.createElement(mr.b,{path:"/world",component:function(){return m.createElement(lr.b,{to:"/town"},m.createElement("button",{onClick:function(){return t()}}," ",He.get("common-view-button-town")," "))}}),m.createElement(mr.b,{path:"/town",component:function(){return m.createElement(lr.b,{to:"/world"},m.createElement("button",{onClick:function(){return t()}}," ",He.get("common-view-button-world")," "))}})," | ",m.createElement("button",{onClick:function(){return e.props.persistor.purge(),void window.location.reload()},style:{color:"red"}}," Restart! "),m.createElement(mr.b,{path:"/town",component:function(){return m.createElement(Wt,{onStructureClick:e.selectStructure})}}),m.createElement(mr.b,{path:"/world",component:function(){return m.createElement(cr,null)}}),m.createElement("div",{className:"app-right"},m.createElement(lt,null)),s,n,m.createElement(wt,null))))))}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize),this.handleResize()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"getActiveWindow",value:function(){if(!this.state.activeWindows.length)return null;var e=this.state.activeWindows[this.state.activeWindows.length-1],t={onClose:this.handleWindowClose,onBack:this.handleWindowBack,backEnabled:this.state.activeWindows.length>1,closeEnabled:!0};return m.cloneElement(e,t)}},{key:"handleResize",value:function(){if(this.containerRef.current){window.innerHeight<Ar?this.containerRef.current.style.transform="scale(".concat(window.innerHeight/Ar,") translateX(-50%)"):this.containerRef.current.style.transform="scale(1) translateX(-50%)";var e=this.containerRef.current.getBoundingClientRect();this.setState({containerRect:e,selectedContext:null})}}}]),t}(m.Component);var Mr=Object(g.b)(function(e,t){return{}},function(e,t){return{}})(Wr),Br=(n(230),function(e){var t=de[F.warehouse],n=e.structures[F.warehouse].level;return t.levels[n].maxResources}),Lr=function(e,t){var n=t.structures,r={},a=e/6e4,o=Br(t);return Object.keys(n).forEach(function(e){return function(e){var t=de[e];if(t.type===W.resource){var o=t,c=n[e].level,s=o.levels[c];Object.keys(s.generates).reduce(function(t,r){var o=s.generates[r]*n[e].workers*a;return t[r]=(t[r]||0)+o,t},r)}}(e)}),Object.keys(r).forEach(function(e){r[e]&&t.resources[e]+r[e]>=o[e]&&(r[e]=o[e]-t.resources[e])}),r},Qr=function(e,t){var n=[],r=[];return t.quests.forEach(function(t){if(t.status===Ye.active){var o=bn[t.name],c=t.progress,s=Math.floor(c);if(o.nodes[s].type===gn.nothing){for(var i=e/6e4*4,u=Math.min(c+i,o.nodes.length-1),l=Math.floor(u)-s,m=t.currentEncounter,d=1;d<=l;d++){var p=o.nodes[s+d];if(p.type===gn.encounter){var g=er[p.encounter],v=Yn[t.name];u=s+d,m=p.encounter,n.push(Object(M.a)({channel:a.quest,channelContext:t.name},g.getDescription(v)));break}p.type===gn.nothing&&(m=null,p.log&&n.push({channel:a.quest,channelContext:t.name,key:p.log}))}r.push({currentEncounter:m,name:t.name,progress:u})}}}),{log:n,quests:r}},Hr=function(){return Kn?(Kn=!1,Rn.state()):null},_r=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Fr(){if("serviceWorker"in navigator){if(new URL("/gilles-game",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/gilles-game","/service-worker.js");_r?(!function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Gr(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Gr(e)})}}function Gr(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var Ur,zr=function(){return{strength:100*Math.random(),perception:100*Math.random(),endurance:100*Math.random(),charisma:100*Math.random(),intelligenge:100*Math.random(),agility:100*Math.random(),luck:100*Math.random()}},Pr=[{id:"c4a5d270",equipment:{},stats:zr(),health:100*Math.random(),room:0,name:"Ximena Maddox",avatarImg:"/img/avatars/andy-victorovych-a1.jpg",inventory:[L.deedForLumbermill,null,L.crossbow,L.dagger,L.khopesh,null,L.sword,null,null,null,null,null,null,null,null,null]},{id:"2e655832",equipment:{},stats:zr(),name:"Donte Houston",health:100*Math.random(),room:1,avatarImg:"/img/avatars/andy-victorovych-a2.jpg",inventory:[L.crossbow,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]},{id:"ec6f1050",equipment:{},stats:zr(),name:"Zackary Morris",health:100*Math.random(),room:2,avatarImg:"/img/avatars/andy-victorovych-a3.jpg",inventory:[L.greatswordOfGwai,null,null,null]},{id:"d299f98a",stats:zr(),equipment:{},name:"Mike Keith",health:100*Math.random(),room:4,avatarImg:"/img/avatars/andy-victorovych-a4.jpg",inventory:[null,null,null,null,L.khopesh,L.hornedHelmet]},{id:"96c686c3",equipment:{},stats:zr(),name:"Wayne Monroe",health:100*Math.random(),room:5,avatarImg:"/img/avatars/andy-victorovych-a5.jpg",inventory:[null,null,null]},{id:"250d1a9d",stats:zr(),equipment:{},name:"Mike Keith",health:100*Math.random(),room:9,avatarImg:"/img/avatars/andy-victorovych-a6.jpg",inventory:[null,null,null,null,null]},{id:"169384ef",equipment:{},stats:zr(),name:"Karlee Nolan",health:100*Math.random(),room:3,avatarImg:"/img/avatars/andy-victorovych-a7.jpg",inventory:[L.greatswordOfGwai,null,null,null]},{id:"f22d66cb",stats:zr(),equipment:{},name:"Gylbarde the Earnest",health:100*Math.random(),room:8,avatarImg:"/img/avatars/andy-victorovych-a8.jpg",inventory:[null,null,null,null,null]},{id:"36c686c1",equipment:{},stats:zr(),name:"Lanslet of the Water",health:100*Math.random(),room:6,avatarImg:"/img/avatars/andy-victorovych-a9.jpg",inventory:[L.greatswordOfGwai,null,null,null]},{id:"12c613d4",equipment:{},stats:zr(),name:"Tedric the Bold",health:100*Math.random(),room:7,avatarImg:"/img/avatars/andy-victorovych-a10.jpg",inventory:[L.greatswordOfGwai,null,null,null]}],Vr={lastTick:Date.now()},Kr=[null,null,null,L.dagger,L.deedForWeaponsmith],Xr=function(e,t){if(!t.log.length)return e;var n=t.log.map(function(e){return Object(M.a)({},e,{time:Date.now()})});return[].concat(Object(y.a)(n),Object(y.a)(e))},Yr=[{name:"kill10Boars",status:Ye.active,party:["c4a5d270","2e655832","ec6f1050","d299f98a"],progress:0,questVars:{},encounterResults:[],icon:"sigil1.png",currentEncounter:null},{name:"retrieveMagicAmulet",party:[],status:Ye.available,progress:0,questVars:{},encounterResults:[],icon:"sigil2.png",currentEncounter:null,reward:{gold:4,items:[L.deedForWeaponsmith]}}],Jr=function(e,t){var n=t.assignedAventurers.filter(function(e){return!!e}).map(function(e){return e.id});return e.map(function(e){return e.name===t.questName?Object(M.a)({},e,{status:Ye.active,party:n}):e})},Zr=function(e,t){return e.map(function(e){if(e.name===t.questName){var n=e.progress+1;bn[e.name].nodes[Math.floor(n)];return Object(M.a)({},e,{progress:n})}return e})},$r=function(e,t){return e.map(function(e){return e.name===t.questName?Object(M.a)({},e,{currentEncounter:t.encounter}):e})},ea=function(e,t){var n=t.quests;return n.length?e.map(function(e){var t=n.find(function(t){return t.name===e.name});if(t){var r=t.progress,a=t.currentEncounter;return Object(M.a)({},e,{progress:r,currentEncounter:a})}return e}):e},ta=function(e,t){return e.map(function(e){if(e.name===t.questName){var n=Object.assign({},e.questVars,t.vars);return Object(M.a)({},e,{questVars:n})}return e})},na=function(e,t){return e.map(function(e){if(e.name===t.questName){var n=e.encounterResults.concat();return n[t.nodeIndex]=t.result,Object(M.a)({},e,{encounterResults:n})}return e})},ra={fabric:0,food:0,iron:60,leather:0,stone:0,wood:40},aa=(Ur={},Object(w.a)(Ur,F.alchemist,{level:0,workers:1,state:vt.NotBuilt}),Object(w.a)(Ur,F.armoursmith,{level:0,workers:0,state:vt.NotBuilt}),Object(w.a)(Ur,F.garden,{level:0,workers:0,state:vt.Built}),Object(w.a)(Ur,F.lumberMill,{level:0,workers:0,state:vt.NotBuilt}),Object(w.a)(Ur,F.mine,{level:0,workers:0,state:vt.NotBuilt}),Object(w.a)(Ur,F.quarry,{level:0,workers:0,state:vt.NotBuilt}),Object(w.a)(Ur,F.tavern,{level:0,workers:0,state:vt.Built}),Object(w.a)(Ur,F.tannery,{level:0,workers:0,state:vt.NotBuilt}),Object(w.a)(Ur,F.warehouse,{level:0,workers:0,state:vt.Built}),Object(w.a)(Ur,F.weaponsmith,{level:0,workers:0,state:vt.Built}),Object(w.a)(Ur,F.weaver,{level:0,workers:0,state:vt.NotBuilt}),Object(w.a)(Ur,F.workshop,{level:0,workers:0,state:vt.NotBuilt}),Ur),oa=function(e,t,n){var r=Object(M.a)({},e[t],{state:n});return Object(M.a)({},e,Object(w.a)({},t,r))},ca={completed:[],running:[]},sa=function(e){return{name:e.name,origin:e.origin,type:e.taskType,callbacks:e.callbacks,timeRemaining:e.time,startTime:Date.now(),lastTick:Date.now(),progress:0}},ia=Object(At.b)({adventurers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.moveItemInInventory:var n=t,r=n.adventurerId,a=n.fromSlot,o=n.toSlot,c=e.find(function(e){return e.id===r}),s=c.inventory.map(function(e,t){return t===a?c.inventory[o]:t===o?c.inventory[a]:e});return e.map(function(e){return e===c?Object(M.a)({},e,{inventory:s}):e});case f.moveItemToOtherAdventurer:var i=t,u=i.adventurerId,l=i.fromSlot,m=i.toAdventurerId,d=e.find(function(e){return e.id===u}).inventory[l];return e.map(function(e){if(e.id===u){var t=e.inventory.concat();return t[l]=null,Object(M.a)({},e,{inventory:t})}if(e.id===m){var n=e.inventory.concat(),r=n.findIndex(function(e){return null===e});return n[r]=d,Object(M.a)({},e,{inventory:n})}return e});case f.addItemToInventory:var p=t.item;return e.map(function(e){if(e.id===t.adventurerId){var n=e.inventory.concat(),r=t.toSlot;return null===r&&(r=n.findIndex(function(e){return null===e||void 0===e})),n[r]=p,Object(M.a)({},e,{inventory:n})}return e});case f.removeItemFromInventory:var g=t.fromSlot;return e.map(function(e){if(e.id===t.adventurerId){var n=e.inventory.map(function(e,t){return t!==g?e:null});return Object(M.a)({},e,{inventory:n})}return e});case f.assignEquipment:var v=t,h=v.equipmentType,b=v.item;return e.map(function(e){return e.id===t.adventurerId?Object(M.a)({},e,{equipment:Object(w.a)({},ge[h],b)}):e})}return e},engine:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vr;switch((arguments.length>1?arguments[1]:void 0).type){case r.gameTick:return Object(M.a)({},e,{lastTick:Date.now()})}return e},gold:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Dt.addGold:return e+t.amount;case Kt.startBuildingStructure:return e-(de[t.structure].cost.gold||0)}return e},items:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.addItem:var n=t.item,r=t.toSlot;return void 0===r&&-1===(r=e.findIndex(function(e){return null===e}))?[].concat(Object(y.a)(e),[n]):e.map(function(e,t){return t===r?n:e});case h.moveItemInWarehouse:var a=t,o=a.fromSlot,c=a.toSlot;return e.map(function(t,n){return n===o?null:n===c?e[o]:t});case h.removeItem:var s=t.fromSlot;return e.map(function(e,t){return t!==s?e:null})}return e},log:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.addLogEntry:var n=t,a=n.key;return[{channel:n.channel,channelContext:n.channelContext,context:n.context,key:a,time:Date.now()}].concat(Object(y.a)(e));case r.gameTick:return Xr(e,t)}return e},quests:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case sn.launchQuest:return Jr(e,t);case sn.advanceQuest:return Zr(e,t);case sn.updateQuestVars:return ta(e,t);case sn.updateEncounterResult:return na(e,t);case sn.startEncounter:return $r(e,t);case r.gameTick:return ea(e,t)}return e},resources:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ra,t=arguments.length>1?arguments[1]:void 0,n=function(t){return Object.keys(e).reduce(function(n,r){return n[r]=e[r]+(t[r]||0),n},{})};switch(t.type){case Rt.addResources:return n(t.resources);case Rt.removeResources:var a=t.resources;return Object.keys(e).reduce(function(t,n){return t[n]=e[n]-(a[n]||0),t},{});case r.gameTick:return n(t.resources)}return e},rngState:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===r.gameTick&&null!=t.rngState&&(e=Object.assign({},t.rngState)),e},structures:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Kt.startBuildingStructure:return oa(e,t.structure,vt.Building);case Kt.finishBuildingStructure:return oa(e,t.structure,vt.Built);case Kt.upgradeStructure:var n=e[t.structure].level+1,r=Object(M.a)({},e[t.structure],{level:n});return Object(M.a)({},e,Object(w.a)({},t.structure,r));case Kt.increaseWorkers:var a=t.workers,o=e[t.structure].workers+a,c=Object(M.a)({},e[t.structure],{workers:o});return Object(M.a)({},e,Object(w.a)({},t.structure,c));case Kt.decreaseWorkers:var s=t.workers,i=e[t.structure].workers-s,u=Object(M.a)({},e[t.structure],{workers:i});return Object(M.a)({},e,Object(w.a)({},t.structure,u));case Kt.setStructureState:var l=t.state;return oa(e,t.structure,l)}return e},tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ca,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Xt.start:var n=sa(t),a=e.running.concat(n);return Object(M.a)({},e,{running:a});case r.gameTick:var o=Date.now(),c=[],s=[];return e.running.forEach(function(e){var t=o+e.timeRemaining,n=(o-e.startTime)/(t-e.startTime),r=e.timeRemaining-(o-e.lastTick),a=Object(M.a)({},e,{progress:n,lastTick:o,timeRemaining:r});r<0?s.push(a):c.push(a)}),{running:c,completed:s}}return e},workers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:13,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case sr.addWorkers:return e+t.value}return e}}),ua=n(63),la=n(93),ma={key:"root",storage:n.n(la).a,version:b},da=Object(ua.a)(ma,ia),pa=Object(i.a)(s.a.mark(function e(){var t,n=arguments;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.abrupt("return",new Promise(function(e,n){var r=Object(At.d)(da,t,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),a=Object(ua.b)(r,void 0,function(){var t=Un(r.getState());e({store:r,persistor:a,isHydrated:t})})}));case 2:case"end":return e.stop()}},e)})),ga=function(){var e=Object(i.a)(s.a.mark(function e(){var t,n,r,a,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("lang/en-US.json");case 2:return t=e.sent,n=t.data,He.init(n),c="GILLESROX2",Kn=!0,Rn=Pn()(c,{state:!0}),e.next=8,pa();case 8:r=e.sent,a=r.store,o=r.persistor,r.isHydrated?fa(a):va(a),ha(a,o);case 14:case"end":return e.stop()}var c},e)}));return function(){return e.apply(this,arguments)}}(),va=function(e){e.dispatch(v("test-game-welcome")),console.log("Starting new GILLES-IDLE-GAME (version ".concat("0.0.4",")"))},fa=function(e){console.log("Continuing existing GILLES-IDLE-GAME (version ".concat("0.0.4",")"))},ha=function(e,t){p.render(m.createElement(g.a,{store:e},m.createElement(Mr,{persistor:t})),document.getElementById("root")),Fr();var n=function(t){t.completed.forEach(function(t){return function(t){t.callbacks.forEach(function(t){return e.dispatch(t)})}(t)})};setInterval(function(){var t=e.getState(),a=Date.now()-t.engine.lastTick,o=Lr(a,t),c=Hr(),s=Qr(a,t),i=s.quests,u=s.log;e.dispatch(function(e,t,n,a,o){return{type:r.gameTick,delta:e,rngState:t,resources:n,quests:a,log:o}}(a,c,o,i,u)),n(t.tasks)},2500)};ga()},44:function(e,t,n){},58:function(e,t,n){},75:function(e,t,n){},86:function(e,t,n){},95:function(e,t,n){e.exports=n(233)}},[[95,1,2]]]);
//# sourceMappingURL=main.5f447ab5.chunk.js.map