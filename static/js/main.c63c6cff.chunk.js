(this["webpackJsonpgilles-game"]=this["webpackJsonpgilles-game"]||[]).push([[0],[,function(e,t,n){"use strict";var a,r;n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r})),function(e){e[e.deed=0]="deed",e[e.apparel=1]="apparel",e[e.material=2]="material",e[e.questItem=3]="questItem",e[e.trinket=4]="trinket",e[e.weapon=5]="weapon"}(a||(a={})),function(e){e.deedForLumbermill="deedForLumbermill",e.deedForWeaponsmith="deedForWeaponsmith",e.boots1="boots1",e.boots2="boots2",e.boots3="boots3",e.chainmailHood="chainmailHood",e.chest="chest",e.clothGloves="clothGloves",e.cowl="cowl",e.fedora="fedora",e.druidChest="druidChest",e.druidFeet="druidFeet",e.druidHands="druidHands",e.druidHead="druidHead",e.druidLegs="druidLegs",e.greaves1="greaves1",e.greaves2="greaves2",e.hornedHelmet="hornedHelmet",e.leatherGloves="leatherGloves",e.nomadHelmet="nomadHelmet",e.pants1="pants1",e.pants2="pants2",e.plateChest1="plateChest1",e.plateChest2="plateChest2",e.plateChest3="plateChest3",e.plateChest4="plateChest4",e.plateGloves1="plateGloves1",e.plateGloves2="plateGloves2",e.plateHelmet="plateHelmet",e.platePants="platePants",e.plateShoulders1="plateShoulders1",e.plateShoulders2="plateShoulders2",e.robe="robe",e.shoulders1="shoulders1",e.shoulders2="shoulders2",e.shoulders3="shoulders3",e.vest="vest",e.arrowheads="arrowheads",e.bolts="bolts",e.buckle="buckle",e.chain="chain",e.cogs="cogs",e.gem="gem",e.gunpowder="gunpowder",e.ingot="ingot",e.nails="nails",e.poisonVial="poisonVial",e.ribbon="ribbon",e.rope="rope",e.scales="scales",e.spring="spring",e.thread="thread",e.blueprints="blueprints",e.crate="crate",e.dragonEye="dragonEye",e.dynamite="dynamite",e.eye="eye",e.feather="feather",e.food="food",e.heart="heart",e.horn="horn",e.key="key",e.letters="letters",e.lockPicks="lockPicks",e.oil="oil",e.orcFinger="orcFinger",e.plans="plans",e.purpleGems="purpleGems",e.runestone="runestone",e.sandwich="sandwich",e.teeth="teeth",e.tooth="tooth",e.torch="torch",e.tusk="tusk",e.vase="vase",e.vial="vial",e.weeds="weeds",e.ring="ring",e.magicAmulet="magicAmulet",e.aegisOfValor="aegisOfValor",e.arbalest="arbalest",e.battleAxe="battleAxe",e.berserkerShield="berserkerShield",e.brassKnuckles="brassKnuckles",e.buckler="buckler",e.cleaver="cleaver",e.club="club",e.dagger="dagger",e.flail="flail",e.goldenShield="goldenShield",e.greatswordOfGwai="greatswordOfGwai",e.indomitableCarapace="indomitableCarapace",e.javelin="javelin",e.khopesh="khopesh",e.longbow="longbow",e.mace="mace",e.morningStar="morningStar",e.paintedBuckler="paintedBuckler",e.poisonedDagger="poisonedDagger",e.ravenStaff="ravenStaff",e.savageStaff="savageStaff",e.simpleCrossbow="simpleCrossbow",e.spear="spear",e.steelShield="steelShield",e.sword="sword",e.warhammer="warhammer",e.woodenBulwark="woodenBulwark"}(r||(r={}))},,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(22),r=n(24),c=n(48),o=n(44),i=n(1),s=n(72),u=n(43),l=n(13),d=n(29),m=function(){function e(){Object(a.a)(this,e)}return Object(r.a)(e,null,[{key:"init",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.texts=e,this.templates={},t&&this.compileAll(),this.initialized=!0}},{key:"get",value:function(e,t){var n=this.getDefault(e,t);return null===n?(console.error("Key '".concat(e,"' not found in TextManager")),"<<'".concat(e,"' missing>>")):n}},{key:"getDefault",value:function(e,t){if(!this.initialized)throw new Error("Error ".concat(this," not initialized!"));var n=this.getTemplate(e);return n?n(t):null}},{key:"getTextEntry",value:function(e){return this.get(e.key,e.context)}},{key:"getTemplate",value:function(e){var t=this.templates[e];return!t&&this.texts[e]&&(this.compile(e,this.texts[e]),t=this.templates[e]),t}},{key:"getEquipmentSlot",value:function(e){return this.get("ui-equipmentslot-".concat(Object(c.a)(l.a[e])))}},{key:"getQuestTitle",value:function(e){return this.get("quest-".concat(Object(c.a)(e),"-title"))}},{key:"getQuestDescription",value:function(e){return this.get("quest-".concat(Object(c.a)(e),"-description"))}},{key:"getResourceName",value:function(e){return this.get("resource-".concat(e,"-name"))}},{key:"getItemName",value:function(e){var t=i.b[Object(o.b)(e).itemType];return this.get("item-".concat(Object(c.a)(t),"-").concat(Object(c.a)(e),"-name"))}},{key:"getItemSubtext",value:function(e){var t=i.b[Object(o.b)(e).itemType];return this.getDefault("item-".concat(Object(c.a)(t),"-").concat(Object(c.a)(e),"-subtext"))}},{key:"getStructureName",value:function(e){return this.get("structure-".concat(Object(c.a)(e),"-name"))}},{key:"getTraitName",value:function(e){return this.get("trait-".concat(Object(c.a)(e),"-name"))}},{key:"getTraitDescription",value:function(e){return this.get("trait-".concat(Object(c.a)(e),"-description"))}},{key:"getTraitEffect",value:function(e){return this.get("trait-".concat(Object(c.a)(e),"-effect"))}},{key:"getToastType",value:function(e){return this.get("ui-toast-type-".concat(Object(c.a)(u.a[e])))}},{key:"getWeaponType",value:function(e){return this.get("ui-weapon-type-".concat(Object(c.a)(d.c[e])))}},{key:"getSkillName",value:function(e){return this.get("skill-".concat(Object(c.a)(d.c[e]),"-name"))}},{key:"getSkillInfo",value:function(e){return this.get("skill-".concat(Object(c.a)(d.c[e]),"-info"))}},{key:"getWeaponClassification",value:function(e){return this.get("ui-weapon-class-".concat(Object(c.a)(d.b[e])))}},{key:"compileAll",value:function(){var e=this;Object.keys(this.texts).forEach((function(t){e.compile(t,e.texts[t])}))}},{key:"compile",value:function(e,t){var n=s.compile(t);this.templates[e]=n}}]),e}();m.initialized=!1,m.texts=void 0,m.templates=void 0,s.registerHelper("item:name",(function(e,t){if(!o.a[e])return new s.SafeString("<<ITEM DEFINITION NOT FOUND: ".concat(e,">>"));switch(t){case"aA":return p(e);case"aD":case"aU":return h(e);default:return new s.SafeString(e)}})),s.registerHelper("structure:name",(function(e){var t=m.get("structure-".concat(e,"-name"));return new s.SafeString(t)})),s.registerHelper("resource:name",(function(e){var t=m.get("resource-".concat(e,"-name"));return new s.SafeString(t)}));var p=function(e){return b(e)},b=function(e){var t=m.getItemName(e),n=m.getTemplate("common-article-undefined");return new s.SafeString("".concat(n({noun:t})))},h=function(e){var t=m.getItemName(e),n=m.getTemplate("common-article-defined");return new s.SafeString("".concat(n({noun:t})))}},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"e",(function(){return c})),n.d(t,"g",(function(){return o})),n.d(t,"f",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"h",(function(){return p}));var a=n(7),r=5e3,c=6e4,o=12e4,i=18e4,s=24e4,u=30*c,l=60*c,d=24*l,m=265.25*d,p=function(e,t){var n=[{unit:t?"y":"year",amount:m},{unit:t?"d":"day",amount:d},{unit:t?"h":"hour",amount:l},{unit:t?"m":"minute",amount:c},{unit:t?"s":"second",amount:1e3}],r=Math.abs(e),o=[];return n.forEach((function(e){var n=Math.floor(r/e.amount);if(r-=n*e.amount,0!==n){var c=a.a.get("common-time-".concat(e.unit).concat(n>1&&!t?"-plural":""));o.push("".concat(n).concat(c))}})),o.join(" ")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return w}));var a,r=n(10),c=n(32),o={type:c.a.production,cost:{gold:40,time:4e3},levels:[{displayName:"structure-alchemist-name",workerCapacity:2,cost:{gold:0},unlocks:[]},{displayName:"structure-alchemist-name",workerCapacity:5,cost:{gold:30,time:r.e},unlocks:[]},{displayName:"structure-alchemist-name",workerCapacity:10,cost:{gold:50,time:r.g},unlocks:[]}]},i=n(1),s={cost:{gold:40,time:4e3},type:c.a.production,levels:[{displayName:"structure-armoursmith-name",workerCapacity:2,cost:{gold:0},unlocks:[i.a.boots1]},{displayName:"structure-armoursmith-name",workerCapacity:5,cost:{gold:30,time:r.e},unlocks:[i.a.chest]},{displayName:"structure-armoursmith-name",workerCapacity:10,cost:{gold:50,time:r.g},unlocks:[i.a.cowl]}]},u={type:c.a.resource,cost:{gold:40,time:4e3},levels:[{displayName:"structure-garden-name",workerCapacity:2,cost:{gold:0},generates:{food:2}},{displayName:"structure-garden-name",workerCapacity:5,cost:{gold:30,time:r.e},generates:{food:2}},{displayName:"structure-garden-name",workerCapacity:10,cost:{gold:50,time:r.g},generates:{food:2}}]},l={type:c.a.resource,cost:{gold:31,time:r.c},levels:[{displayName:"structure-lumber-mill-name",workerCapacity:2,cost:{gold:0},generates:{wood:2}},{displayName:"structure-lumber-mill-name",workerCapacity:5,cost:{gold:30,time:r.e},generates:{wood:2}},{displayName:"structure-lumber-mill-name",workerCapacity:10,cost:{gold:50,time:r.g},generates:{wood:2}}]},d={cost:{gold:40,time:4e3},type:c.a.resource,levels:[{displayName:"structure-mine-name",workerCapacity:2,cost:{gold:0},generates:{iron:2}},{displayName:"structure-mine-name",workerCapacity:5,cost:{gold:30,time:r.e},generates:{iron:2}},{displayName:"structure-mine-name",workerCapacity:10,cost:{gold:50,time:r.g},generates:{iron:2}}]},m={cost:{gold:40,time:4e3},type:c.a.resource,levels:[{displayName:"structure-quarry-name",workerCapacity:2,cost:{gold:0},generates:{stone:2}},{displayName:"structure-quarry-name",workerCapacity:5,cost:{gold:30,time:r.e},generates:{stone:4}},{displayName:"structure-quarry-name",workerCapacity:10,cost:{gold:50,time:r.g},generates:{stone:6}}]},p={cost:{gold:40,time:4e3},type:c.a.resource,levels:[{displayName:"structure-tannery-name",workerCapacity:2,cost:{gold:0},generates:{leather:2}},{displayName:"structure-tannery-name",workerCapacity:5,cost:{gold:30,time:r.e},generates:{leather:5}},{displayName:"structure-tannery-name",workerCapacity:10,cost:{gold:50,time:r.g},generates:{leather:7}}]},b={cost:{gold:40,time:4e3},type:c.a.tavern,levels:[{displayName:"structure-tavern-name",workerCapacity:2,cost:{gold:0},rooms:10},{displayName:"structure-tavern-name",workerCapacity:5,cost:{gold:30,time:r.e},rooms:12},{displayName:"structure-tavern-name",workerCapacity:10,cost:{gold:50,time:r.g},rooms:15}]},h={cost:{gold:40,time:4e3},type:c.a.warehouse,levels:[{displayName:"structure-warehouse-name",workerCapacity:2,cost:{gold:0},maxResources:{fabric:200,food:200,iron:200,leather:200,stone:200,wood:200},maxStockpile:16},{displayName:"structure-warehouse-name",workerCapacity:5,cost:{gold:13,time:r.b},maxResources:{fabric:500,food:500,iron:500,leather:500,stone:500,wood:500},maxStockpile:32},{displayName:"structure-warehouse-name",workerCapacity:10,cost:{gold:50,time:5*r.g},maxResources:{fabric:1e3,food:1e3,iron:1e3,leather:1e3,stone:1e3,wood:1e3},maxStockpile:48}]},f={type:c.a.production,cost:{gold:40,time:4e3},levels:[{displayName:"structure-weaponsmith-name",workerCapacity:2,cost:{gold:0},unlocks:[]},{displayName:"structure-weaponsmith-name",workerCapacity:5,cost:{gold:30,time:r.e},unlocks:[]},{displayName:"structure-weaponsmith-name",workerCapacity:10,cost:{gold:50,time:r.g},unlocks:[]},{displayName:"structure-weaponsmith-name",workerCapacity:14,cost:{gold:50,time:r.f},unlocks:[i.a.poisonedDagger]}]},j={cost:{gold:40,time:4e3},type:c.a.resource,levels:[{displayName:"structure-weaver-name",workerCapacity:2,cost:{gold:0},generates:{fabric:2}},{displayName:"structure-weaver-name",workerCapacity:5,cost:{gold:30,time:r.e},generates:{fabric:5}},{displayName:"structure-weaver-name",workerCapacity:10,cost:{gold:50,time:r.f},generates:{fabric:7}}]},v={type:c.a.production,cost:{gold:40,time:4e3},levels:[{displayName:"structure-workshop-name",workerCapacity:2,cost:{gold:0},unlocks:[]},{displayName:"structure-workshop-name",workerCapacity:5,cost:{gold:30,time:r.e},unlocks:[]},{displayName:"structure-workshop-name",workerCapacity:10,cost:{gold:50,time:r.g},unlocks:[]},{displayName:"structure-workshop-name",workerCapacity:14,cost:{gold:50,time:r.f},unlocks:[]}]},g=n(26);!function(e){e.alchemist="alchemist",e.armoursmith="armoursmith",e.garden="garden",e.lumberMill="lumberMill",e.mine="mine",e.quarry="quarry",e.tavern="tavern",e.tannery="tannery",e.warehouse="warehouse",e.weaponsmith="weaponsmith",e.weaver="weaver",e.workshop="workshop"}(a||(a={}));var O={alchemist:o,armoursmith:s,garden:u,lumberMill:l,mine:d,quarry:m,tavern:b,tannery:p,warehouse:h,weaponsmith:f,weaver:j,workshop:v};function y(e){return O[e]}function w(e){switch(e){case g.a.fabric:return a.weaver;case g.a.food:return a.garden;case g.a.iron:return a.mine;case g.a.leather:return a.tannery;case g.a.stone:return a.quarry;case g.a.wood:return a.lumberMill}}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return d}));var a,r=n(0),c=(n(2),n(492)),o=n(33),i=n(44),s=n(1),u=n(29),l=(n(270),{drop:function(e,t){e.onDrop(t.getItem())},canDrop:function(e,t){var n=t.getItem().item;return d(n,e.type)}});!function(e){e[e.feet=0]="feet",e[e.hands=1]="hands",e[e.chest=2]="chest",e[e.legs=3]="legs",e[e.head=4]="head",e[e.shoulders=5]="shoulders",e[e.mainHand=6]="mainHand",e[e.offHand=7]="offHand"}(a||(a={}));var d=function(e,t){switch(t){case a.chest:case a.feet:case a.hands:case a.head:case a.legs:return m(e,t);case a.mainHand:case a.offHand:var n=Object(i.b)(e);if(n.itemType!==s.b.weapon)return!1;switch(u.e[n.weaponType]){case u.b.oneHanded:return!0;case u.b.mainHand:return t===a.mainHand;case u.b.offHand:case u.b.shield:return t===a.offHand}return!0;default:return!1}};t.b=Object(c.a)(o.b.ITEM,l,(function(e,t){return{canDrop:t.canDrop(),connectDropTarget:e.dropTarget(),isOver:t.isOver()}}))((function(e){var t=e.isOver,n=e.canDrop,c="grey";return t&&n?c="green":n&&(c="orange"),(0,e.connectDropTarget)(Object(r.jsx)("div",{className:"equipment-slot",style:{borderColor:c},title:a[e.type],children:e.children}))}));var m=function(e,t){var n=Object(i.b)(e);return n.itemType===s.b.apparel&&n.equipmentType===t}},,,,,,function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e[e.nothing=0]="nothing",e[e.encounter=1]="encounter"}(a||(a={}))},,function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e[e.common=0]="common",e[e.uncommon=1]="uncommon",e[e.rare=2]="rare",e[e.epic=3]="epic",e[e.legendary=4]="legendary"}(a||(a={}))},,function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return g}));var a,r,c,o=n(17),i=n(34),s=n.n(i),u=n(47),l=n(22),d=n(24),m=n(79),p=n.n(m);!function(e){e[e.town=0]="town",e[e.world=1]="world"}(a||(a={})),function(e){e[e.buttonClick=0]="buttonClick",e[e.error=1]="error",e[e.toast=2]="toast"}(r||(r={}));var b={},h=null,f={},j="musicVolume",v="soundVolume",g=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,null,[{key:"init",value:function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.getItem(j);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=0;case 5:return this._musicVolume=e.t0,e.next=8,p.a.getItem(v);case 8:if(e.t1=e.sent,e.t1){e.next=11;break}e.t1=1;case 11:this._soundVolume=e.t1,this._initialized=!0;case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadMedia",value:function(e){c=e}},{key:"addSounds",value:function(e){Object.entries(e).forEach((function(e){var t=Object(o.a)(e,2),n=t[0],a=t[1];f[n]=c.find((function(e){return e.url===a})).content}))}},{key:"playSound",value:function(e){var t=f[e];t.volume(this.soundVolume),t.play()}},{key:"addMusicTrack",value:function(){var e=Object(u.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=2;break}return e.abrupt("return");case 2:if(this._initialized){e.next=5;break}return e.next=5,this.init();case 5:if(a=c.find((function(e){return e.url===n}))){e.next=8;break}throw new Error("No sound found at ".concat(n));case 8:b.hasOwnProperty(t)||(b[t]=a.content);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"playMusicTrack",value:function(){var t=Object(u.a)(s.a.mark((function t(n){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c){t.next=2;break}return t.abrupt("return");case 2:if(this._initialized){t.next=5;break}return t.next=5,this.init();case 5:null!==h&&b[h].fade(e.musicVolume,0,500),(a=b[n]).playing()||(a.loop(!0),a.play()),a.fade(0,e.musicVolume,500),h=n;case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"soundVolume",set:function(e){this._soundVolume=e,p.a.setItem(v,e)},get:function(){return this._soundVolume}},{key:"musicVolume",set:function(e){h&&b[h].volume(e),this._musicVolume=e,p.a.setItem(j,e)},get:function(){return this._musicVolume}}]),e}();g._musicVolume=0,g._soundVolume=1,g._initialized=!1},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a,r,c=n(3);!function(e){e.wood="wood",e.iron="iron",e.stone="stone",e.leather="leather",e.fabric="fabric",e.food="food"}(r||(r={}));var o=(a={},Object(c.a)(a,r.wood,{resource:r.wood,iconImg:"/img/resources/wood.png"}),Object(c.a)(a,r.iron,{resource:r.iron,iconImg:"/img/resources/iron.png"}),Object(c.a)(a,r.stone,{resource:r.stone,iconImg:"/img/resources/stone.png"}),Object(c.a)(a,r.leather,{resource:r.leather,iconImg:"/img/resources/leather.png"}),Object(c.a)(a,r.fabric,{resource:r.fabric,iconImg:"/img/resources/fabric.png"}),Object(c.a)(a,r.food,{resource:r.food,iconImg:"/img/resources/food.png"}),a);t.b=o},function(e,t,n){"use strict";var a;function r(e,t){return{type:a.launchQuest,questName:e,assignedAventurers:t}}function c(e){return{type:a.exitEncounter,questName:e}}function o(e,t){return{type:a.updateQuestVars,questName:e,vars:t}}function i(e,t){return{type:a.setSceneName,questName:e,sceneName:t}}function s(e,t){return{type:a.setScene,questName:e,scene:t}}function u(e,t){return{type:a.enqueueSceneAction,questName:e,sceneAction:t}}function l(e){return{type:a.completeSceneAction,questName:e}}function d(e,t,n){return{type:a.deductActorAp,questName:e,actor:t,ap:n}}n.d(t,"a",(function(){return a})),n.d(t,"f",(function(){return r})),n.d(t,"e",(function(){return c})),n.d(t,"j",(function(){return o})),n.d(t,"i",(function(){return i})),n.d(t,"h",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"k",(function(){return m})),n.d(t,"g",(function(){return p})),function(e){e.launchQuest="launchQuest",e.updateQuestVars="updateQuestVars",e.updateEncounterResult="updateEncounterResult",e.startEncounter="startEncounter",e.setSceneName="setSceneName",e.setScene="setScene",e.exitEncounter="exitEncounter",e.updateQuests="updateQuests",e.enqueueSceneAction="enqueueSceneAction",e.completeSceneAction="completeSceneAction",e.deductActorAp="deductActorAp",e.updateSceneObjectAction="updateSceneObjectAction",e.setActiveSceneInteractionModal="setActiveSceneInteractionModal"}(a||(a={}));var m=function(e,t,n){return{type:a.updateSceneObjectAction,questName:e,id:t,object:n}};var p=function(e,t){return{type:a.setActiveSceneInteractionModal,questName:e,sceneInteractionModal:t}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a,r,c=n(8),o=n(68),i=n(0);n(2),n(292);!function(e){e.smallest="smallest",e.small="small",e.medium="medium",e.big="big",e.biggest="biggest"}(a||(a={})),function(e){e.none="none",e.gold="gold"}(r||(r={}));t.b=function(e){var t=e.image,n=e.size,l=e.children,d=e.className,m=void 0===d?"":d,p=e.border,b=void 0===p?"none":p,h=Object(o.a)(e,["image","size","children","className","border"]);return Object(i.jsxs)("div",Object(c.a)(Object(c.a)({className:"icon ".concat(s("string"===typeof n?a[n]:n)," ").concat(m)},h),{},{style:{backgroundImage:"url(".concat(".").concat(t,")")},children:[l,"none"!==b&&b&&Object(i.jsx)("div",{className:"border ".concat(u("string"===typeof b?r[b]:b)," ")})]}))};var s=function e(t){switch(t){case a.smallest:return"size-smallest";case a.small:return"size-small";case a.medium:return"size-medium";case a.big:return"size-big";case a.biggest:return"size-biggest"}return e(a.medium)},u=function(e){switch(e){case r.gold:return"border-gold";case r.none:default:return""}}},function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return o})),n.d(t,"e",(function(){return p})),n.d(t,"a",(function(){return m}));var a,r,c,o,i=n(3),s=n(1),u=n(21),l=s.b.weapon,d="/img/items/weapons/";!function(e){e.axe="axe",e.bow="bow",e.club="club",e.crossbow="crossbow",e.fist="fist",e.flail="flail",e.hammer="hammer",e.knife="knife",e.staff="staff",e.shield="shield",e.sword="sword",e.poleArm="poleArm"}(c||(c={})),function(e){e[e.oneHanded=0]="oneHanded",e[e.mainHand=1]="mainHand",e[e.offHand=2]="offHand",e[e.twoHanded=3]="twoHanded",e[e.shield=4]="shield"}(o||(o={}));var m,p=(a={},Object(i.a)(a,c.axe,o.oneHanded),Object(i.a)(a,c.bow,o.oneHanded),Object(i.a)(a,c.club,o.oneHanded),Object(i.a)(a,c.crossbow,o.mainHand),Object(i.a)(a,c.fist,o.oneHanded),Object(i.a)(a,c.flail,o.mainHand),Object(i.a)(a,c.hammer,o.oneHanded),Object(i.a)(a,c.knife,o.oneHanded),Object(i.a)(a,c.staff,o.twoHanded),Object(i.a)(a,c.sword,o.oneHanded),Object(i.a)(a,c.poleArm,o.twoHanded),Object(i.a)(a,c.shield,o.shield),a);!function(e){e.kinetic="kinetic"}(m||(m={}));var b=(r={},Object(i.a)(r,s.a.aegisOfValor,{item:s.a.aegisOfValor,itemType:l,weaponType:c.shield,rarity:u.a.legendary,iconImg:"".concat(d,"aegis-of-valor.png")}),Object(i.a)(r,s.a.arbalest,{item:s.a.arbalest,itemType:l,weaponType:c.crossbow,rarity:u.a.epic,iconImg:"".concat(d,"arbalest.png"),damage:Object(i.a)({},m.kinetic,40)}),Object(i.a)(r,s.a.battleAxe,{item:s.a.battleAxe,itemType:l,weaponType:c.axe,rarity:u.a.common,iconImg:"".concat(d,"battle_axe.png"),damage:Object(i.a)({},m.kinetic,20)}),Object(i.a)(r,s.a.berserkerShield,{item:s.a.berserkerShield,itemType:l,weaponType:c.shield,rarity:u.a.epic,iconImg:"".concat(d,"berserker-shield.png")}),Object(i.a)(r,s.a.brassKnuckles,{item:s.a.brassKnuckles,itemType:l,weaponType:c.fist,iconImg:"".concat(d,"brass_knuckles.png"),rarity:u.a.common,damage:Object(i.a)({},m.kinetic,10)}),Object(i.a)(r,s.a.buckler,{item:s.a.buckler,itemType:l,weaponType:c.shield,rarity:u.a.common,iconImg:"".concat(d,"buckler.png")}),Object(i.a)(r,s.a.cleaver,{item:s.a.cleaver,itemType:l,weaponType:c.knife,iconImg:"".concat(d,"cleaver.png"),rarity:u.a.common,damage:Object(i.a)({},m.kinetic,5)}),Object(i.a)(r,s.a.club,{item:s.a.club,itemType:l,weaponType:c.club,iconImg:"".concat(d,"club.png"),rarity:u.a.common,damage:Object(i.a)({},m.kinetic,8)}),Object(i.a)(r,s.a.dagger,{item:s.a.dagger,itemType:l,weaponType:c.knife,iconImg:"".concat(d,"dagger.png"),rarity:u.a.uncommon,damage:Object(i.a)({},m.kinetic,8)}),Object(i.a)(r,s.a.flail,{item:s.a.flail,itemType:l,weaponType:c.flail,iconImg:"".concat(d,"flail.png"),rarity:u.a.uncommon,damage:Object(i.a)({},m.kinetic,15)}),Object(i.a)(r,s.a.goldenShield,{item:s.a.goldenShield,itemType:l,weaponType:c.shield,rarity:u.a.rare,iconImg:"".concat(d,"golden-shield.png")}),Object(i.a)(r,s.a.greatswordOfGwai,{item:s.a.greatswordOfGwai,itemType:l,weaponType:c.sword,iconImg:"".concat(d,"greatsword-gwai.png"),unique:!0,rarity:u.a.legendary,damage:Object(i.a)({},m.kinetic,25)}),Object(i.a)(r,s.a.indomitableCarapace,{item:s.a.indomitableCarapace,itemType:l,weaponType:c.shield,rarity:u.a.epic,unique:!0,iconImg:"".concat(d,"indomitable-carapace.png")}),Object(i.a)(r,s.a.javelin,{item:s.a.javelin,itemType:l,weaponType:c.poleArm,iconImg:"".concat(d,"javelin.png"),rarity:u.a.epic,damage:Object(i.a)({},m.kinetic,25)}),Object(i.a)(r,s.a.khopesh,{item:s.a.khopesh,itemType:l,weaponType:c.sword,iconImg:"".concat(d,"khopesh.png"),rarity:u.a.epic,damage:Object(i.a)({},m.kinetic,15)}),Object(i.a)(r,s.a.longbow,{item:s.a.longbow,itemType:l,weaponType:c.bow,iconImg:"".concat(d,"longbow.png"),rarity:u.a.rare,damage:Object(i.a)({},m.kinetic,2)}),Object(i.a)(r,s.a.mace,{item:s.a.mace,itemType:l,weaponType:c.club,iconImg:"".concat(d,"mace.png"),rarity:u.a.rare,damage:Object(i.a)({},m.kinetic,15)}),Object(i.a)(r,s.a.morningStar,{item:s.a.morningStar,itemType:l,weaponType:c.club,iconImg:"".concat(d,"morning-star.png"),rarity:u.a.uncommon,damage:Object(i.a)({},m.kinetic,13)}),Object(i.a)(r,s.a.paintedBuckler,{item:s.a.paintedBuckler,itemType:l,weaponType:c.shield,iconImg:"".concat(d,"painted-buckler.png")}),Object(i.a)(r,s.a.poisonedDagger,{item:s.a.poisonedDagger,itemType:l,weaponType:c.knife,iconImg:"".concat(d,"poisoned-dagger.png"),rarity:u.a.epic,damage:Object(i.a)({},m.kinetic,12)}),Object(i.a)(r,s.a.ravenStaff,{item:s.a.ravenStaff,itemType:l,weaponType:c.staff,iconImg:"".concat(d,"raven-staff.png"),rarity:u.a.epic,damage:Object(i.a)({},m.kinetic,13)}),Object(i.a)(r,s.a.savageStaff,{item:s.a.savageStaff,itemType:l,weaponType:c.staff,iconImg:"".concat(d,"savage-staff.png"),rarity:u.a.epic,damage:Object(i.a)({},m.kinetic,8)}),Object(i.a)(r,s.a.simpleCrossbow,{item:s.a.simpleCrossbow,itemType:l,weaponType:c.crossbow,iconImg:"".concat(d,"crossbow.png"),rarity:u.a.common,damage:Object(i.a)({},m.kinetic,3)}),Object(i.a)(r,s.a.spear,{item:s.a.spear,itemType:l,weaponType:c.poleArm,iconImg:"".concat(d,"sword.png"),rarity:u.a.rare,damage:Object(i.a)({},m.kinetic,10)}),Object(i.a)(r,s.a.steelShield,{item:s.a.steelShield,itemType:l,weaponType:c.shield,rarity:u.a.rare,iconImg:"".concat(d,"steel-shield.png")}),Object(i.a)(r,s.a.sword,{item:s.a.sword,itemType:l,weaponType:c.sword,iconImg:"".concat(d,"sword.png"),rarity:u.a.uncommon,damage:Object(i.a)({},m.kinetic,14)}),Object(i.a)(r,s.a.warhammer,{item:s.a.warhammer,itemType:l,weaponType:c.hammer,iconImg:"".concat(d,"warhammer.png"),rarity:u.a.rare,damage:Object(i.a)({},m.kinetic,16)}),Object(i.a)(r,s.a.woodenBulwark,{item:s.a.woodenBulwark,itemType:l,weaponType:c.shield,rarity:u.a.common,iconImg:"".concat(d,"wooden-bulwark.png")}),r);t.d=b},,function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return o}));var a=function(){return"/world"},r=function(e){return"".concat(a(),"/").concat(e)},c=function(){return"/town"},o=function(e){return"".concat(c(),"/").concat(e)}},function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e[e.resource=0]="resource",e[e.production=1]="production",e[e.tavern=2]="tavern",e[e.warehouse=3]="warehouse"}(a||(a={}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var a,r={ADVENTURER:"adventurer",ITEM:"item"};!function(e){e[e.adventurerInventory=0]="adventurerInventory",e[e.warehouse=1]="warehouse",e[e.tavern=2]="tavern",e[e.adventurerEquipment=3]="adventurerEquipment",e[e.lootCache=4]="lootCache"}(a||(a={}))},,,,,,,,function(e,t,n){"use strict";var a;function r(e,t,n){return{type:a.moveItemInInventory,adventurerId:e,fromSlot:t,toSlot:n}}function c(e,t,n){return{type:a.addItemToInventory,adventurerId:e,item:t,toSlot:n}}function o(e,t){return{type:a.removeItemFromInventory,adventurerId:e,fromSlot:t}}function i(e,t,n){return{type:a.assignEquipment,adventurerId:e,item:n,equipmentSlot:t}}function s(e,t){return{type:a.removeEquipment,adventurerId:e,equipmentSlot:t}}n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"f",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"e",(function(){return s})),function(e){e.moveItemInInventory="moveItemInInventory",e.moveItemToOtherAdventurer="moveItemToOtherAdventurer",e.moveItemFromWarehouseToAdventurer="moveItemFromWarehouseToAdventurer",e.addItemToInventory="addItemToInventory",e.removeItemFromInventory="removeItemFromInventory",e.assignEquipment="assignEquipment",e.removeEquipment="removeEquipment"}(a||(a={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(37),r=n(22),c=n(24),o=n(40),i=n(39),s=n(10),u=n(124),l=n(23),d=function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,null,[{key:"addToast",value:function(e,t,n,r){var c=this;this.stack=[].concat(Object(a.a)(this.stack),[{time:Date.now(),title:e,type:t,icon:n,link:r}]),this.emit(this.EVENT_TOASTS_UPDATED,this.stack),l.c.playSound(l.b.toast),setTimeout((function(){c.stack=c.stack.filter((function(e){return Date.now()-e.time<c.lifeTime})),c.emit(c.EVENT_TOASTS_UPDATED,c.stack)}),this.lifeTime)}}]),n}(Object(u.a)());d.stack=[],d.lifeTime=s.a,d.EVENT_TOASTS_UPDATED="toast"},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a,r=n(0),c=(n(2),n(7)),o=n(30),i=n(28);!function(e){e[e.achievementUnlocked=0]="achievementUnlocked",e[e.cheat=1]="cheat",e[e.game=2]="game",e[e.itemCrafted=3]="itemCrafted",e[e.questCompleted=4]="questCompleted",e[e.questEncounter=5]="questEncounter",e[e.questLaunched=6]="questLaunched",e[e.questUpdate=7]="questUpdate"}(a||(a={}));t.b=function(e){var t=e.title,n=e.type,s=void 0===n?a.achievementUnlocked:n,u=e.icon,l=void 0===u?"/img/items/quest-items/dragon-eye.png":u,d=e.link,m=Object(o.g)(),p=c.a.getToastType(s);return Object(r.jsxs)("div",{className:"toast ".concat(d?"withlink":""),onClick:function(){d&&m.push(d)},children:[Object(r.jsx)("div",{className:"label type",children:p}),Object(r.jsx)("div",{className:"label title",children:t}),Object(r.jsx)(i.b,{size:"big",image:l,className:"toast-icon",border:"gold"}),Object(r.jsx)("div",{className:"banner"})]})}},function(e,t,n){"use strict";n.d(t,"b",(function(){return k}));var a,r,c,o=n(8),i=n(120),s=n(11),u=n(1),l=u.b.deed,d={deedForLumbermill:{item:u.a.deedForLumbermill,structure:s.a.lumberMill,itemType:l,iconImg:"/img/items/deeds/deed.png"},deedForWeaponsmith:{item:u.a.deedForWeaponsmith,structure:s.a.weaponsmith,itemType:l,iconImg:"/img/items/deeds/deed.png"}},m=n(3),p=u.b.material,b="/img/items/materials/",h=(a={},Object(m.a)(a,u.a.arrowheads,{item:u.a.arrowheads,itemType:p,iconImg:"".concat(b,"arrowheads.png")}),Object(m.a)(a,u.a.bolts,{item:u.a.bolts,itemType:p,iconImg:"".concat(b,"bolts.png")}),Object(m.a)(a,u.a.buckle,{item:u.a.buckle,itemType:p,iconImg:"".concat(b,"buckle.png")}),Object(m.a)(a,u.a.chain,{item:u.a.chain,itemType:p,iconImg:"".concat(b,"chain.png")}),Object(m.a)(a,u.a.cogs,{item:u.a.cogs,itemType:p,iconImg:"".concat(b,"cogs.png")}),Object(m.a)(a,u.a.gem,{item:u.a.gem,itemType:p,iconImg:"".concat(b,"gem.png")}),Object(m.a)(a,u.a.ingot,{item:u.a.ingot,itemType:p,iconImg:"".concat(b,"ingot.png")}),Object(m.a)(a,u.a.nails,{item:u.a.nails,itemType:p,iconImg:"".concat(b,"nails.png")}),Object(m.a)(a,u.a.poisonVial,{item:u.a.poisonVial,itemType:p,iconImg:"".concat(b,"poison-vial.png")}),Object(m.a)(a,u.a.ribbon,{item:u.a.ribbon,itemType:p,iconImg:"".concat(b,"ribbon.png")}),Object(m.a)(a,u.a.rope,{item:u.a.rope,itemType:p,iconImg:"".concat(b,"rope.png")}),Object(m.a)(a,u.a.gem,{item:u.a.gem,itemType:p,iconImg:"".concat(b,"gem.png")}),Object(m.a)(a,u.a.gunpowder,{item:u.a.gunpowder,itemType:p,iconImg:"".concat(b,"gunpowder.png")}),Object(m.a)(a,u.a.scales,{item:u.a.scales,itemType:p,iconImg:"".concat(b,"scales.png")}),Object(m.a)(a,u.a.spring,{item:u.a.spring,itemType:p,iconImg:"".concat(b,"spring.png")}),Object(m.a)(a,u.a.thread,{item:u.a.thread,itemType:p,iconImg:"".concat(b,"thread.png")}),a),f=u.b.questItem,j="/img/items/quest-items/",v=(r={},Object(m.a)(r,u.a.blueprints,{item:u.a.blueprints,itemType:f,iconImg:"".concat(j,"blueprints.png")}),Object(m.a)(r,u.a.crate,{item:u.a.crate,itemType:f,iconImg:"".concat(j,"crate.png")}),Object(m.a)(r,u.a.dynamite,{item:u.a.dynamite,itemType:f,iconImg:"".concat(j,"dynamite.png")}),Object(m.a)(r,u.a.dragonEye,{item:u.a.dragonEye,itemType:f,iconImg:"".concat(j,"dragon-eye.png")}),Object(m.a)(r,u.a.eye,{item:u.a.eye,itemType:f,iconImg:"".concat(j,"eye.png")}),Object(m.a)(r,u.a.feather,{item:u.a.feather,itemType:f,iconImg:"".concat(j,"feather.png")}),Object(m.a)(r,u.a.food,{item:u.a.food,itemType:f,iconImg:"".concat(j,"food.png")}),Object(m.a)(r,u.a.heart,{item:u.a.heart,itemType:f,iconImg:"".concat(j,"heart.png")}),Object(m.a)(r,u.a.horn,{item:u.a.horn,itemType:f,iconImg:"".concat(j,"horn.png")}),Object(m.a)(r,u.a.key,{item:u.a.key,itemType:f,iconImg:"".concat(j,"key.png")}),Object(m.a)(r,u.a.letters,{item:u.a.letters,itemType:f,iconImg:"".concat(j,"letters.png")}),Object(m.a)(r,u.a.lockPicks,{item:u.a.lockPicks,itemType:f,iconImg:"".concat(j,"lock-picks.png")}),Object(m.a)(r,u.a.oil,{item:u.a.oil,itemType:f,iconImg:"".concat(j,"oil.png")}),Object(m.a)(r,u.a.orcFinger,{item:u.a.orcFinger,itemType:f,iconImg:"".concat(j,"orc-finger.png")}),Object(m.a)(r,u.a.plans,{item:u.a.plans,itemType:f,iconImg:"".concat(j,"plans.png")}),Object(m.a)(r,u.a.purpleGems,{item:u.a.purpleGems,itemType:f,iconImg:"".concat(j,"purple-gems.png")}),Object(m.a)(r,u.a.runestone,{item:u.a.runestone,itemType:f,iconImg:"".concat(j,"runestone.png")}),Object(m.a)(r,u.a.sandwich,{item:u.a.sandwich,itemType:f,iconImg:"".concat(j,"sandwich.png")}),Object(m.a)(r,u.a.teeth,{item:u.a.teeth,itemType:f,iconImg:"".concat(j,"teeth.png")}),Object(m.a)(r,u.a.tooth,{item:u.a.tooth,itemType:f,iconImg:"".concat(j,"tooth.png")}),Object(m.a)(r,u.a.torch,{item:u.a.torch,itemType:f,iconImg:"".concat(j,"torch.png")}),Object(m.a)(r,u.a.tusk,{item:u.a.tusk,itemType:f,iconImg:"".concat(j,"tusk.png")}),Object(m.a)(r,u.a.vase,{item:u.a.vase,itemType:f,iconImg:"".concat(j,"vase.png")}),Object(m.a)(r,u.a.vial,{item:u.a.vial,itemType:f,iconImg:"".concat(j,"vial.png")}),Object(m.a)(r,u.a.weeds,{item:u.a.weeds,itemType:f,iconImg:"".concat(j,"weeds.png")}),r),g=u.b.trinket,O="/img/items/trinkets/",y=(c={},Object(m.a)(c,u.a.magicAmulet,{item:u.a.magicAmulet,itemType:g,iconImg:"".concat(O,"magic_amulet.png")}),Object(m.a)(c,u.a.ring,{item:u.a.ring,itemType:g,iconImg:"".concat(O,"ring.png")}),c),w=n(29),x=Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)({},d),i.a),h),v),y),w.d);t.a=x;function k(e){return x[e]}},function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e[e.common=0]="common",e[e.town=1]="town",e[e.quest=2]="quest"}(a||(a={}))},,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return s}));var a=n(19),r=n(125),c={getQuestVars:function(e){return e.questVars},getInitialQuestVars:function(e){return r.a},nodes:[{x:0,y:1,type:a.a.nothing,log:"quest-kill10-boars-node0"},{x:0,y:2,type:a.a.nothing},{x:0,y:3,type:a.a.nothing},{x:0,y:4,type:a.a.nothing},{x:0,y:3,type:a.a.encounter,startScene:"dungeon.entrance"},{x:1,y:3,type:a.a.nothing,log:"quest-kill10-boars-leave-dungeon"},{x:1,y:3,type:a.a.nothing,log:"quest-kill10-boars-left-dungeon"},{x:2,y:3,type:a.a.nothing},{x:3,y:3,type:a.a.encounter,startScene:"dungeon.hallway"},{x:4,y:4,type:a.a.nothing,log:"The party spots a boss"},{x:5,y:4,type:a.a.nothing}]},o=n(1),i={kill10Boars:c,retrieveMagicAmulet:{getQuestVars:function(e){return e.questVars},getInitialQuestVars:function(e){return{baz:!1,zux:13}},requiredItems:[o.a.torch,o.a.torch,o.a.torch,o.a.sandwich,o.a.sandwich],nodes:[{x:0,y:1,type:a.a.nothing},{x:1,y:1,type:a.a.nothing},{x:2,y:1,type:a.a.nothing},{x:3,y:1,type:a.a.nothing},{x:4,y:1,type:a.a.nothing},{x:5,y:1,type:a.a.nothing},{x:7,y:1,type:a.a.nothing},{x:8,y:2,type:a.a.nothing},{x:8,y:3,type:a.a.nothing},{x:9,y:3,type:a.a.nothing},{x:10,y:1,type:a.a.nothing},{x:10,y:2,type:a.a.nothing},{x:10,y:3,type:a.a.nothing},{x:10,y:4,type:a.a.nothing},{x:11,y:5,type:a.a.nothing},{x:12,y:6,type:a.a.nothing},{x:12,y:7,type:a.a.nothing},{x:13,y:8,type:a.a.nothing},{x:12,y:8,type:a.a.nothing},{x:12,y:9,type:a.a.nothing},{x:11,y:8,type:a.a.nothing},{x:10,y:8,type:a.a.nothing},{x:9,y:8,type:a.a.nothing},{x:8,y:9,type:a.a.nothing},{x:7,y:8,type:a.a.encounter,startScene:"dungeon.hallway"},{x:8,y:1,type:a.a.nothing},{x:1,y:1,type:a.a.nothing},{x:1,y:1,type:a.a.nothing},{x:1,y:1,type:a.a.nothing},{x:1,y:1,type:a.a.nothing},{x:1,y:1,type:a.a.nothing},{x:1,y:1,type:a.a.nothing},{x:1,y:1,type:a.a.nothing},{x:1,y:1,type:a.a.nothing},{x:2,y:1,type:a.a.encounter,startScene:"dungeon.hallway"},{x:3,y:1,type:a.a.nothing}]}};t.a=i;function s(e){return i[e]}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return o}));var a,r=n(45);function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.a.common,c=arguments.length>3?arguments[3]:void 0,o={key:e,context:t};return{type:a.addLogEntry,entry:o,channel:n,channelContext:c}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.a.common,n=arguments.length>2?arguments[2]:void 0;return{type:a.addLogEntry,entry:e,channel:t,channelContext:n}}!function(e){e.addLogEntry="addLogEntry"}(a||(a={}))},,function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return i}));var a=function(e,t){return t.party.map((function(t){return c(e,t)}))},r=function(e,t){var n=t.party[0];return c(e,n)},c=function(e,t){return e.find((function(e){return e.id===t}))},o=function(e){return e.inventory.filter((function(e){return null===e})).length},i=function(e){return!!e.rngState}},,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return l}));var a=n(34),r=n.n(a),c=n(47),o=function(e,t,n){return e+n*(t-e)},i=function(e,t,n){return{x:o(e.x,t.x,n),y:o(e.y,t.y,n)}};function s(e){return u.apply(this,arguments)}function u(){return(u=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=PIXI.Loader.shared,e.abrupt("return",new Promise((function(e,a){n.resources[t]?e(n.resources[t]):n.add(t).load((function(n,a){e(a[t])}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var l=function(e,t){var n=PIXI.Loader.shared;n.resources[e]?t(n.resources[e]):n.add(e).load((function(n,a){t(a[e])}))}},,,,,function(e,t,n){"use strict";var a;function r(e){return{type:a.addGold,amount:e}}function c(e){return{type:a.addGold,amount:-e}}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return c})),function(e){e.addGold="addGold"}(a||(a={}))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(22),r=n(24),c=function(){function e(){Object(a.a)(this,e)}return Object(r.a)(e,null,[{key:"registerSceneController",value:function(e,t,n){this.controllerTypes["".concat(e,".").concat(t)]=n}},{key:"getSceneController",value:function(e,t,n){if(!this.store["".concat(e,".").concat(t)]){if(!this.controllerTypes["".concat(e,".").concat(t)])throw new Error("No controller registered for ".concat(e,".").concat(t));this.store["".concat(e,".").concat(t)]=new(this.controllerTypes["".concat(e,".").concat(t)])(n,e)}return this.store["".concat(e,".").concat(t)]}},{key:"destroySceneConroller",value:function(e,t){delete this.store["".concat(e,".").concat(t)]}}]),e}();c.store={},c.controllerTypes={},n(491)},,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return l}));var a,r=n(3),c=n(1),o=n(13),i=c.b.apparel,s="/img/items/apparel/",u=(a={},Object(r.a)(a,c.a.boots1,{item:c.a.boots1,equipmentType:o.a.feet,itemType:i,iconImg:"".concat(s,"boots_1.png")}),Object(r.a)(a,c.a.boots2,{item:c.a.boots2,equipmentType:o.a.feet,itemType:i,damageReduction:1,iconImg:"".concat(s,"boots_2.png")}),Object(r.a)(a,c.a.boots3,{item:c.a.boots3,equipmentType:o.a.feet,itemType:i,damageReduction:2,iconImg:"".concat(s,"boots_3.png")}),Object(r.a)(a,c.a.chainmailHood,{item:c.a.chainmailHood,equipmentType:o.a.head,itemType:i,iconImg:"".concat(s,"chainmail_hood.png"),damageReduction:3}),Object(r.a)(a,c.a.chest,{item:c.a.chest,equipmentType:o.a.chest,itemType:i,iconImg:"".concat(s,"chest_1.png"),damageReduction:2}),Object(r.a)(a,c.a.clothGloves,{item:c.a.clothGloves,equipmentType:o.a.hands,itemType:i,iconImg:"".concat(s,"cloth_gloves.png"),damageReduction:1}),Object(r.a)(a,c.a.cowl,{item:c.a.cowl,equipmentType:o.a.head,itemType:i,iconImg:"".concat(s,"cowl.png"),damageReduction:2}),Object(r.a)(a,c.a.druidChest,{item:c.a.druidHands,equipmentType:o.a.chest,itemType:i,iconImg:"".concat(s,"druid-chest.png")}),Object(r.a)(a,c.a.druidFeet,{item:c.a.druidFeet,equipmentType:o.a.feet,itemType:i,iconImg:"".concat(s,"druid-feet.png")}),Object(r.a)(a,c.a.druidHands,{item:c.a.druidHands,equipmentType:o.a.hands,itemType:i,iconImg:"".concat(s,"druid-hands.png")}),Object(r.a)(a,c.a.druidHead,{item:c.a.druidHead,equipmentType:o.a.head,itemType:i,iconImg:"".concat(s,"druid-head.png")}),Object(r.a)(a,c.a.druidLegs,{item:c.a.druidLegs,equipmentType:o.a.legs,itemType:i,iconImg:"".concat(s,"druid-legs.png")}),Object(r.a)(a,c.a.fedora,{item:c.a.fedora,equipmentType:o.a.head,itemType:i,iconImg:"".concat(s,"fedora.png")}),Object(r.a)(a,c.a.greaves1,{item:c.a.greaves1,equipmentType:o.a.feet,itemType:i,iconImg:"".concat(s,"greaves_1.png"),damageReduction:2}),Object(r.a)(a,c.a.greaves2,{item:c.a.greaves2,equipmentType:o.a.hands,itemType:i,iconImg:"".concat(s,"greaves_2.png")}),Object(r.a)(a,c.a.hornedHelmet,{item:c.a.hornedHelmet,equipmentType:o.a.head,itemType:i,iconImg:"".concat(s,"horned_helmet.png")}),Object(r.a)(a,c.a.leatherGloves,{item:c.a.leatherGloves,equipmentType:o.a.hands,itemType:i,iconImg:"".concat(s,"leather_gloves.png")}),Object(r.a)(a,c.a.nomadHelmet,{item:c.a.nomadHelmet,equipmentType:o.a.head,itemType:i,iconImg:"".concat(s,"nomad_helmet.png")}),Object(r.a)(a,c.a.pants1,{item:c.a.pants1,equipmentType:o.a.legs,itemType:i,iconImg:"".concat(s,"pants_1.png"),damageReduction:3}),Object(r.a)(a,c.a.pants2,{item:c.a.pants2,equipmentType:o.a.legs,itemType:i,iconImg:"".concat(s,"pants_2.png"),damageReduction:3}),Object(r.a)(a,c.a.plateChest1,{item:c.a.plateChest1,equipmentType:o.a.chest,itemType:i,iconImg:"".concat(s,"plate_chest_1.png")}),Object(r.a)(a,c.a.plateChest2,{item:c.a.plateChest2,equipmentType:o.a.chest,itemType:i,iconImg:"".concat(s,"plate_chest_2.png")}),Object(r.a)(a,c.a.plateChest3,{item:c.a.plateChest3,equipmentType:o.a.chest,itemType:i,iconImg:"".concat(s,"plate_chest_3.png")}),Object(r.a)(a,c.a.plateChest4,{item:c.a.plateChest4,equipmentType:o.a.chest,itemType:i,iconImg:"".concat(s,"plate_chest_4.png")}),Object(r.a)(a,c.a.plateGloves1,{item:c.a.plateGloves1,equipmentType:o.a.hands,itemType:i,iconImg:"".concat(s,"plate_gloves_1.png")}),Object(r.a)(a,c.a.plateGloves2,{item:c.a.plateGloves2,equipmentType:o.a.hands,itemType:i,iconImg:"".concat(s,"plate_gloves_2.png")}),Object(r.a)(a,c.a.plateHelmet,{item:c.a.plateHelmet,equipmentType:o.a.head,itemType:i,iconImg:"".concat(s,"plate_helmet_1.png")}),Object(r.a)(a,c.a.platePants,{item:c.a.platePants,equipmentType:o.a.legs,itemType:i,iconImg:"".concat(s,"plate_pants1.png")}),Object(r.a)(a,c.a.plateShoulders1,{item:c.a.plateShoulders1,equipmentType:o.a.shoulders,itemType:i,iconImg:"".concat(s,"plate_shoulders_1.png")}),Object(r.a)(a,c.a.plateShoulders2,{item:c.a.plateShoulders2,equipmentType:o.a.shoulders,itemType:i,iconImg:"".concat(s,"plate_shoulders_2.png")}),Object(r.a)(a,c.a.robe,{item:c.a.robe,equipmentType:o.a.chest,itemType:i,iconImg:"".concat(s,"robe_1.png")}),Object(r.a)(a,c.a.shoulders1,{item:c.a.shoulders1,equipmentType:o.a.shoulders,itemType:i,iconImg:"".concat(s,"shoulders_1.png")}),Object(r.a)(a,c.a.shoulders2,{item:c.a.shoulders2,equipmentType:o.a.shoulders,itemType:i,iconImg:"".concat(s,"shoulders_2.png"),damageReduction:2}),Object(r.a)(a,c.a.shoulders3,{item:c.a.shoulders3,equipmentType:o.a.shoulders,itemType:i,iconImg:"".concat(s,"shoulders_3.png")}),Object(r.a)(a,c.a.vest,{item:c.a.vest,equipmentType:o.a.chest,itemType:i,iconImg:"".concat(s,"vest_1.png")}),a);function l(e){return u[e]}t.a=u},,,,function(e,t,n){"use strict";var a=n(22),r=n(24);t.a=function(){var e=function(){function e(){Object(a.a)(this,e)}return Object(r.a)(e,null,[{key:"addEventListener",value:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)}},{key:"removeEventListener",value:function(e,t){if(this.events[e])for(var n=0;n<this.events[e].length;n++)if(this.events[e][n]===t){this.events[e].splice(n,1);break}}},{key:"emit",value:function(e,t){this.events[e]&&this.events[e].forEach((function(e){return e(t)}))}}]),e}();return e.events={},e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(1),r={dungeon:{entered:!1,lootCaches:{chest:{title:"encounter-dungeon-caches-chest",items:[a.a.nomadHelmet,a.a.teeth,a.a.poisonVial,a.a.fedora],gold:100},altar:{title:"quest-kill10-boars-dungeonentrance-altar",items:[a.a.bolts,a.a.letters]}},situations:{altar:{candleLit:!1}}}}},function(e,t,n){"use strict";var a,r,c;n.d(t,"a",(function(){return a})),function(e){e.tilelayer="tilelayer",e.objectgroup="objectgroup"}(a||(a={})),function(e){e.orthagonal="orthagonal",e.isometric="isometric",e.staggered="staggered",e.hexagonal="hexagonal"}(r||(r={})),function(e){e.rightUp="right-up",e.rightDown="right-down",e.leftUp="left-up",e.leftDown="left-down"}(c||(c={}))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,,,,,function(e){e.exports=JSON.parse('{"alchemist":[{"shape":[34,18,31,1,37,0]},{"shape":[37,0,53,5,45,17]},{"shape":[45,17,68,27,81,48]},{"shape":[72,67,75,168,11,168]},{"shape":[9,65,1,45,10,30]},{"shape":[31,19,29,5,45,0]},{"shape":[45,0,34,18,37,0]},{"shape":[45,17,81,48,72,67]},{"shape":[72,67,11,168,9,65]},{"shape":[9,65,10,30,31,19]},{"shape":[45,17,72,67,9,65]},{"shape":[9,65,31,19,45,0]},{"shape":[37,0,45,17,9,65]}],"garden":[{"shape":[48,45,48,0,58,0]},{"shape":[57,41,75,56,73,78]},{"shape":[73,78,11,68,2,56]},{"shape":[2,56,13,45,48,45]},{"shape":[48,45,58,0,57,41]},{"shape":[73,78,2,56,48,45]},{"shape":[48,45,57,41,73,78]}],"armoursmith":[{"shape":[53,1,55,0,93,5]},{"shape":[93,5,112,11,120,20]},{"shape":[120,20,124,36,119,49]},{"shape":[119,49,122,156,75,149]},{"shape":[75,149,57,135,33,104]},{"shape":[33,104,10,95,11,52]},{"shape":[11,52,0,35,2,20]},{"shape":[2,20,6,14,27,5]},{"shape":[27,5,53,1,93,5]},{"shape":[93,5,120,20,119,49]},{"shape":[119,49,75,149,33,104]},{"shape":[33,104,11,52,2,20]},{"shape":[2,20,27,5,93,5]},{"shape":[93,5,119,49,33,104]},{"shape":[33,104,2,20,93,5]}],"lumberMill":[{"shape":[32,11,43,1,45,0]},{"shape":[45,0,49,4,37,18]},{"shape":[39,29,50,44,49,48]},{"shape":[38,46,38,230,17,233]},{"shape":[17,233,13,232,13,48]},{"shape":[13,48,3,48,14,28]},{"shape":[14,28,1,7,6,4]},{"shape":[31,18,32,11,45,0]},{"shape":[39,29,49,48,40,43]},{"shape":[38,46,17,233,13,48]},{"shape":[14,28,6,4,19,18]},{"shape":[31,18,45,0,37,18]},{"shape":[37,18,39,29,40,43]},{"shape":[40,43,38,46,13,48]},{"shape":[13,48,14,28,19,18]},{"shape":[31,18,37,18,40,43]},{"shape":[40,43,13,48,19,18]},{"shape":[19,18,31,18,40,43]}],"mine":[{"shape":[15,0,79,1,88,13]},{"shape":[88,13,78,66,27,70]},{"shape":[27,70,2,50,11,27]},{"shape":[11,27,6,13,15,0]},{"shape":[15,0,88,13,27,70]},{"shape":[27,70,11,27,15,0]}],"quarry":[{"shape":[2,24,20,2,22,0]},{"shape":[22,0,103,2,117,15]},{"shape":[117,15,124,24,112,24]},{"shape":[112,24,112,64,104,70]},{"shape":[104,70,104,89,97,88]},{"shape":[97,68,66,67,60,43]},{"shape":[60,43,17,42,17,26]},{"shape":[17,26,2,24,22,0]},{"shape":[22,0,117,15,112,24]},{"shape":[112,24,104,70,97,88]},{"shape":[60,43,17,26,22,0]},{"shape":[112,24,97,88,97,68]},{"shape":[97,68,60,43,22,0]},{"shape":[22,0,112,24,97,68]}],"tannery":[{"shape":[4,2,4,0,61,1]},{"shape":[59,36,89,37,85,79]},{"shape":[85,79,15,77,15,47]},{"shape":[15,47,5,35,0,9]},{"shape":[0,9,4,2,61,1]},{"shape":[59,36,85,79,15,47]},{"shape":[15,47,0,9,61,1]},{"shape":[61,1,59,36,15,47]}],"tavern":[{"shape":[110,27,108,24,112,23]},{"shape":[112,23,151,27,148,60]},{"shape":[148,60,137,71,133,67]},{"shape":[133,67,136,69,132,75]},{"shape":[132,75,137,77,138,124]},{"shape":[131,131,136,136,55,119]},{"shape":[29,64,6,72,0,69]},{"shape":[27,56,76,61,85,67]},{"shape":[101,25,108,13,112,17]},{"shape":[112,17,102,18,104,6]},{"shape":[110,27,112,23,148,60]},{"shape":[132,75,138,124,131,131]},{"shape":[131,131,55,119,59,118]},{"shape":[29,64,0,69,27,56]},{"shape":[112,17,104,6,111,9]},{"shape":[92,27,110,27,148,60]},{"shape":[132,75,131,131,59,118]},{"shape":[50,68,29,64,27,56]},{"shape":[92,27,148,60,133,67]},{"shape":[133,67,132,75,59,118]},{"shape":[50,68,27,56,85,67]},{"shape":[133,67,59,118,56,72]},{"shape":[56,72,50,68,85,67]},{"shape":[133,67,56,72,85,67]},{"shape":[133,67,85,67,89,60]},{"shape":[92,27,133,67,89,60]},{"shape":[92,27,89,60,86,25]},{"shape":[104,0,92,27,86,25]}],"warehouse":[{"shape":[36,414,3,409,2,13]},{"shape":[2,13,31,-7,63,7]},{"shape":[62,197,63,126,65,218]},{"shape":[61,262,83,272,84,459]},{"shape":[84,459,36,414,2,13]},{"shape":[2,13,63,7,62,197]},{"shape":[62,197,65,218,61,262]},{"shape":[61,262,84,459,2,13]},{"shape":[2,13,62,197,61,262]}],"weaponsmith":[{"shape":[52,18,50,2,50,0]},{"shape":[50,0,114,1,109,49]},{"shape":[109,49,115,132,98,129]},{"shape":[98,129,66,95,65,34]},{"shape":[11,33,11,77,0,77]},{"shape":[0,29,18,18,52,18]},{"shape":[52,18,50,0,109,49]},{"shape":[109,49,98,129,65,34]},{"shape":[11,33,0,77,0,29]},{"shape":[52,18,109,49,65,34]},{"shape":[15,27,11,33,0,29]},{"shape":[52,18,65,34,53,26]},{"shape":[15,27,0,29,52,18]},{"shape":[52,18,53,26,15,27]}],"weaver":[{"shape":[51,41,54,0,55,6]},{"shape":[55,41,82,53,87,63]},{"shape":[87,63,86,259,62,254]},{"shape":[62,254,23,212,21,61]},{"shape":[21,61,2,56,51,41]},{"shape":[51,41,55,6,55,41]},{"shape":[55,41,87,63,62,254]},{"shape":[62,254,21,61,51,41]},{"shape":[51,41,55,41,62,254]}],"workshop":[{"shape":[11,2,13,0,68,3]},{"shape":[68,3,77,12,70,14]},{"shape":[70,14,69,38,10,37]},{"shape":[9,13,1,12,11,2]},{"shape":[11,2,68,3,70,14]},{"shape":[70,14,10,37,9,13]},{"shape":[9,13,11,2,70,14]}]}')},function(e){e.exports=JSON.parse('{"alpha":{"start":0.25,"end":0},"scale":{"start":0.04,"end":0.29,"minimumScaleMultiplier":1},"color":{"start":"#85888d","end":"#100f0c"},"speed":{"start":100,"end":200,"minimumSpeedMultiplier":1},"acceleration":{"x":10,"y":-30},"maxSpeed":200,"startRotation":{"min":265,"max":270},"noRotation":false,"rotationSpeed":{"min":8,"max":0},"lifetime":{"min":0.5,"max":3.05},"blendMode":"normal","frequency":0.0005,"emitterLifetime":-1,"maxParticles":300,"pos":{"x":0,"y":0},"addAtBack":true,"spawnType":"point"}')},,,,,,,,,,,,,,,,,,,function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,function(e,t){},,function(e,t){},,,,,,,,,,,,function(e,t){},,function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,function(e,t){},function(e,t){},,,,,,function(e,t){},,function(e,t){},,,,,,,,,,,,,,,,,,function(e,t){},,function(e,t){},,,,,,,,,,,,function(e,t){},,,function(e,t){},,,,,function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,,function(e,t){},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"runGame",(function(){return Oc})),n.d(t,"restartGame",(function(){return gc})),n.d(t,"loadGame",(function(){return vc}));var a,r,c,o=n(37),i=n(34),s=n.n(i),u=n(47),l=n(0);!function(e){e.clearCombatAction="clearCombatAction",e.startCombatAction="startCombatAction",e.moveActor="moveActor"}(a||(a={})),function(e){e[e.player=0]="player",e[e.enemy=1]="enemy"}(r||(r={})),function(e){e.move="move",e.slash="slash",e.shoot="shoot"}(c||(c={}));var d,m={actors:[{allegiance:r.player,health:100,location:[3,5],name:"c4a5d270",remainingAP:5},{allegiance:r.player,health:100,location:[4,6],name:"2e655832",remainingAP:4}],turn:r.player},p=function(e,t){var n=t.getState().combat;if(n.action&&n.action.endsAt<Date.now())if(n.turn===r.enemy);else if(n.turn===r.player){switch(n.action.type){case c.move:t.dispatch(function(e,t){return{type:a.moveActor,actor:e,location:t}}(n.action.actor,n.action.target)),t.dispatch({type:a.clearCombatAction})}return{action:null}}return null},b=n(2),h=n.n(b),f=n(117),j=n(14),v=n(79),g=n.n(v);!function(e){e.gameTick="gameTick"}(d||(d={}));var O,y=n(58),w="0.0.5",x=w,k=function(e){var t=e.split(".").map((function(e){return Number(e)}));if(3!==t.length)throw new Error("Received invalid version string: ".concat(e));t.forEach((function(e){if(e>=1024)throw new Error("Version string invalid, ".concat(e," is too large"))}));for(var n=0,a=0;a<3;a++)n|=t[a]<<10*a;return n}(w),N=n(3),T=n(17),S=n(496),I=n(257),C=n(61),q=n(30),A=n(495),E=n(53),R=n(23),P=n(7),D=n(247),M=n.n(D),H=n(248),L=function(e){var t=e.itemsLoaded,n=e.itemsTotal;return Object(l.jsxs)("div",{children:[" ","Loading (".concat(Math.floor((t||0)/(n||0)*100),")%")," "]})};!function(e){e[e.image=0]="image",e[e.sound=1]="sound"}(O||(O={}));var W,F=[],V=function(e){var t=new Image;return t.src=e,new Promise((function(e,n){function a(){t.naturalWidth?e(t):n(null),t.removeEventListener("load",a),t.removeEventListener("error",a)}t.naturalWidth?e(t):t.complete?n(null):(t.addEventListener("load",a),t.addEventListener("error",a))}))},z=function(e){if((e=e.toLowerCase()).endsWith("png")||e.endsWith("jpg")||e.endsWith("gif"))return O.image;if(e.endsWith("mp3")||e.endsWith("ogg")||e.endsWith("wav"))return O.sound;throw Error("Could not determine type for ".concat(e))},Q=function(e){var t=Object(b.useState)(!1),n=Object(T.a)(t,2),a=n[0],r=n[1],c=Object(b.useState)(0),o=Object(T.a)(c,2),i=o[0],d=o[1];Object(b.useEffect)((function(){h()}),[]);var m=e.children,p=e.manifest,h=function(){d(0);var t=e.manifest.map((function(e){return f(e).catch((function(e){return console.error(e)}))}));Promise.all(t).then((function(t){e.onLoadComplete&&e.onLoadComplete(F),r(!0)}))},f=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,a,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(F.some((function(e){return e.url===t}))&&console.warn("Loading media with url ".concat(t," more than once! Will overwrite.")),(n=z(t))!==O.image){e.next=7;break}return e.next=5,V(t);case 5:r=e.sent,a={content:r,mediaType:n,url:t};case 7:if(n===O.sound&&(c=new H.Howl({src:["".concat(".","/").concat(t)]}),a={content:c,mediaType:n,url:t}),!a){e.next=14;break}return F.push(a),d(i+1),e.abrupt("return",a);case 14:throw new Error("Unknown error while trying to load ".concat(t));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a?Object(l.jsxs)(l.Fragment,{children:[" ",m," "]}):Object(l.jsx)(L,{itemsLoaded:i,itemsTotal:p.length})},_=n(11),B=n(118),G=n(31);!function(e){e[e.NotBuilt=0]="NotBuilt",e[e.Building=1]="Building",e[e.Built=2]="Built"}(W||(W={}));var U,X,Y={level:0,state:W.NotBuilt,workers:0},Z=n(22),J=n(24),K=n(12),$=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0";Object(Z.a)(this,e),this.shapes=void 0,this.shapes=t[n].map((function(e){var t=e.shape;return new K.Polygon(t)}))}return Object(J.a)(e,[{key:"contains",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!(!this.shapes||0===this.shapes.length)&&this.shapes.some((function(n){return n.contains(e,t)}))}}]),e}(),ee=n(250),te=n(18),ne=n(71),ae=function(e){var t=e.hitAreaShapes,n=_.a.lumberMill,a="".concat(".","/img/town/town-alpha/").concat(n,".json"),r=Object(b.useState)(),c=Object(T.a)(r,2),o=c[0],i=c[1],s=e.selected?[xe]:[],u=Object(te.useApp)();Object(b.useEffect)((function(){Object(ne.b)(a,(function(e){i(e.textures)}))}),[u,u.loader,a]);var d=Object(b.useState)(0),m=Object(T.a)(d,2),p=m[0],h=m[1];return Object(te.useTick)((function(e){return h((function(t){return t+.01*e}))})),o?Object(l.jsx)(te.Sprite,{name:n,position:e.position,interactive:!0,buttonMode:!0,pointertap:function(){e.onStructureClick(n)},hitArea:t,filters:s,texture:o["structure.png"],children:Object(l.jsx)(te.Sprite,{name:"blades",texture:o["blades.png"],anchor:new K.Point(.5,.5),x:15,y:10,rotation:p})}):null},re=n(251),ce=n(68),oe=n(252),ie=Object(te.PixiComponent)("ParticleEmitter",{create:function(){return new K.ParticleContainer},applyProps:function(e,t,n){var a=n.image,r=n.config,c=Object(ce.a)(n,["image","config"]);Object(te.applyDefaultProps)(e,t,c);var o=this._emitter;if(!o){o=new oe.a(e,[K.Texture.from(a)],r);var i=performance.now();o.emit=!0,function e(){o.raf=requestAnimationFrame(e);var t=performance.now();o.update(3e-4*(t-i)),i=t}()}this._emitter=o},willUnmount:function(){this._emitter&&(this._emitter.emit=!1,cancelAnimationFrame(this._emitter.raf))}}),se=function(e){var t=e.hitAreaShapes,n=e.position,a=_.a.tavern,r=e.selected?[xe]:[];return Object(l.jsxs)(te.Container,{position:n,children:[Object(l.jsx)(te.Sprite,{name:a,interactive:!0,buttonMode:!0,pointertap:function(){e.onStructureClick(a)},filters:r,hitArea:t,image:"".concat(".","/img/town/town-alpha/").concat(a,".png")}),Object(l.jsx)(ie,{name:"smoke",x:107,y:-2,image:"".concat(".","/img/town/effects/smokeparticle.png"),config:re})]})},ue=n(8),le=n(40),de=n(39),me=function(e){return function(t){Object(le.a)(a,t);var n=Object(de.a)(a);function a(){return Object(Z.a)(this,a),n.apply(this,arguments)}return Object(J.a)(a,[{key:"render",value:function(){var t=this;return Object(l.jsx)(gr.Consumer,{children:function(n){return Object(l.jsx)(e,Object(ue.a)(Object(ue.a)({},t.props),n))}})}}]),a}(b.Component)},pe=function(e){var t=e.structure,n=e.position,a=e.hitAreaShapes,r=e.selected,c=e.onStructureClick,o=r?[xe]:[];return Object(l.jsx)(te.Sprite,{name:t,position:n,interactive:!0,buttonMode:!0,pointertap:function(){c(t)},hitArea:a,filters:o,image:"".concat(".","/img/town/town-alpha/").concat(t,".png")})},be=(n(301),function(e){var t=e.structures,n=[_.a.workshop,_.a.quarry,_.a.tavern,_.a.tannery,_.a.alchemist,_.a.garden,_.a.weaponsmith,_.a.armoursmith,_.a.warehouse,_.a.mine,_.a.lumberMill,_.a.weaver],a=Object(q.h)("".concat(Object(G.c)(),"/:structure")),r=function(e){return(null===a||void 0===a?void 0:a.params.structure)===e.toString()?Object(l.jsx)("span",{className:"highlighted",children:"".concat(P.a.getStructureName(e))}):Object(l.jsx)(C.b,{to:Object(G.b)(e),children:"".concat(P.a.getStructureName(e))})};return Object(l.jsx)("div",{className:"legenda",children:Object(l.jsx)("ul",{children:n.map((function(e){return t[e].state===W.NotBuilt?null:Object(l.jsx)("li",{children:r(e)},e)}))})})}),he=(n(302),n(127)),fe=n(253),je=Object(b.forwardRef)((function(e,t){var n=Object(te.useApp)();if(n){var a="url('".concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAgCAYAAAABtRhCAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH3gMODzc3YHmYGgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAE50lEQVRIx7WXW0wcVRjHfzO7y16YZbfAytACvbjU1hqkLVZMbbSXBEPUNjX6YDYanwYfTXzxrb7qm0lTJ018QhOjaWI0trFYbRoqpYVuwy2UpRS2lAF22YUdtuxt1ofKCIXShaZfMjm37+Q33zn/cxMURWHRVFXNAyiKIvCMTFwKO6Ne4ONPTpngZwoE6Lx6FYCDhwLPDLoMeKPtV8b6ewkEAssiVVU1v/gtLS+dhnUDFUUResZvUhLXuNF+ZVmkBw8F6B+4b5avXR8x82fUC+uCWhoaGsxCV1fXKZelGOvMNPcXspw9+zV60s3MzAweTwXJZBLJXYXPt8XMJ5NJbgX/pqGh4ctCgNalBUVRhId/u5tsQqf9UpDGxkZCoRCtra2mX2trK5qmAZhpoWZdrTIvCOyQihn8/RydsQSVm6uQJAnZ6zV9MjYbkUgEAL/fj6p+my9kOYmPViiKIgQn+8mLIv1jowSONtN0+OgyGEAkEkHXdTRNQ5Kkjal0qY3MJciLIsdOvslYXy9xbXxZu67rAEiSZOafCtgzfpM8Al2/deDEwJZOrYAu2lNFqKpq/rPjLTTtbWY0Psu1jovUVm7Hmk1jS6eYmXooEiH//0pYj3BWFc2RukM4HpxHMAz6x0aRvT1scfsYT0yTTwnEtXEsuQzxhbQ5j08F/O7H0+zz+ThQWsK52yGuBNs5XPcqllwOVzrOjv2HsZaXsuv1OtySnYSeort7kE+Vt56o1FWBo7EollwGQ7Sww13McHyWbE8n9VVVNLzWzMDkXSYGujl/uY1wNIamaciybO4+a0FXXRbd04P8PHydu/EYtmwaSy7NaCzOi0eO09F5kfk7/bhSSZ4T8zQ2NiLLMgCyLPPe+5+vudWtqlJFUYRF8MhsHNHIcXKnn86rfxK8P4Etk8G5kKR4YZ758F1OnDixrP9aUHGt8V6ExlMLbLP7GBoeAkGkxuWhKJfFlUoiJRNE7o0TCARM8UiS9NgjTnySqhRFEUZmR/jm5l9YsynGolG0RJQqpwd7OoU0P0dqZJD0TJyWlhZzU/D7/Txfe2wFVCxUzttLPNyaGEc0svx0+zZVW/cD4Eo/wJuIkevtwZiKLhteWZZXQAsGdk9PscluRzByODxlnL78Aw17mpDdZdizGUr0GNEbndRvKeeD5rcpLy83oRWVjeuLUFEUYTQ+jMfpwutw4CgpJVmzm6/++QVDtFDpLkU0DLxzUabbB6ir9vHGtp3mxi5JkhmluJ6zzONw/pfaMUSR0HyaL6530zYRBmBz7QFqj9YhSQ5efsXPQjxS2MJ/nJUUS8zEZ/G4nPSEQgyHLj08kCehtQuqy66w94/vEfIGNaVliEYGr6No40AAj9OBkDcYHmpb0RaO9hGO9lFdtodubQqAovQCG1IpgGgYlNlsbCqyrekXjvaZ+SlD3Dgwoc9hyWU4WP1SQf6lNbXouo6u6+ZtvmCgoihCcErDks2QCA3w4YF3ngjz+/1omsbkRMfG5nBkdoQ7bjeEe9hVVsZHe5u4FB7nXqTX9Kmvf5eKys3IskwwGGR4qG3ZW0VY+pgpxFRVze/zvcBWbylep5OMzY5hsVLsLiFd5MTqq+DedJRQKLQCtiHg0uv91k21uF1uPE4XhsVC1monlsqSmE8yOdGx6itsQ8BHwavN9+P6/Avf+1eTf20QhwAAAABJRU5ErkJggg==","'), auto");n.renderer.plugins.interaction.cursorStyles.pointer=a}return Object(l.jsx)(ve,Object(ue.a)(Object(ue.a)({app:n},e),{},{ref:t}))})),ve=Object(te.PixiComponent)("Viewport",{create:function(e){var t=new fe.a({screenWidth:e.screenWidth,screenHeight:e.screenHeight,worldWidth:e.worldWidth,worldHeight:e.worldHeight,ticker:e.app.ticker,interaction:e.app.renderer.plugins.interaction});t.on("clicked",(function(t){e.onClick&&e.onClick(t)}));var n=e.minScale,a=void 0===n?1:n,r=e.maxScale,c=void 0===r?2:r;return t.drag().pinch().wheel().clamp({direction:"all"}).clampZoom({minScale:a,maxScale:c}).decelerate(),t}}),ge=je,Oe=Object(b.forwardRef)((function(e,t){var n=e.children,a=e.screenWidth,r=e.screenHeight,c=e.worldWidth,o=e.worldHeight,i=Object(b.useRef)(null);return Object(b.useImperativeHandle)(t,(function(){return i.current})),Object(b.useEffect)((function(){if(we.enabled=!1,i.current){var e=i.current;e.on("moved",(function(){var t=E.b.utils.normalize(e.screenWidth,c,e.right),n=E.b.utils.normalize(o,e.screenHeight,e.bottom),a=Math.max(t*n-.4,0);we.gain=a,we.lacunarity=2.4,we.enabled=we.gain>0}))}var t=function(e){e.preventDefault()};return window.addEventListener("wheel",t,{passive:!1}),function(){window.removeEventListener("wheel",t)}}),[o,c]),Object(l.jsx)(te.Stage,{width:a,height:r,options:ye,children:Object(l.jsx)(ge,{screenWidth:a,screenHeight:r,worldWidth:c,worldHeight:o,ref:i,children:Object(l.jsx)(te.Sprite,{name:"background",image:"".concat(".","/img/town/town-alpha/background.png"),filters:[we],children:n})})})})),ye={autoDensity:!0,sharedLoader:!0},we=new he.a,xe=new B.a(8,16763904),ke=me((function(e){var t=Object(q.h)("".concat(Object(G.c)(),"/:structure")),n=null===t||void 0===t?void 0:t.params.structure,a=Object(b.useRef)(null),r=Object(b.useRef)(null),c=Object(b.useRef)(!1);Object(b.useEffect)((function(){R.c.addMusicTrack(R.a.town,"sound/music/Soliloquy.mp3"),R.c.playMusicTrack(R.a.town)}),[]),Object(b.useEffect)((function(){var e=E.b.to(xe,{duration:.6,thickness:2,yoyo:!0,repeat:-1});return function(){e.pause(0),e.kill()}}),[]),Object(b.useEffect)((function(){if(r.current){var e=r.current;e.on("drag-start",(function(e){c.current=!0,e.event.stopPropagation()})),e.on("drag-end",(function(){c.current=!1}))}}),[]);var o=function(t){c.current||e.onStructureClick(t)},i=Object(j.d)((function(e){return e.structures}));Object(b.useEffect)((function(){if(n&&r.current){var e=r.current;e.zoomPercent(0);var t=Te(_.a[n]);e.moveCenter(t)}}),[n]);var s=Object(b.useState)(vr),u=Object(T.a)(s,2),d=u[0],m=u[1],p=Object(b.useState)(1079),h=Object(T.a)(p,2),f=h[0],v=h[1];return Object(b.useEffect)((function(){var e=function(){var e,t,n=(null===(e=a.current)||void 0===e?void 0:e.clientWidth)||vr,r=(null===(t=a.current)||void 0===t?void 0:t.clientHeight)||1079;m(n),v(r)};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Object(l.jsxs)("div",{className:"town-view",ref:a,children:[Object(l.jsx)(be,{structures:i}),Object(l.jsx)(Oe,{screenWidth:d,screenHeight:f,worldWidth:1024,worldHeight:1600,ref:r,children:[_.a.workshop,_.a.quarry,_.a.tavern,_.a.tannery,_.a.alchemist,_.a.garden,_.a.weaponsmith,_.a.armoursmith,_.a.warehouse,_.a.mine,_.a.lumberMill,_.a.weaver].reverse().map((function(e){if(i[e].state===W.NotBuilt)return null;var t=Ne(e),a=Te(e),r=new $(ee,e);return Object(l.jsx)(t,{position:a,structure:e,hitAreaShapes:r,onStructureClick:o,selected:n===e},e)}))})]})})),Ne=function(e){switch(e){case _.a.workshop:case _.a.quarry:case _.a.tannery:case _.a.alchemist:case _.a.garden:case _.a.weaponsmith:case _.a.armoursmith:case _.a.warehouse:case _.a.mine:case _.a.weaver:return pe;case _.a.lumberMill:return ae;case _.a.tavern:return se}},Te=function(e){var t,n;switch(e){case _.a.workshop:t=373,n=610;break;case _.a.quarry:t=632,n=633;break;case _.a.tannery:t=372,n=460;break;case _.a.tavern:t=500,n=469;break;case _.a.alchemist:t=411,n=371;break;case _.a.garden:t=822,n=689;break;case _.a.weaponsmith:t=449,n=460;break;case _.a.armoursmith:t=473,n=442;break;case _.a.warehouse:t=471,n=130;break;case _.a.lumberMill:t=403,n=320;break;case _.a.mine:t=183,n=527;break;case _.a.weaver:t=484,n=333}return new PIXI.Point(t,n)},Se=n(42),Ie=n(43),Ce=(n(303),function(){var e=Object(b.useState)([]),t=Object(T.a)(e,2),n=t[0],a=t[1],r=function(e){a(e)};return Object(b.useEffect)((function(){return Se.a.addEventListener(Se.a.EVENT_TOASTS_UPDATED,r),function(){Se.a.removeEventListener(Se.a.EVENT_TOASTS_UPDATED,r)}}),[]),Object(l.jsx)("div",{className:"toasts",children:n.map((function(e){return Object(l.jsx)(Ie.b,Object(ue.a)({},e),e.time)}))})});n(304);!function(e){e[e.auto=0]="auto",e[e.large=1]="large",e[e.medium=2]="medium",e[e.small=3]="small"}(U||(U={})),function(e){e.blue="blue",e.purple="purple",e.green="green"}(X||(X={}));var qe,Ae,Ee=function(e){var t,n=e.color,a=(e.size,e.square),r=e.text,c=Object(ce.a)(e,["color","size","square","text"]),o="button\n        ".concat(e.className||"","\n        button-").concat("string"===typeof n?n:X[null!==n&&void 0!==n?n:X.blue],"\n        button-").concat("string"===typeof e.size?e.size:U[null!==(t=e.size)&&void 0!==t?t:U.auto],"\n        ").concat(a?"button-square":"","\n    ").replace(/\n\s*/g," ");return Object(l.jsx)("button",Object(ue.a)(Object(ue.a)({},c),{},{className:o,onClick:function(t){var n;null===(n=e.onClick)||void 0===n||n.call(e,t)},children:Object(l.jsxs)("span",{children:[!!r&&r,!r&&e.children]})}))},Re=function(e){return Object(l.jsxs)("div",{className:"window",children:[Object(l.jsxs)("div",{className:"header",children:[!1!==e.backEnabled&&Object(l.jsx)(Ee,{className:"back-button",onClick:function(t){e.onBack&&(null===e||void 0===e||e.onBack(),R.c.playSound(R.b.buttonClick))},square:!0,size:"medium",color:"purple",text:"<"}),Object(l.jsx)("h3",{children:e.title}),!1!==e.closeEnabled&&Object(l.jsx)(Ee,{className:"close-button",onClick:function(t){e.onClose&&(null===e||void 0===e||e.onClose(),R.c.playSound(R.b.buttonClick))},square:!0,size:"medium",color:"purple",text:"x"})]}),e.children]})},Pe=(n(305),function(e){return function(t){Object(le.a)(a,t);var n=Object(de.a)(a);function a(){return Object(Z.a)(this,a),n.apply(this,arguments)}return Object(J.a)(a,[{key:"render",value:function(){return Object(l.jsx)(Re,Object(ue.a)(Object(ue.a)({},this.props),{},{children:Object(l.jsx)(e,Object(ue.a)({},this.props))}))}}]),a}(b.Component)}),De=n(50),Me=(n(306),Object(De.c)(Pe)((function(){var e=Object(b.useRef)(null),t=Object(b.useRef)(null);return Object(l.jsx)("div",{className:"settings-window",children:Object(l.jsxs)("details",{open:!0,className:"sound",children:[Object(l.jsx)("summary",{children:"Sound"}),Object(l.jsxs)("section",{children:[Object(l.jsxs)("p",{children:[Object(l.jsx)("label",{children:"Sound"}),Object(l.jsx)("button",{onClick:function(){E.a.to(e.current,{duration:.5,value:0,onComplete:function(){R.c.soundVolume=0}})},children:Object(l.jsx)("span",{role:"img","aria-label":"Mute",children:"\ud83d\udd07"})}),Object(l.jsx)("input",{type:"range",min:"0",max:"1",step:"0.05",ref:e,onChange:function(e){var t=parseFloat(e.target.value),n=Math.pow(t,2);R.c.soundVolume=n},defaultValue:"".concat(Math.sqrt(R.c.soundVolume))})]}),Object(l.jsxs)("p",{children:[Object(l.jsx)("label",{children:"Music"}),Object(l.jsx)("button",{onClick:function(){E.a.to(t.current,{duration:.5,value:0,onComplete:function(){R.c.musicVolume=0}})},children:Object(l.jsx)("span",{role:"img","aria-label":"Mute",children:"\ud83d\udd07"})}),Object(l.jsx)("input",{type:"range",min:"0",max:"1",step:"0.05",ref:t,onChange:function(e){var t=parseFloat(e.target.value),n=Math.pow(t,2);R.c.musicVolume=n},defaultValue:"".concat(Math.sqrt(R.c.musicVolume))})]})]})]})})}))),He=n(44),Le=n(1),We=n(45),Fe=n(26),Ve=[Fe.a.food,Fe.a.wood,Fe.a.iron,Fe.a.stone,Fe.a.fabric,Fe.a.leather];function ze(e){return{type:qe.addResources,resources:e}}function Qe(e){return{type:Ae.finishBuildingStructure,structure:e}}function _e(e){return{type:Ae.upgradeStructure,structure:e}}function Be(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{type:Ae.increaseWorkers,structure:e,workers:t}}function Ge(e,t){return{type:Ae.addItemToToProduces,structure:e,item:t}}!function(e){e.addResources="addResources",e.removeResources="removeResources"}(qe||(qe={})),function(e){e.upgradeStructure="upgradeStructure",e.increaseWorkers="increaseWorkers",e.decreaseWorkers="decreaseWorkers",e.startBuildingStructure="startBuildingStructure",e.finishBuildingStructure="finishBuildingStructure",e.setStructureState="setStructureState",e.addItemToToProduces="addItemToToProduces"}(Ae||(Ae={}));var Ue,Xe,Ye,Ze=n(76);function Je(e,t){return{type:Ue.addItem,item:e,toSlot:t}}function Ke(e){return{type:Ue.removeItem,fromSlot:e}}!function(e){e.addItem="addItem",e.moveItemInWarehouse="moveItemInWarehouse",e.removeItem="removeItem"}(Ue||(Ue={})),function(e){e.addWorkers="addWorkers"}(Xe||(Xe={})),function(e){e[e.questProgress=0]="questProgress",e[e.resourceGeneration=1]="resourceGeneration",e[e.cheat=2]="cheat"}(Ye||(Ye={}));var $e,et=1,tt=function(e){switch(e){case Ye.cheat:default:return et}},nt=(n(307),Pe((function(e){var t=Object(b.useRef)(null),n=Object(b.useState)({gold:50,resources:50,workers:10}),a=Object(T.a)(n,2),r=a[0],c=a[1],o=Object(j.c)(),i=Object(b.useState)(tt(Ye.cheat)),s=Object(T.a)(i,2),u=s[0],d=s[1],m=function(e,t){o(function(e,t){return{type:Ae.setStructureState,structure:e,state:t}}(e,t))},p=function(e){var t;o((t=e,{type:Xe.addWorkers,value:t})),o(Object(y.c)("common-cheat-workers-added",{amount:e},We.a.common))},h=Object(j.d)((function(e){return e.structures})),f=function(e){return Object.keys(Le.a).filter((function(t){return Object(He.b)(t).itemType==e})).map((function(e){return v(e)}))},v=function(e){return Object(l.jsx)("option",{value:e,children:P.a.getItemName(e)},e)},g=Object.keys(Le.b).filter((function(e){return!isNaN(e)})).map((function(e){return Object(l.jsx)("optgroup",{label:Le.b[e],children:f(e)},e)})),O=function(e,t){m(e,t?W.Built:W.NotBuilt),t?Se.a.addToast("The ".concat(P.a.getStructureName(e)," is constructed"),Ie.a.cheat):Se.a.addToast("The ".concat(P.a.getStructureName(e)," is not constructed"),Ie.a.cheat)};return Object(l.jsxs)("div",{className:"cheat-window",children:[Object(l.jsxs)("div",{className:"label-numberbox-button",children:[Object(l.jsx)("label",{children:"Gold"}),Object(l.jsx)("input",{type:"number",value:r.gold,style:{width:"50px"},onChange:function(e){var t=Number.parseFloat(e.target.value);c(Object(ue.a)(Object(ue.a)({},r),{},{gold:t}))}}),Object(l.jsx)("button",{onClick:function(e){var t=r.gold;!function(e){o(Object(Ze.b)(e)),o(Object(y.c)("common-cheat-gold-added",{amount:e},We.a.common))}(t);var n=P.a.get("common-cheat-gold-added",{amount:t});Se.a.addToast(n,Ie.a.cheat,"/img/resources/gold.png")},children:"Add"})]}),Object(l.jsxs)("div",{className:"label-numberbox-button",children:[Object(l.jsx)("label",{children:"Workers"}),Object(l.jsx)("input",{type:"number",value:r.workers,style:{width:"50px"},onChange:function(e){var t=Number.parseFloat(e.target.value);c(Object(ue.a)(Object(ue.a)({},r),{},{workers:t}))}}),Object(l.jsx)("button",{onClick:function(e){var t=r.workers;p(t);var n=P.a.get("common-cheat-workers-added",{amount:t});Se.a.addToast(n,Ie.a.cheat,"/img/resources/worker.png")},children:"Add"})]}),Object(l.jsxs)("div",{className:"label-numberbox-button",children:[Object(l.jsx)("label",{children:"Resources"}),Object(l.jsx)("input",{type:"number",value:r.resources,style:{width:"50px"},onChange:function(e){var t=Number.parseFloat(e.target.value);c(Object(ue.a)(Object(ue.a)({},r),{},{resources:t}))}}),Object(l.jsx)("button",{onClick:function(e){!function(e){var t=Ve.reduce((function(t,n){return t[n]=e,t}),{});o(ze(t)),o(Object(y.c)("common-cheat-resources-added",{amount:e},We.a.common))}(r.resources);var t=P.a.get("common-cheat-resources-added",{amount:r.resources});Se.a.addToast(t,Ie.a.cheat)},children:"Add"})]}),Object(l.jsxs)("div",{className:"label-numberbox-button",children:[Object(l.jsx)("label",{children:"Items"}),Object(l.jsx)("select",{style:{width:"150px"},ref:t,children:g}),Object(l.jsx)("button",{onClick:function(e){var n=t.current.value;!function(e){o(Je(e)),o(Object(y.c)("common-cheat-item-added",{item:e},We.a.common))}(n);var a=P.a.get("common-cheat-item-added",{item:n}),r=Object(He.b)(n).iconImg;Se.a.addToast(a,Ie.a.cheat,r)},children:"Add"})]}),Object(l.jsxs)("div",{className:"label-range-value",children:[Object(l.jsx)("label",{children:"Speed"}),Object(l.jsx)("input",{type:"range",min:"1",max:"10",value:u,step:1,onChange:function(e){var t=Number.parseFloat(e.target.value);d(t),function(e){et=e}(t)}}),u,"x speed"]}),Object(l.jsx)("div",{children:Object(l.jsx)("h2",{children:"Structures"})}),Object.keys(h).map((function(e){return function(e){var t=Object(_.b)(e),n=h[e],a=t.levels[n.level],r=P.a.get(a.displayName);return Object(l.jsxs)("div",{className:"label-dropdown",children:[Object(l.jsx)("label",{title:e,children:"".concat(r)}),Object(l.jsx)("input",{type:"checkbox",checked:n.state===W.Built,onChange:function(){return O(e,n.state!==W.Built)}},e)]},e)}(e)}))]})}))),at=n(164),rt=(n(404),"P5mw}jD>5c6Y]yqy"),ct=Object(De.c)(Pe,me)((function(e){var t=Object(j.d)((function(e){return e})),n=Object(b.useState)(),a=Object(T.a)(n,2),r=a[0],c=a[1],o=function(){var t=Object(u.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return c(void 0),t.next=5,vc(r);case 5:Se.a.addToast(P.a.get("ui-game-loaded"),Ie.a.game,"/img/items/misc/magic-eye.png"),e.onCloseWindow();case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(l.jsxs)("div",{className:"menu",children:[Object(l.jsx)("p",{children:Object(l.jsx)(Ee,{onClick:function(){var t=Object(l.jsx)(nt,{title:"Cheats"});e.onOpenWindow(t)},children:"Cheats!"})}),Object(l.jsx)("p",{children:Object(l.jsx)(Ee,{onClick:function(){var t=Object(l.jsx)(Me,{title:"Settings"});e.onOpenWindow(t)},children:"Settings"})}),Object(l.jsxs)("fieldset",{children:[Object(l.jsx)("legend",{children:"Save and load"}),Object(l.jsxs)("section",{children:["Save game to disk:\xa0",Object(l.jsx)(Ee,{onClick:function(){var e=Object(at.createEncryptor)(rt),n=document.createElement("a"),a=JSON.stringify(t),r=e.encrypt(a);n.setAttribute("href","data:text/json;cccharset=utf-8,"+encodeURIComponent(r)),n.setAttribute("download","Gidletown save.json"),n.click()},children:"Save"})]}),Object(l.jsxs)("section",{children:["Load game from disk:\xa0",Object(l.jsx)("input",{type:"file",onChange:function(e){var t=Object(at.createEncryptor)(rt),n=new FileReader;n.onload=function(){var e=n.result,a=t.decrypt(e),r=JSON.parse(a);c(r)},n.readAsText(e.target.files[0])}}),Object(l.jsx)(Ee,{onClick:o,disabled:!r,children:"Load"})]})]})]})})),ot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=["","k","M","G","T","P","E"],a=Math.log10(e)/3|0;if(0===a)return e.toFixed(t);var r=n[a],c=Math.pow(10,3*a),o=e/c;return o.toFixed(t)+r},it=n(254),st=n.n(it),ut=n(124),lt=function(e){Object(le.a)(n,e);var t=Object(de.a)(n);function n(){return Object(Z.a)(this,n),t.apply(this,arguments)}return Object(J.a)(n,null,[{key:"showContextTooltip",value:function(e,t,n,a){var r={type:e,info:t,referenceRect:n,className:a};st()(r,this.lastContext)?this.clear():(this.emit(this.EVENT_CONTEXT_UPDATED,r),this.lastContext=r)}},{key:"clear",value:function(){this.emit(this.EVENT_CONTEXT_UPDATED,void 0),this.lastContext=void 0}}]),n}(Object(ut.a)());lt.EVENT_CONTEXT_UPDATED="tooltipContextUpdated",lt.lastContext=void 0,function(e){e[e.item=0]="item",e[e.trait=1]="trait",e[e.resource=2]="resource",e[e.skill=3]="skill",e[e.component=4]="component"}($e||($e={}));var dt=function(){return Object(j.d)((function(e){return e.gold}))},mt=n(59),pt=Object(mt.a)([function(e){return e.structures[_.a.warehouse].level}],(function(e){return Object(_.b)(_.a.warehouse).levels[e].maxResources})),bt=function(){return Object(j.d)((function(e){return e.resources}))},ht=Object(mt.a)([function(e){return e.structures},function(e){return e.workers}],(function(e,t){return t-Object.keys(e).map((function(t){return e[t]})).reduce((function(e,t){return e+t.workers}),0)})),ft=function(){return Object(j.d)(ht)},jt=n(28),vt=(n(433),function(){var e=dt(),t=bt(),n=ft(),a=function(e,t,n){return Object(l.jsxs)("li",{onClick:function(e){var t=e.currentTarget.getBoundingClientRect();lt.showContextTooltip($e.resource,n,t),e.stopPropagation()},children:[Object(l.jsx)(jt.b,{image:e,size:"smallest"}),Object(l.jsx)("div",{className:"amount",children:ot(t,0)})]},n)},r=Ve.map((function(e){var n=Fe.b[e];return a(n.iconImg,t[e],e)}));return r.push(a("/img/resources/worker.png",n,"workers"),a("/img/resources/gold.png",e,"gold")),Object(l.jsx)("ul",{className:"resourcebar",children:r})}),gt=(n(434),function(e){var t=Object(b.useContext)(gr);return Object(l.jsxs)("div",{className:"topbar",children:[Object(l.jsx)("div",{className:"topbar-left",children:Object(l.jsx)(vt,{})}),Object(l.jsx)("div",{className:"topbar-right",children:Object(l.jsx)("div",{className:"hamburger",onClick:function(n){var a=Object(l.jsx)(ct,{title:"Menu",persistor:e.persistor});t.onOpenWindow(a)},children:"\u2630"})})]})}),Ot=n(19);window.PIXI=K;var yt,wt=function(e){var t=e.quest,n=e.leader,a=e.encounterActive,r=e.position,c=e.onClick,o=e.selected?"/img/world/map-marker-selected.png":"/img/world/map-marker.png",i=Object(b.useRef)(null);return Object(b.useEffect)((function(){var e=i.current,t=new K.Graphics;t.beginFill(12245589),t.drawCircle(0,0,256),t.endFill(),e.mask=t,e.addChild(t)}),[i]),Object(l.jsxs)(te.Sprite,{image:"".concat(".").concat(o),name:t.name,x:r.x,y:r.y,interactive:!0,buttonMode:!0,scale:new K.Point(.1,.1),anchor:new K.Point(.5,1),pointerdown:function(){c&&c(t)},children:[n&&Object(l.jsx)(te.Sprite,{image:"".concat(".","/").concat(n.avatarImg),name:"avatar",anchor:new K.Point(.5,.5),x:0,y:-396,scale:new K.Point(.66,.66),ref:i}),a&&Object(l.jsx)(te.Sprite,{image:"".concat(".","/img/world/quest-alert.png"),name:"quest-alert",anchor:new K.Point(.5,1),x:180,y:-396,scale:new K.Point(2,2)})]})},xt=function(e){var t=e.positions;return e.positions.length>2?Object(l.jsx)(te.Graphics,{name:"questline",x:0,y:0,draw:function(e){e.lineStyle(3,16724736),e.moveTo(t[0].x,t[0].y);var n=0;for(n=1;n<t.length-2;n++){var a=(t[n].x+t[n+1].x)/2,r=(t[n].y+t[n+1].y)/2;e.quadraticCurveTo(t[n].x,t[n].y,a,r)}e.quadraticCurveTo(t[n].x,t[n].y,t[n+1].x,t[n+1].y),e.endFill()}}):null};!function(e){e[e.unavailable=0]="unavailable",e[e.available=1]="available",e[e.active=2]="active",e[e.completed=3]="completed"}(yt||(yt={}));var kt=Object(mt.a)([function(e){return e.quests}],(function(e){return e.filter((function(e){return e.status===yt.active})).map((function(e){return e}))})),Nt=n(56),Tt=n(60);n(435);window.PIXI=K;var St=function(e){var t=e.retrieveWorldViewRef,n=e.smallMap,a=Object(b.useCallback)((function(t){return t.quests.find((function(t){return t.name===e.selectedQuestName}))}),[e.selectedQuestName]),r=Object(j.d)(a),c=Object(j.d)((function(e){return e.adventurers})),o=Object(j.d)((function(e){return kt(e)})),i=function(t){e.onPartyClick(t)},s=Object(b.useState)(vr),u=Object(T.a)(s,2),d=u[0],m=u[1],p=Object(b.useState)(1024),h=Object(T.a)(p,2),f=h[0],v=h[1];Object(b.useEffect)((function(){var e=function(){var e,a,r=t(),c=(null===(e=r.current)||void 0===e?void 0:e.clientWidth)||vr,o=(null===(a=r.current)||void 0===a?void 0:a.clientHeight)||1024;m(c),v(n?c<576?32:64:o)};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[t,n]),Object(b.useEffect)((function(){r&&O(r)}),[r,f]);var g=Object(b.useRef)(null);Object(b.useEffect)((function(){if(g.current){var e=g.current,t=Ct({x:0,y:0});e.moveCenter(t.x/2,t.y/2+10)}}),[d]);var O=function(e){var t=g.current;if(t){var n=It(e),a=Ct(n);t.moveCenter(a.x,a.y)}},y={autoDensity:!0,sharedLoader:!0,width:d,height:f};return Object(l.jsxs)("div",{className:"world-map",children:[Object(l.jsx)(te.Stage,{width:d,height:f,options:y,children:Object(l.jsx)(ge,{screenWidth:d,screenHeight:f,worldWidth:1500,worldHeight:1061,ref:g,children:Object(l.jsxs)(te.Sprite,{image:"".concat(".","/img/world/francesca-baerald-fbaerald-angeloumap-lowres.jpg"),interactive:!0,pointerdown:function(){},children:[o.map((function(e){var t=qt(e);return Object(l.jsx)(xt,{positions:t},e.name)})),o.map((function(e){var t=It(e),n=Ct(t),a=Object(Tt.c)(c,e),o=Object(Nt.b)(e.name),s=Math.floor(e.progress),u=o.nodes[s];return Object(l.jsx)(wt,{quest:e,leader:a,position:n,selected:e===r,encounterActive:u.type===Ot.a.encounter,onClick:function(e){return i(e.name)}},e.name)}))]})})}),e.selectedQuestName&&Object(l.jsxs)("div",{className:"title",children:[Object(l.jsx)("span",{children:P.a.getQuestTitle(e.selectedQuestName)}),Object(l.jsx)("span",{onClick:function(){return i(e.selectedQuestName)},children:"x"})]})]})},It=function(e){var t=Object(Nt.b)(e.name),n=Math.floor(e.progress),a=t.nodes[n],r=t.nodes[n+1];return r?Object(ne.a)(a,r,e.progress-n):a},Ct=function(e){var t=10*e.x+750,n=10*e.y+530.5;return new K.Point(t,n)},qt=function(e){for(var t=[],n=Object(Nt.b)(e.name),a=0;a<e.progress;a++)t.push(Ct(n.nodes[a]));var r=Ct(It(e));return t.push(r),t},At=(n(436),function(e){var t=e.activeTab,n=void 0===t?null:t;!n&&e.children&&e.children&&(n=e.children[0].props.id);var a="".concat(e.className," ").concat(e.disabled?"disabled":""),r=h.a.Children.map(e.children,(function(e){return h.a.cloneElement(e,{active:e.props.id===n,onClick:function(){c(e.props.id)}})})),c=function(t){e.onTabSelected&&!0!==e.disabled&&e.onTabSelected(t)};return Object(l.jsx)("ul",{className:"tabstrip ".concat(a),onClick:function(t){R.c.playSound(R.b.buttonClick),e.onClick&&e.onClick(t)},children:r})}),Et=function(e){var t=(e.active?"active":"")+(e.className||"");return Object(l.jsx)("li",{className:"tabstrip-tab ".concat(t),onClick:function(t){e.onClick&&e.onClick(t)},children:e.children})},Rt=(n(437),function(e){var t=e.adventurer,n=e.size,a="".concat(e.className||""," avatar");return Object(l.jsx)(jt.b,{className:a,image:t.avatarImg,size:n,onClick:function(){e.onClick&&e.onClick(e.adventurer.id)}})}),Pt=function(e){var t=e.adventurers,n=e.onAdventurerTabSelected;return Object(l.jsx)(At,{className:"adventurers-tabstrip",onTabSelected:function(t){var a=e.adventurers.find((function(e){return e.id===t}));n(a.id)},activeTab:e.selectedAdventurerId,disabled:e.disabled,children:t.map((function(e){return t=e,Object(l.jsx)(Et,{id:t.id,children:Object(l.jsx)(Rt,{adventurer:t,size:jt.a.small})},t.id);var t}))})},Dt=function(e){return e.adventurers},Mt=function(e){return e.quests},Ht=(Object(mt.a)([Dt,Mt],(function(e,t){var n=[],a=Object.values(t).reduce((function(t,a){var r=Object(Tt.b)(e,a);return a.status===yt.active&&(t[a.name]=r),n.push.apply(n,Object(o.a)(r)),t}),{});return a.solo=e.filter((function(e){return-1===n.indexOf(e)})),a})),function(e){return Object(mt.a)([Dt,Mt],(function(t,n){var a=n.find((function(t){return t.name===e}));return Object(Tt.b)(t,a)}))}),Lt=(Object(mt.a)([Dt,Mt],(function(e,t){var n=t.reduce((function(e,t){return t.status===yt.active&&e.push.apply(e,Object(o.a)(t.party)),e}),[]);return e.filter((function(e){return-1===n.indexOf(e.id)}))})),function(e){var t=Object(b.useCallback)((function(t){return t.quests.find((function(t){return t.name===e}))}),[e]);return Object(j.d)(t)}),Wt=n(126);n(241);window.PIXI=K;var Ft,Vt=Object(te.PixiComponent)("RectTileLayer",{create:function(e){return new window.PIXI.tilemap.CompositeRectTileLayer},applyProps:function(e,t,n){var a=n.layer,r=n.tilesets,c=n.horizontalTiles,o=n.spritesheets;if(a.data)for(var i=0;i<a.data.length;i++){var s=zt(a.data[i],r);if(s){var u=s.tilewidth,l=s.tileheight,d=i%c*u,m=Math.floor(i/c)*l,p=o[s.name];if(a.data[i]>0){var b="".concat(s.name,"-").concat(a.data[i]);e.addFrame(p.textures[b],d,m)}}}}}),zt=function(e,t){for(var n,a=t.length-1;a>=0&&!((n=t[a]).firstgid<=e);a--);return n},Qt=function(e){var t=e.data,n=e.spritesheets;return Object(l.jsx)(te.Container,{children:t.layers.filter((function(e){return e.visible&&e.type===Wt.a.tilelayer})).map((function(e){return _t(e,t.width,t.tilesets,n)}))})},_t=function(e,t,n,a){return Object(l.jsx)(Vt,{layer:e,horizontalTiles:t,tilesets:n,spritesheets:a},e.name)},Bt=function(e){var t=e.children,n=Object(ce.a)(e,["children"]);return Object(l.jsx)(j.b.Consumer,{children:function(e){var a=e.store;return Object(l.jsx)(te.Stage,Object(ue.a)(Object(ue.a)({},n),{},{children:Object(l.jsx)(j.a,{store:a,children:t})}))}})};!function(e){e.move="move"}(Ft||(Ft={}));var Gt,Ut=n(27),Xt=Object(te.PixiComponent)("SpriteAnimated",{create:function(e){var t=e.textures;return new K.AnimatedSprite(t||[],!0)},applyProps:function(e,t,n){t.textures!==n.textures&&(Object(te.applyDefaultProps)(e,t,n),e.gotoAndPlay(0))}}),Yt=Object(b.memo)(Xt);!function(e){e.north="n",e.northEast="ne",e.east="e",e.southEast="se",e.south="s",e.southWest="sw",e.west="w",e.northWest="nw"}(Gt||(Gt={}));var Zt=function(e){var t,n,a=e.location,r=void 0===a?[0,0]:a,c=e.controller,o=e.idleAnimation,i=e.children,s=Object(ce.a)(e,["location","controller","idleAnimation","children"]),u=null===(t=c.mapData)||void 0===t?void 0:t.tilewidth,d=null===(n=c.mapData)||void 0===n?void 0:n.tileheight,m=Object(b.useRef)(null),p=Object(b.useRef)(),h=Object(j.c)(),f=Object(b.useCallback)((function(t){var n=t.quests.find((function(t){return t.name===e.controller.questName}));return n.scene.actionQueue?n.scene.actionQueue.filter((function(t){return t.actor===e.name})):[]}),[e.name,e.controller.questName]),v=Object(j.d)(f),g=Object(b.useState)("stand"),O=Object(T.a)(g,2),y=O[0],w=O[1],x=Object(b.useMemo)((function(){return c.getActorSpritesheetPath(e.name)}),[c,e.name]);Object(b.useEffect)((function(){if(m){var t=v[0];if(t){switch(t.actionType){case Ft.move:var n=function(){h(Object(Ut.b)(e.controller.questName)),e.controller.actorMoved(e.name,t.target)},a=(t.endsAt-performance.now())/1e3;a<0&&n(),r[0]===t.target[0]&&r[1]>t.target[1]?M(Gt.north):r[0]<t.target[0]&&r[1]>t.target[1]?M(Gt.northEast):r[0]<t.target[0]&&r[1]===t.target[1]?M(Gt.east):r[0]<t.target[0]&&r[1]<t.target[1]?M(Gt.southEast):r[0]===t.target[0]&&r[1]<t.target[1]?M(Gt.south):r[0]>t.target[0]&&r[1]<t.target[1]?M(Gt.southWest):r[0]>t.target[0]&&r[1]===t.target[1]?M(Gt.west):r[0]>t.target[0]&&r[1]>t.target[1]&&M(Gt.northWest),w("walk"),E.b.killTweensOf(m.current),E.b.to(m.current,{duration:a,ease:"linear",pixi:{x:t.target[0]*u,y:t.target[1]*d},onComplete:n})}p.current=t}}}),[h,u,d,v,e.controller,e.name,r]);var k=Object(b.useMemo)((function(){return w("stand"),{x:r[0]*u,y:r[1]*d}}),[r,u,d]),N=k.x,S=k.y,I=Object(b.useState)(null),C=Object(T.a)(I,2),q=C[0],A=C[1];Object(b.useEffect)((function(){if(x){var e=Object.keys(PIXI.Loader.shared.resources[x].textures).reduce((function(e,t){var n=t.replace(/[0-9]/g,"");return e[n]||(e[n]=[]),e[n].push(PIXI.Loader.shared.resources[x].textures[t]),e}),{});A(e)}}),[x]);var R=Object(b.useState)(Gt.north),P=Object(T.a)(R,2),D=P[0],M=P[1],H=Object(b.useRef)(!1);Object(b.useEffect)((function(){var e;e=D===Gt.southWest||D===Gt.west||D===Gt.northWest,H.current=e}),[D]),Object(b.useEffect)((function(){if(o){var e=2e3+4e3*Math.random(),t=setInterval((function(){var e=Math.random()<.5;D===Gt.north&&e?M(Gt.northWest):D===Gt.northWest&&e?M(Gt.west):D===Gt.west&&e?M(Gt.southWest):D===Gt.southWest&&e?M(Gt.south):D===Gt.south&&e?M(Gt.southEast):D===Gt.southEast&&e?M(Gt.east):D===Gt.east&&e?M(Gt.northEast):D===Gt.northEast&&e&&M(Gt.north),D!==Gt.north||e?D!==Gt.northEast||e?D!==Gt.east||e?D!==Gt.southEast||e?D!==Gt.south||e?D!==Gt.southWest||e?D!==Gt.west||e?D!==Gt.northWest||e||M(Gt.north):M(Gt.northWest):M(Gt.west):M(Gt.southWest):M(Gt.south):M(Gt.southEast):M(Gt.east):M(Gt.northEast)}),e);return function(){return clearInterval(t)}}}),[y,o,D]);var L=Object(b.useCallback)((function(){switch(D){case Gt.northWest:return"".concat("").concat(y,"-").concat(Gt.northEast);case Gt.west:return"".concat("").concat(y,"-").concat(Gt.east);case Gt.southWest:return"".concat("").concat(y,"-").concat(Gt.southEast);default:return"".concat("").concat(y,"-").concat(D)}}),[y,D]);return Object(l.jsxs)(te.Container,Object(ue.a)(Object(ue.a)({x:N,y:S,ref:m},s),{},{children:[x&&q&&Object(l.jsx)(Yt,{animationSpeed:.1,name:"footman",isPlaying:!0,textures:q[L()],x:50,y:30,scale:[H.current?-1:1,1],anchor:[.5,.5],pivot:[0,0],filters:[Kt($t,en)]}),i]}))},Jt=Object(b.memo)(Zt),Kt=function(e,t){var n=e.map((function(n,a){return[e[a],t[a]]}));return new he.b(n,.15)},$t=[3679,8831,14501,21964],en=[3870010,6561118,8930966,11166141],tn=Object(b.forwardRef)((function(e,t){var n=Object(b.useRef)(null);return Object(b.useImperativeHandle)(t,(function(){var e;return{drawAction:function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=n.current;if(r){var c=a?65280:16724736;r.clear().lineStyle(3,c).moveTo(e.x,e.y).lineTo(t.x,t.y)}},clear:function(){var e=n.current;null===e||void 0===e||e.clear()},parent:null===(e=n.current)||void 0===e?void 0:e.parent}})),Object(l.jsx)(te.Graphics,{name:"ActionPath",ref:n})})),nn=n(13),an=n(120),rn=function(){var e=Object(j.d)((function(e){return e.adventurers})),t=Object(j.d)((function(e){return e.quests}));return Object(b.useMemo)((function(){return function(e,t){var n=t.reduce((function(e,t){return t.status===yt.active&&e.push.apply(e,Object(o.a)(t.party)),e}),[]);return e.filter((function(e){return-1===n.indexOf(e.id)}))}(e,t)}),[e,t])},cn=function(e){var t=Object(b.useCallback)((function(t){return t.adventurers.find((function(t){return t.id===e}))}),[e]);return Object(j.d)(t)},on=Object(b.forwardRef)((function(e,t){var n=Object(b.useRef)(null),a=e.tileWidth,r=e.tileHeight;return Object(b.useImperativeHandle)(t,(function(){var e;return{drawAp:function(e,t){n.current&&(n.current.x=a*e[0]+a/2,n.current.y=r*e[1]+r/2,n.current.text="".concat(t),n.current.visible=!0)},clear:function(){n.current&&(n.current.visible=!1)},parent:null===(e=n.current)||void 0===e?void 0:e.parent}})),Object(l.jsx)(te.Text,{name:"ActionPoints",ref:n,anchor:[.5,.5],style:{fontFamily:"Gabriela",fontSize:42,fill:16715792,align:"center"}})})),sn=function(e){var t,n,a=e.controller,r=e.location,c=e.name,o=e.selected,i=null===(t=a.mapData)||void 0===t?void 0:t.tilewidth,s=null===(n=a.mapData)||void 0===n?void 0:n.tileheight,u=Object(j.c)(),d=Lt(a.questName).scene,m=d.combat,p=cn(c),h=Object(b.useRef)(null),f=Object(b.useRef)(null),v=Object(b.useState)(!1),g=Object(T.a)(v,2),O=g[0],y=g[1];Object(b.useEffect)((function(){if(O&&r){var e=h.current,t=null===e||void 0===e?void 0:e.parent,n=function(t){if(O&&r&&e){var n=a.pointToSceneLocation(new PIXI.Point(t.data.global.x,t.data.global.y)),o=a.locationIsBlocked(n),u=!0,l=new PIXI.Point(r[0]*i+i/2,r[1]*s+s/2);if(m){var d,p,b=a.calculateWalkApCosts(r,n);if(b>0)null===(d=f.current)||void 0===d||d.drawAp(n,b),u=(a.getRemainingAdventurerAp(c)||-1)>=b;else null===(p=f.current)||void 0===p||p.clear()}e.drawAction(l,t.data.global,!o&&u)}};return t.on("pointermove",n),function(){t.off("pointermove",n)}}}),[O,m,a,r,c,s,i]);var w=function(e){var t,n,o,i;y(!1);var s=h.current;if(y(!1),null===s||void 0===s||s.clear(),null===(t=f.current)||void 0===t||t.clear(),!(null===(n=d.actionQueue)||void 0===n?void 0:n.length)){var l=a.pointToSceneLocation(new PIXI.Point(e.data.global.x,e.data.global.y));if(!a.locationIsBlocked(l)){var p=a.pointToSceneLocation(e.data.global);if(!(p[0]<0||p[0]>=(null===(o=a.mapData)||void 0===o?void 0:o.width)||p[1]<0||p[1]>=(null===(i=a.mapData)||void 0===i?void 0:i.height))){var b=a.findPath(r,p);if(m)if((a.getRemainingAdventurerAp(c)||-1)<((null===b||void 0===b?void 0:b.length)||0))return;null===b||void 0===b||b.forEach((function(e,t){var n={actionType:Ft.move,actor:c,target:e,endsAt:500*(t+1)+performance.now()};u(Object(Ut.d)(a.questName,n))})),u(Object(Ut.c)(a.questName,c,(null===b||void 0===b?void 0:b.length)||0))}}}};return Object(l.jsxs)(te.Container,{interactive:!0,children:[Object(l.jsx)(tn,{ref:h}),Object(l.jsx)(on,{ref:f,tileWidth:i,tileHeight:s}),Object(l.jsxs)(Jt,{name:c,controller:a,location:r,interactive:!0,pointerdown:function(){y(!0),e.setSelectedActor(c)},pointerup:w,pointerupoutside:w,hitArea:new PIXI.Rectangle(null===r||void 0===r?void 0:r[0],null===r||void 0===r?void 0:r[1],i,s),idleAnimation:Math.random()<.5,children:[o&&Object(l.jsx)(te.Graphics,{name:"selectioncircle",draw:function(e){e.lineStyle(3,16777215),e.drawCircle(i/2,s/2,i/2-3),e.endFill()}}),Object(l.jsx)(te.Sprite,{scale:.1,anchor:.5,x:i/2,y:-30,image:"".concat(".","/").concat(p.avatarImg)}),o&&a.actorCanInteract(c)&&Object(l.jsxs)(te.Container,{interactive:!0,pointerdown:function(){a.actorInteract(c)},children:[Object(l.jsx)(te.Sprite,{image:"".concat(".","/img/scene/ui/background.png"),width:i/2,height:i/2,y:s,x:i/2,anchor:.5}),Object(l.jsx)(te.Sprite,{image:"".concat(".","/img/scene/ui/interact.png"),width:i/2,height:i/2,y:s,x:i/2,anchor:.5})]})]})]})},un=Object(b.memo)(sn),ln=function(e){var t=Object(b.useState)({}),n=Object(T.a)(t,2),a=n[0],r=n[1],c=Object(b.useState)(),o=Object(T.a)(c,2),i=o[0],s=o[1];return Object(b.useEffect)((function(){if(i){var t=dn(i,a);if(t){var n=t.name;Object(ne.b)("".concat(e,"/").concat(t.image),(function(c){if(c.error)throw new Error("Loading ".concat(e,"\n").concat(c.error));var o=mn(t),i=new PIXI.Spritesheet(c.texture,o);i.parse((function(){var e=Object(ue.a)(Object(ue.a)({},a),{},Object(N.a)({},n,i));r(e)}))}))}}}),[i,e,a]),{loadComplete:!!i&&void 0===dn(i,a),loadTilesets:function(e){s(e)},tileSpritesheets:a}},dn=function(e,t){return e.find((function(e){return!t[e.name]}))},mn=function(e){for(var t=e.columns,n={},a=0;a<e.tilecount;a++){var r=e.tilewidth,c=e.tileheight,o=a%t*r,i=Math.floor(a/t)*c;n["".concat(e.name,"-").concat(a+e.firstgid)]={frame:{x:o,y:i,w:r,h:c},spriteSourceSize:{x:o,y:i,w:r,h:c},rotated:!1,trimmed:!1,sourceSize:{w:r,h:c}}}return{frames:n,meta:{image:e.image,size:{w:e.imagewidth,h:e.imageheight},scale:1}}},pn=Object(b.forwardRef)((function(e,t){var n,a,r=e.location,c=void 0===r?[0,0]:r,o=e.controller,i=e.children,s=null===(n=o.mapData)||void 0===n?void 0:n.tilewidth,u=null===(a=o.mapData)||void 0===a?void 0:a.tileheight,d=Object(b.useMemo)((function(){return{x:c[0]*s,y:c[1]*u}}),[c,s,u]),m=d.x,p=d.y;return Object(l.jsx)(te.Container,{x:m,y:p,ref:t,children:i})})),bn=function(e,t,n){if(e.gid){var a=hn(e.gid,t.mapData.tilesets),r=n[a.name];return Object(l.jsx)(pn,{controller:t,location:e.location,children:Object(l.jsx)(te.Sprite,{name:e.name,texture:r.textures["".concat(a.name,"-").concat(e.gid)]})},"".concat(e.name).concat(e.location[0]).concat(e.location[1]))}return Object(l.jsx)("div",{})},hn=function(e,t){for(var n=t.length-1;n>=0;n--)if(t[n].firstgid<=e)return t[n];return t[0]},fn=n(108),jn=Object(b.createContext)(null),vn=function(e){var t=e.questName,n=e.children,a=Object(j.e)(),r=Object(b.useState)(!1),c=Object(T.a)(r,2),o=c[0],i=c[1],s=a.getState().quests.find((function(e){return e.name===t})),u=s.scene,d=s.sceneName,m=Object(b.useMemo)((function(){return d?fn.a.getSceneController(t,d,a):null}),[t,d,a]);return Object(b.useEffect)((function(){if(d&&m){i(!1);m.loadData((function(){i(!0),!u&&m&&(m.createScene(),m.sceneEntered())}))}}),[m,t,u,d]),!m||m.dataLoaded&&o?Object(l.jsx)(jn.Provider,{value:m,children:n}):Object(l.jsx)("div",{children:"loading..."})};window.PIXI=K;var gn=function(e){var t=Object(b.useContext)(jn),n=t.mapData,a=t.basePath,r=ln(a),c=r.loadComplete,o=r.loadTilesets,i=r.tileSpritesheets,s=Object(b.useRef)(null),u=Lt(t.questName).scene,d=Object(b.useMemo)((function(){var t;return(null===u||void 0===u||null===(t=u.actors)||void 0===t?void 0:t.find((function(t){return t.name===e.selectedActor})))||null}),[u,e.selectedActor]),m=Object(b.useCallback)((function(){var n;return null===u||void 0===u||null===(n=u.actors)||void 0===n?void 0:n.map((function(n){return function(n){var a=n.name,r=n.location;return Object(l.jsx)(un,{location:r,controller:t,name:a,selected:(null===d||void 0===d?void 0:d.name)===a,setSelectedActor:e.setSelectedActor},a)}(n)}))}),[t,e.setSelectedActor,u,d]);if(Object(b.useEffect)((function(){n&&o(n.tilesets)}),[o,n]),!c||!n||!u)return Object(l.jsx)("div",{children:"loading..."});var p=n.width*n.tilewidth,h=n.height*n.tileheight;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(Bt,{width:p,height:h,children:Object(l.jsxs)(te.Container,{ref:s,interactive:!0,hitArea:new K.Rectangle(0,0,p,h),children:[Object(l.jsx)(Qt,{basePath:a,data:n,spritesheets:i}),u.objects.map((function(e){return bn(e,t,i)})),m()]})}),false]})},On=(n(443),function(e){var t=Lt(e.questName),n=Object(Nt.b)(t.name),a=Math.floor(t.progress);do{var r=n.nodes[a].log;if(r)return Object(l.jsx)("div",{children:Object(l.jsx)("p",{children:"".concat(P.a.get(r))})});a--}while(a>=0);return Object(l.jsx)("h1",{className:"on-the-road questname",children:P.a.getQuestTitle(t.name)})}),yn=function(e){return Lt(e.questName).sceneName?Object(l.jsx)(gn,Object(ue.a)({},e)):Object(l.jsx)(On,{questName:e.questName})},wn=n(33),xn=n(21),kn=(n(444),function(e){var t=e.item,n=e.size,a=Object(He.b)(t);a||console.warn("could not find definition for ".concat(t));var r="item-icon ".concat(Nn(a.rarity)," ").concat(Tn(n));return Object(l.jsx)("div",{className:r,children:Object(l.jsx)(jt.b,{image:a.iconImg,size:e.size,onClick:function(n){if(!1!==e.showContext){var a=n.currentTarget.getBoundingClientRect();lt.showContextTooltip($e.item,Object(He.b)(t),a),n.stopPropagation()}e.onClick&&e.onClick(n)}})})}),Nn=function e(t){switch(t){case xn.a.common:return"item-icon-common";case xn.a.uncommon:return"item-icon-uncommon";case xn.a.rare:return"item-icon-rare";case xn.a.epic:return"item-icon-epic";case xn.a.legendary:return"item-icon-legendary"}return e(xn.a.common)},Tn=function e(t){switch(t){case jt.a.smallest:return"item-icon-size-smallest";case jt.a.small:return"sitem-icon-size-small";case jt.a.medium:return"item-icon-size-medium";case jt.a.big:return"item-icon-size-big";case jt.a.biggest:return"item-icon-size-biggest"}return e(jt.a.medium)},Sn=n(497);var In=Object(Sn.a)(wn.b.ITEM,{beginDrag:function(e){return{inventorySlot:e.index,item:e.item,sourceId:e.sourceId,sourceType:e.sourceType}}},(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}}))((function(e){var t=e.item,n=e.onClick,a=e.isDragging,r=e.connectDragSource,c=e.size;return a?null:r(Object(l.jsx)("div",{children:Object(l.jsx)(kn,{item:t,onClick:function(e){n&&n(e)},size:c})}))})),Cn=(n(445),function(e){var t=(e.className||"")+" items-list";return Object(l.jsx)("ul",{className:t,children:e.items.map((function(t,n){return Object(l.jsxs)("li",{className:"item",children:[Object(l.jsx)(In,{item:t,index:n,sourceId:e.sourceId,sourceType:e.sourceType}),Object(l.jsxs)("div",{className:"text",children:[Object(l.jsx)("p",{className:"name",children:P.a.getItemName(t)}),Object(l.jsx)("p",{className:"subtext",children:P.a.getItemSubtext(t)})]})]},"".concat(t).concat(n))}))})}),qn=(n(446),n(243),function(e){var t=Object(b.useContext)(jn),n=cn(e.adventurerId),a=Object(Tt.a)(n),r=Object(b.useRef)(null),c=t.getLootCache(e.cacheName);if(!c)return null;return Object(l.jsxs)("div",{className:"interaction-modal loot-cache",ref:r,children:[Object(l.jsxs)("div",{className:"header",children:[Object(l.jsx)("div",{className:"title",children:P.a.get(c.title)}),Object(l.jsx)("div",{className:"close",onClick:e.onClose})]}),c.items.length>0&&Object(l.jsxs)("div",{className:"content",children:[Object(l.jsx)("div",{className:"items",children:Object(l.jsx)(Cn,{items:c.items,sourceType:wn.a.lootCache,sourceId:e.cacheName})}),Object(l.jsxs)("div",{className:"adventurer",children:[Object(l.jsx)(Rt,{adventurer:n}),Object(l.jsx)(Ee,{onClick:function(c){c.stopPropagation(),r.current.querySelectorAll(".items-list .item").forEach((function(e,t){t>=a||e.classList.add("taking")})),E.a.to(".items-list .item.taking",{right:"-100%",stagger:{each:.1,ease:"power2.inOut"},onComplete:function(){for(var r=0;r<a;r++)t.takeItemFromCache(0,e.cacheName,n)}})},disabled:0===a,size:"small",children:P.a.get("quest-common-loot-cache-take-all")})]})]}),!!c.gold&&Object(l.jsxs)("div",{className:"content",children:[Object(l.jsxs)("div",{className:"gold",children:[Object(l.jsx)(jt.b,{image:"img/resources/gold.png",size:"medium"}),P.a.get("quest-common-loot-cache-gold",{gold:c.gold})]}),Object(l.jsx)("div",{className:"take-gold",children:Object(l.jsx)(Ee,{onClick:function(n){n.stopPropagation(),t.takeGoldFromCache(e.cacheName)},size:"small",children:P.a.get("quest-common-loot-cache-take")})})]})]})}),An=(n(447),function(e){var t=Object(b.useContext)(jn),n=Object(b.useRef)(null),a=t.getSituation(e.situation,e.adventurerId);if(!a)return null;var r=a.title,c=a.choices,o=function(n){var a=n.currentTarget.getAttribute("data-option");t.handleSituationOptionClick(e.situation,a),n.stopPropagation()};return Object(l.jsxs)("div",{className:"interaction-modal situation",ref:n,children:[Object(l.jsxs)("div",{className:"header",children:[Object(l.jsx)("div",{className:"title",children:P.a.get(r)}),Object(l.jsx)("div",{className:"close",onClick:function(t){e.onClose(),t.stopPropagation()}})]}),c.length>0&&Object(l.jsx)("div",{className:"content",children:c.map((function(e){return Object(l.jsx)(Ee,{"data-option":e,onClick:o,children:P.a.get(e)},e)}))})]})}),En=(n(448),function(e){var t=e.selectedAdventurerId,n=Object(j.d)(Ht(e.questName)),a=Object(b.useContext)(jn);return Object(l.jsxs)("div",{className:"combat-bar",children:[Object(l.jsx)("div",{className:"title",children:P.a.get("ui-combat-bar-title")}),Object(l.jsx)("div",{className:"adventurers",children:n.map((function(e){return Object(l.jsxs)("div",{className:"adventurer ".concat(t===e.id?"selected":""),children:[Object(l.jsx)(Rt,{adventurer:e,size:jt.a.smallest}),Object(l.jsxs)("div",{className:"ap",children:[a.getRemainingAdventurerAp(e.id)," AP"]})]},e.id)}))}),Object(l.jsx)(Ee,{size:"small",children:"End turn"})]})}),Rn=n(492),Pn={drop:function(e,t){e.onDrop(t.getItem())},canDrop:function(e,t){var n=t.getItem();return n.sourceType!==wn.a.adventurerEquipment||(null==e.item||Object(nn.c)(e.item,n.inventorySlot))}},Dn=Object(Rn.a)(wn.b.ITEM,Pn,(function(e,t){return{canDrop:t.canDrop(),connectDropTarget:e.dropTarget(),isOver:t.isOver()}}))((function(e){var t=e.isOver,n=e.canDrop,a=e.connectDropTarget,r=["inventory-item"];return t&&n?r.push("drop-active"):n&&r.push("drop-possible"),a(Object(l.jsx)("div",{className:r.join(" "),children:e.children}))})),Mn=(n(449),function(e){for(var t=[],n=function(n){var a=void 0,r=e.items[n];r&&(a=Object(l.jsx)(In,{index:n,sourceId:e.sourceId,sourceType:e.sourceType,item:r}));var c=Object(l.jsx)(Dn,{item:r,size:e.iconSize,onDrop:function(t){if((t.inventorySlot!==n||t.sourceType!==e.sourceType||t.sourceId!==e.sourceId)&&e.onDropItem){var a=t.inventorySlot;e.onDropItem(t.item,a,n,t.sourceType,t.sourceId)}},children:a},"inventory-slot-".concat(n));t.push(c)},a=0;a<e.items.length;a++)n(a);return Object(l.jsx)("div",{className:"inventory ".concat(e.className?e.className:""),children:t})}),Hn=n(41),Ln=function(){return Object(j.d)((function(e){return e.stockpile}))},Wn=function(){var e=Object(j.c)(),t=Object(b.useContext)(jn),n=Ln();return{dropItemEquipment:function(t,n,a){var r=t.item,c=[];switch(t.sourceType){case wn.a.adventurerInventory:c.push(Object(Hn.f)(a.id,t.inventorySlot),Object(Hn.c)(a.id,n,r));var o=a.equipment[nn.a[n]];o&&c.push(Object(Hn.b)(a.id,o,t.inventorySlot));break;case wn.a.warehouse:c.push(Ke(t.inventorySlot),Object(Hn.c)(a.id,n,r));var i=a.equipment[nn.a[n]];i&&c.push(Je(i,t.inventorySlot));break;case wn.a.adventurerEquipment:c.push(Object(Hn.c)(a.id,n,r));var s=a.equipment[nn.a[n]],u=t.inventorySlot;s?c.push(Object(Hn.c)(a.id,u,s)):c.push(Object(Hn.e)(a.id,u))}c.forEach((function(t){return e(t)}))},dropItemInventory:function(n,a,r,c,o,i){var s=[];switch(c){case wn.a.adventurerInventory:s.push(Object(Hn.d)(o.id,a,r));break;case wn.a.warehouse:s.push(Ke(a),Object(Hn.b)(o.id,n,r));var u=o.inventory[r];u&&s.push(Je(u,a));break;case wn.a.adventurerEquipment:s.push(Object(Hn.b)(o.id,n,r));var l=o.inventory[r];l?s.push(Object(Hn.c)(o.id,a,l)):s.push(Object(Hn.e)(o.id,a));break;case wn.a.lootCache:t&&i&&t.takeItemFromCache(a,i,o,r)}s.forEach((function(t){return e(t)}))},dropItemWarehouse:function(t,a,r,c,o){var i=[];switch(c){case wn.a.warehouse:i.push(function(e,t){return{type:Ue.moveItemInWarehouse,fromSlot:e,toSlot:t}}(a,r));var s=n[r];s&&i.push(Object(Hn.b)(o,s,a));break;case wn.a.adventurerInventory:i.push(Object(Hn.f)(o,a),Je(t,r));var u=n[r];u&&i.push(Object(Hn.b)(o,u,a))}i.forEach((function(t){return e(t)}))}}},Fn=n(29),Vn=(n(450),function(e){var t,n=cn(e.adventurerId);return(null===n||void 0===n?void 0:n.skills)?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("p",{children:P.a.get("ui-adventurer-info-skills-title")}),Object(l.jsx)("ul",{className:"adventurer-skills",children:null===(t=Object.keys(n.skills))||void 0===t?void 0:t.map((function(e,t){return function(e){var t=function(t){var n=t.currentTarget.getBoundingClientRect();lt.showContextTooltip($e.skill,e,n),t.stopPropagation()};return Object(l.jsx)(b.Fragment,{children:Object(l.jsxs)("li",{onClick:t,children:[Object(l.jsx)("span",{className:"skill",onClick:t,children:P.a.getSkillName(e)}),Object(l.jsx)("span",{children:n.skills[e]})]})},e)}(Fn.c[e])}))})]}):null});function zn(e){return Math.pow(e/.5,2)}n(451);var Qn=function(e){var t,n,a,r=e.className,c=void 0===r?"":r,o=(t=e.progress||0,n=0,t>(a=1)?a:t<n?n:t);return Object(l.jsxs)("div",{className:"progressbar ".concat(c),children:[Object(l.jsx)("div",{className:"progressbar-label",children:e.label}),Object(l.jsx)("div",{className:"progressbar-bar",style:{width:"".concat(100*o,"%")}})]})};var _n,Bn,Gn=function(e){var t=e.xp,n=function(e){return Math.floor(.5*Math.sqrt(e))}(t),a=zn(n),r=zn(n+1);return Object(l.jsxs)("div",{className:"level",children:["Level ",n,Object(l.jsx)(Qn,{progress:(t-a)/(r-a),label:P.a.get("ui-adventurer-info-xp-progress",{xp:Math.floor(t-a),next:r-a})})]})},Un=function(e){var t,n=Lt(e.questName),a=Object(b.useContext)(jn),r=Object(b.useMemo)((function(){return a?a.getRemainingAdventurerAp(e.adventurer.id):null}),[a,e.adventurer.id]);return(null===n||void 0===n||null===(t=n.scene)||void 0===t?void 0:t.combat)?Object(l.jsx)("span",{children:P.a.get("ui-adventurer-info-ap-remaining",{ap:r})}):null};n(452);!function(e){e.arrowFinder="arrowFinder",e.gloomy="gloomy",e.houseHouston="houseHouston",e.houseMaddox="houseMaddox",e.houseMonroe="houseMonroe"}(_n||(_n={}));var Xn=(Bn={},Object(N.a)(Bn,_n.arrowFinder,{trait:_n.arrowFinder,hasEffect:!0}),Object(N.a)(Bn,_n.gloomy,{trait:_n.gloomy,hasEffect:!0}),Object(N.a)(Bn,_n.houseHouston,{trait:_n.houseHouston}),Object(N.a)(Bn,_n.houseMaddox,{trait:_n.houseMaddox}),Object(N.a)(Bn,_n.houseMonroe,{trait:_n.houseMonroe}),Bn);var Yn,Zn=function(e){var t=cn(e.adventurerId),n=function(e,t){var n=function(e){return Xn[e]}(e);return Object(l.jsxs)(b.Fragment,{children:[Object(l.jsx)("li",{onClick:function(e){var t=e.currentTarget.getBoundingClientRect();lt.showContextTooltip($e.trait,n,t),e.stopPropagation()},children:P.a.getTraitName(e)}),!t&&", "]},e)};return(null===t||void 0===t?void 0:t.traits)?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("p",{children:P.a.get("ui-adventurer-info-traits-title")}),Object(l.jsx)("ul",{className:"adventurer-traits",children:t.traits.map((function(e,a){return n(e,a===t.traits.length-1)}))})]}):null},Jn=(n(453),function(e){var t=function(e){var t,n=cn(e),a=function(e){var t=n.equipment[nn.a[e]];return t&&Object(an.b)(t).damageReduction||0};return t={},Object(N.a)(t,nn.a[nn.a.head],a(nn.a.head)),Object(N.a)(t,nn.a[nn.a.chest],a(nn.a.chest)),Object(N.a)(t,nn.a[nn.a.hands],a(nn.a.hands)),Object(N.a)(t,nn.a[nn.a.shoulders],a(nn.a.shoulders)),Object(N.a)(t,nn.a[nn.a.legs],a(nn.a.legs)),Object(N.a)(t,nn.a[nn.a.feet],a(nn.a.feet)),t}(e.adventurerId),n=function(e){var n=t[nn.a[e]];return n?Object(l.jsx)("div",{className:nn.a[e],children:n},e):null};return Object(l.jsxs)("li",{className:"guy",children:[n(nn.a.head),n(nn.a.chest),n(nn.a.hands),n(nn.a.shoulders),n(nn.a.legs),n(nn.a.feet)]})}),Kn=(n(454),function(e){var t=e.adventurer,n=e.onDropItemEquipment,a=function(e){var a=t.equipment[nn.a[e]];return Object(l.jsxs)("li",{className:nn.a[e],children:[Object(l.jsx)(nn.b,{onDrop:function(t){return n(t,e)},type:e,children:a&&Object(l.jsx)(In,{index:e,sourceId:t.id,sourceType:wn.a.adventurerEquipment,item:a,size:jt.a.medium})}),Object(l.jsx)("span",{className:"info",children:P.a.getEquipmentSlot(e)})]})};return Object(l.jsxs)("ul",{className:"adventurer-equipment",children:[a(nn.a.head),a(nn.a.chest),a(nn.a.hands),a(nn.a.shoulders),a(nn.a.legs),a(nn.a.feet),a(nn.a.mainHand),a(nn.a.offHand),Object(l.jsx)(Jn,{adventurerId:t.id})]})}),$n=(n(455),function(e){var t=e.adventurerId,n=e.questName,a=e.horizontalMode,r=e.name,c=void 0===r||r,o=e.levelBar,i=void 0===o||o,s=e.traits,u=void 0===s||s,d=e.skills,m=void 0===d||d,p=cn(t),b=Wn(),h=b.dropItemEquipment,f=b.dropItemInventory;return Object(l.jsxs)("div",{className:"adventurer-panel".concat(a?" horizontal":""),children:[Object(l.jsxs)("div",{className:"left",children:[Object(l.jsxs)("div",{className:"info",children:[c&&Object(l.jsxs)("div",{className:"name",children:[p.name,n&&Object(l.jsx)(Un,{questName:n,adventurer:p})]}),i&&Object(l.jsx)(Gn,{xp:p.xp}),u&&Object(l.jsx)(Zn,{adventurerId:p.id}),m&&Object(l.jsx)(Vn,{adventurerId:p.id})]}),Object(l.jsx)("div",{className:"equipment",children:Object(l.jsx)(Kn,{adventurer:p,onDropItemEquipment:function(e,t){h(e,t,p)}})})]}),Object(l.jsx)("div",{className:"right",children:Object(l.jsx)(Mn,{sourceType:wn.a.adventurerInventory,sourceId:p.id,items:p.inventory,className:"inventory-small",onDropItem:function(e,t,n,a,r){f(e,t,n,a,p,r)}})})]})});n(456);!function(e){e[e.auto=0]="auto",e[e.vertical=1]="vertical",e[e.horizontal=2]="horizontal"}(Yn||(Yn={}));var ea,ta=function(e){var t,n,a=Object(q.g)(),r=Object(j.c)(),c=e.layout,o=void 0===c?Yn.auto:c,i=Object(j.d)(Ht(e.questName)),s=i[0],u=Object(b.useState)(null===s||void 0===s?void 0:s.id),d=Object(T.a)(u,2),m=d[0],p=d[1],h=Lt(e.questName),f=null===h||void 0===h||null===(t=h.scene)||void 0===t?void 0:t.activeInteractionModal,v=function(e){p(e)},g=function(){r(Object(Ut.g)(e.questName))};return Object(b.useEffect)((function(){i.length||a.push(Object(G.d)())}),[i.length,a]),i.length?Object(l.jsxs)(vn,{questName:e.questName,children:[(null===h||void 0===h||null===(n=h.scene)||void 0===n?void 0:n.combat)&&Object(l.jsx)(En,{questName:e.questName,selectedAdventurerId:m}),Object(l.jsxs)("div",{className:"quest-panel quest-panel-".concat(Yn[o]),children:[Object(l.jsxs)("div",{className:"quest-area",children:[Object(l.jsx)(yn,{questName:e.questName,selectedActor:m,setSelectedActor:v}),f&&"lootCache"===f.type&&Object(l.jsx)("div",{className:"modal",onClick:g,children:Object(l.jsx)(qn,{cacheName:f.lootCache,adventurerId:m,onClose:g})}),f&&"situation"===f.type&&Object(l.jsx)("div",{className:"modal",onClick:g,children:Object(l.jsx)(An,{situation:f.situation,adventurerId:m,onClose:g})})]}),Object(l.jsxs)("div",{className:"party-area",children:[Object(l.jsx)(Pt,{adventurers:i,selectedAdventurerId:m,onAdventurerTabSelected:v,disabled:void 0!==f}),Object(l.jsx)("div",{className:"adventurer-details",children:m&&Object(l.jsx)($n,{adventurerId:m,questName:e.questName})})]})]})]}):null},na=(n(457),function(){var e=Object(b.useRef)(null),t=Object(q.h)("".concat(Object(G.d)(),"/:questname")),n=null===t||void 0===t?void 0:t.params.questname,a=Object(q.g)();Object(b.useEffect)((function(){R.c.addMusicTrack(R.a.world,"sound/music/TheLoomingBattle.ogg"),R.c.playMusicTrack(R.a.world)}),[]);return Object(l.jsxs)("div",{className:"world-view",ref:e,children:[Object(l.jsx)(St,{selectedQuestName:n,smallMap:null!=n,onPartyClick:function(e){e===n?a.push(Object(G.d)()):a.push(Object(G.a)(e)),R.c.playSound(R.b.buttonClick)},retrieveWorldViewRef:function(){return e}}),n&&Object(l.jsx)(ta,{questName:n})]})});n(458);!function(e){e[e.all=0]="all",e[e.town=1]="town",e[e.quest=2]="quest"}(ea||(ea={}));var aa,ra,ca=function(e){var t=Object(b.useState)(!1),n=Object(T.a)(t,2),a=n[0],r=n[1],c=Object(b.useState)("all"),o=Object(T.a)(c,2),i=o[0],s=o[1],u=Object(j.d)((function(e){return e.log})),d=Object(j.d)((function(e){return kt(e)})),m=[{label:P.a.get("ui-log-tab-all"),tabId:"all",tabType:ea.all},{label:P.a.get("ui-log-tab-town"),tabId:"town",tabType:ea.town}];d.forEach((function(e){var t=e.name;m.push({channelContext:t,label:P.a.getQuestTitle(t),tabId:"quest-".concat(t),tabType:ea.quest})}));var p=[],h=m.find((function(e){return e.tabId===i}));switch(h.tabType){case ea.all:p=u;break;case ea.town:p=u.filter((function(e){return e.channel===We.a.town}));break;case ea.quest:p=u.filter((function(e){return e.channel===We.a.quest&&e.channelContext===h.channelContext}))}return Object(l.jsxs)("div",{className:"log ".concat(a?"expanded":""),children:[Object(l.jsxs)("div",{className:"tab-bar",children:[Object(l.jsx)(At,{className:"tabs",onTabSelected:function(e){s(e)},activeTab:i,children:m.map((function(e){return Object(l.jsx)(Et,{id:e.tabId,children:e.label},e.tabId)}))}),Object(l.jsx)(Ee,{className:"expand-button",onClick:function(){r(!a)},square:!0,size:"medium",text:a?"\u25bc":"\u25b2"})]}),Object(l.jsx)("div",{className:"log-entries",children:p.map((function(e){return function(e){var t=P.a.get(e.key,e.context);return Object(l.jsx)("div",{className:"entry",children:t},e.time)}(e)}))})]})};function oa(e,t,n,a,r){return{type:aa.start,taskType:e,name:t,origin:n,time:a,callbacks:r}}function ia(e){var t=Object(b.useCallback)((function(t){return t.structures[e]}),[e]);return Object(j.d)(t)}!function(e){e.start="startTask",e.update="updateTasks"}(aa||(aa={})),function(e){e[e.buildStructure=0]="buildStructure",e[e.upgradeStructure=1]="upgradeStructure",e[e.craftItem=2]="craftItem",e[e.studyItem=3]="studyItem"}(ra||(ra={}));var sa,ua,la=function(e){var t=e.info,n=Object(j.c)(),a=dt(),r=Object(_.b)(t.structure),c=r.cost.gold||0<=a,o=!(ia(t.structure).state===W.NotBuilt)||!c,i=P.a.getItemSubtext(t.item),s=function(e){n(Object(Ze.c)(r.cost.gold||0)),n(function(e){return{type:Ae.startBuildingStructure,structure:e}}(e));var t=[Qe(e)],a=r.cost.time,c=oa(ra.buildStructure,"".concat(e,".build"),"town",a,t);n(c)};return Object(l.jsxs)("div",{children:[i&&Object(l.jsxs)("p",{className:"subtext",children:['"',i,'"']}),Object(l.jsxs)(Ee,{disabled:o,size:"small",onClick:function(){return s(t.structure)},children:["Start construction (",r.cost.gold," gold)"]})]})},da=n(10),ma=(sa={},Object(N.a)(sa,Le.a.aegisOfValor,{item:Le.a.aegisOfValor,levelRequired:3,cost:{resources:{wood:20,iron:5},time:da.c}}),Object(N.a)(sa,Le.a.arbalest,{item:Le.a.arbalest,cost:{resources:{wood:20,iron:5},time:da.c}}),Object(N.a)(sa,Le.a.battleAxe,{item:Le.a.battleAxe,cost:{resources:{wood:20,iron:5},time:da.c}}),Object(N.a)(sa,Le.a.berserkerShield,{item:Le.a.berserkerShield,levelRequired:2,cost:{resources:{wood:20,iron:5},time:da.c}}),Object(N.a)(sa,Le.a.brassKnuckles,{item:Le.a.brassKnuckles,cost:{resources:{wood:20,iron:5},time:da.c}}),Object(N.a)(sa,Le.a.simpleCrossbow,{item:Le.a.simpleCrossbow,cost:{resources:{wood:20,iron:5},time:da.c}}),Object(N.a)(sa,Le.a.cleaver,{item:Le.a.cleaver,cost:{resources:{wood:10,iron:15},time:da.c}}),Object(N.a)(sa,Le.a.club,{item:Le.a.club,cost:{resources:{wood:30},time:da.c}}),Object(N.a)(sa,Le.a.dagger,{item:Le.a.dagger,cost:{resources:{wood:10,iron:10},time:da.d}}),Object(N.a)(sa,Le.a.flail,{item:Le.a.flail,cost:{resources:{wood:10,iron:10},time:da.d}}),Object(N.a)(sa,Le.a.goldenShield,{item:Le.a.goldenShield,levelRequired:2,cost:{resources:{wood:20,iron:5},time:da.c}}),Object(N.a)(sa,Le.a.javelin,{item:Le.a.javelin,cost:{resources:{wood:20,iron:10},time:da.d+da.c}}),Object(N.a)(sa,Le.a.khopesh,{item:Le.a.khopesh,cost:{resources:{wood:15,iron:40},time:da.g}}),Object(N.a)(sa,Le.a.longbow,{item:Le.a.longbow,cost:{resources:{wood:40,iron:5},time:da.d}}),Object(N.a)(sa,Le.a.mace,{item:Le.a.mace,cost:{resources:{wood:15,iron:10},time:da.d}}),Object(N.a)(sa,Le.a.morningStar,{item:Le.a.morningStar,cost:{resources:{wood:15,iron:15},time:da.d}}),Object(N.a)(sa,Le.a.paintedBuckler,{item:Le.a.paintedBuckler,cost:{resources:{wood:20,iron:10},time:da.d+da.c}}),Object(N.a)(sa,Le.a.poisonedDagger,{item:Le.a.poisonedDagger,cost:{resources:{wood:50,iron:15},materials:[Le.a.poisonVial],time:da.d}}),Object(N.a)(sa,Le.a.ravenStaff,{item:Le.a.ravenStaff,cost:{resources:{wood:15,iron:10,food:5},time:da.d}}),Object(N.a)(sa,Le.a.savageStaff,{item:Le.a.savageStaff,cost:{resources:{wood:15,iron:10,food:5},time:da.d}}),Object(N.a)(sa,Le.a.spear,{item:Le.a.spear,cost:{resources:{wood:15,iron:15},time:da.d}}),Object(N.a)(sa,Le.a.steelShield,{item:Le.a.steelShield,cost:{resources:{wood:15,iron:15},time:da.d}}),Object(N.a)(sa,Le.a.sword,{item:Le.a.sword,cost:{resources:{wood:10,iron:30},time:da.d}}),Object(N.a)(sa,Le.a.warhammer,{item:Le.a.warhammer,cost:{resources:{wood:10,iron:30},time:da.d}}),Object(N.a)(sa,Le.a.woodenBulwark,{item:Le.a.woodenBulwark,cost:{resources:{wood:10,iron:30},time:da.d}}),sa),pa=ma;var ba,ha,fa=(ua={},Object(N.a)(ua,Le.a.boots1,{item:Le.a.boots1,cost:{resources:{wood:10,iron:45},time:da.d}}),Object(N.a)(ua,Le.a.boots2,{item:Le.a.boots2,cost:{resources:{wood:10,iron:45},time:da.d},levelRequired:2}),Object(N.a)(ua,Le.a.boots3,{item:Le.a.boots3,cost:{resources:{wood:10,iron:45},time:da.d},levelRequired:3}),Object(N.a)(ua,Le.a.chainmailHood,{item:Le.a.chainmailHood,cost:{resources:{wood:10,iron:45},time:da.d}}),Object(N.a)(ua,Le.a.chest,{item:Le.a.chest,cost:{resources:{wood:10,iron:45},time:da.d}}),Object(N.a)(ua,Le.a.clothGloves,{item:Le.a.clothGloves,cost:{resources:{wood:10,iron:45},time:da.d}}),Object(N.a)(ua,Le.a.cowl,{item:Le.a.cowl,cost:{resources:{wood:10,iron:45},time:da.d}}),Object(N.a)(ua,Le.a.druidChest,{item:Le.a.druidHands,cost:{resources:{wood:10,iron:45},time:da.d},levelRequired:2}),Object(N.a)(ua,Le.a.druidFeet,{item:Le.a.druidFeet,cost:{resources:{wood:10,iron:45},time:da.d},levelRequired:2}),Object(N.a)(ua,Le.a.druidHands,{item:Le.a.druidHands,cost:{resources:{wood:10,iron:45},time:da.d},levelRequired:2}),Object(N.a)(ua,Le.a.druidHead,{item:Le.a.druidHead,cost:{resources:{wood:10,iron:45},time:da.d},levelRequired:2}),Object(N.a)(ua,Le.a.druidLegs,{item:Le.a.druidLegs,cost:{resources:{wood:10,iron:45},time:da.d},levelRequired:2}),Object(N.a)(ua,Le.a.fedora,{item:Le.a.fedora,cost:{resources:{wood:10,iron:45},time:da.d}}),Object(N.a)(ua,Le.a.greaves1,{item:Le.a.greaves1,cost:{resources:{wood:10,iron:45},time:da.d}}),Object(N.a)(ua,Le.a.greaves2,{item:Le.a.greaves2,cost:{resources:{wood:10,iron:45},time:da.d}}),Object(N.a)(ua,Le.a.hornedHelmet,{item:Le.a.hornedHelmet,cost:{resources:{wood:10,iron:45},time:da.d}}),Object(N.a)(ua,Le.a.leatherGloves,{item:Le.a.leatherGloves,cost:{resources:{wood:10,iron:45},time:da.d}}),Object(N.a)(ua,Le.a.nomadHelmet,{item:Le.a.nomadHelmet,cost:{resources:{wood:10,iron:45},time:da.d}}),Object(N.a)(ua,Le.a.pants1,{item:Le.a.pants1,cost:{resources:{wood:10,iron:45},time:da.d}}),Object(N.a)(ua,Le.a.pants2,{item:Le.a.pants2,cost:{resources:{wood:10,iron:45},time:da.d}}),Object(N.a)(ua,Le.a.plateChest1,{item:Le.a.plateChest1,cost:{resources:{wood:10,iron:45},time:da.d}}),Object(N.a)(ua,Le.a.plateChest2,{item:Le.a.plateChest2,cost:{resources:{wood:10,iron:45},time:da.d}}),Object(N.a)(ua,Le.a.plateChest3,{item:Le.a.plateChest3,cost:{resources:{wood:10,iron:45},time:da.d}}),Object(N.a)(ua,Le.a.plateChest4,{item:Le.a.plateChest4,cost:{resources:{wood:10,iron:45},time:da.d}}),Object(N.a)(ua,Le.a.plateGloves1,{item:Le.a.plateGloves1,cost:{resources:{wood:10,iron:45},time:da.d}}),Object(N.a)(ua,Le.a.plateGloves2,{item:Le.a.plateGloves2,cost:{resources:{wood:10,iron:45},time:da.d}}),Object(N.a)(ua,Le.a.plateHelmet,{item:Le.a.plateHelmet,cost:{resources:{wood:10,iron:45},time:da.d}}),Object(N.a)(ua,Le.a.platePants,{item:Le.a.platePants,cost:{resources:{wood:10,iron:45},time:da.d}}),Object(N.a)(ua,Le.a.plateShoulders1,{item:Le.a.plateShoulders1,cost:{resources:{wood:10,iron:45},time:da.d}}),Object(N.a)(ua,Le.a.plateShoulders2,{item:Le.a.plateShoulders2,cost:{resources:{wood:10,iron:45},time:da.d}}),Object(N.a)(ua,Le.a.robe,{item:Le.a.robe,cost:{resources:{wood:10,iron:45},time:da.d}}),Object(N.a)(ua,Le.a.shoulders1,{item:Le.a.shoulders1,cost:{resources:{wood:10,iron:45},time:da.d}}),Object(N.a)(ua,Le.a.shoulders2,{item:Le.a.shoulders2,cost:{resources:{wood:10,iron:45},time:da.d}}),Object(N.a)(ua,Le.a.shoulders3,{item:Le.a.shoulders3,cost:{resources:{wood:10,iron:45},time:da.d}}),Object(N.a)(ua,Le.a.vest,{item:Le.a.vest,cost:{resources:{wood:10,iron:45},time:da.d}}),ua),ja=(ba={},Object(N.a)(ba,Le.a.torch,{item:Le.a.torch,cost:{resources:{wood:2,fabric:1},time:da.e}}),Object(N.a)(ba,Le.a.sandwich,{item:Le.a.sandwich,cost:{resources:{food:1},time:da.e/2}}),ba),va={},ga=Object(ue.a)(Object(ue.a)(Object(ue.a)(Object(ue.a)({},va),fa),pa),ja),Oa=function(e){return ga[e]},ya=function(e){return e.tasks},wa=function(e){return Object(j.d)(function(e){return Object(mt.a)([ya],(function(t){return t.running.filter((function(t){return t.origin==="".concat(e,".craft")}))}))}(e))},xa=function(e){return Object(j.d)(function(e){return Object(mt.a)([ya],(function(t){return t.running.filter((function(t){return t.origin==="".concat(e,".study")}))}))}(e))},ka=function(e){return Object(j.d)(function(e){return Object(mt.a)([ya],(function(t){return t.running.filter((function(t){return t.name==="".concat(e,".upgrade")}))}))}(e))},Na=da.g,Ta=function(e){var t=e.structure,n=ia(t),a=xa(t),r=Object(j.c)();if(!t)return null;if(n.produces.some((function(t){return t===e.item})))return Object(l.jsxs)("p",{children:["Constructed at:\xa0",Object(l.jsx)(C.b,{to:Object(G.b)(t),children:P.a.getStructureName(t)})]});var c=a.find((function(t){return t.name===e.item}));if(c)return Object(l.jsxs)("p",{children:[Object(l.jsx)(C.b,{to:Object(G.b)(t),children:P.a.get("ui-tooltip-study-currently-studying")}),Object(da.h)(c.timeRemaining,!0)]});var o=Oa(e.item);if(n.level<(o.levelRequired||0)||n.state!==W.Built)return Object(l.jsx)("p",{className:"invalid",children:P.a.get("ui-tooltip-study-requires-structure-level",{structure:t,level:(o.levelRequired||0)+1})});return Object(l.jsx)("p",{children:Object(l.jsx)(Ee,{onClick:function(){var n=[Ge(e.structure,e.item)],a=Na,c=oa(ra.studyItem,e.item,"".concat(t,".study"),a,n);r(c)},size:"small",children:P.a.get("ui-tooltip-study-start-study")})})},Sa=function(e){var t,n=(t=e.item,va[t]?_.a.alchemist:fa[t]?_.a.armoursmith:pa[t]?_.a.weaponsmith:ja[t]?_.a.workshop:null);return Object(He.b)(e.item).unique?Object(l.jsx)("p",{children:"Unique item"}):n?Object(l.jsx)(Ta,{item:e.item,structure:n}):null},Ia=function(e){var t=e.info,n=P.a.getItemSubtext(t.item),a=P.a.getWeaponType(t.weaponType),r=P.a.getWeaponClassification(Fn.e[t.weaponType]);return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{children:[a,t.weaponType!==Fn.c.shield&&" (".concat(r,")")]}),n&&Object(l.jsxs)("p",{className:"subtext",children:['"',n,'"']}),t.damage&&Object(l.jsxs)("p",{children:[" damage: ",t.damage[Fn.a.kinetic]," "]}),Object(l.jsx)(Sa,{item:t.item})]})},Ca=function(e){var t=e.info,n=t.damageReduction,a=P.a.getItemSubtext(t.item),r=P.a.getEquipmentSlot(t.equipmentType);return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{children:"".concat(r)}),a&&Object(l.jsxs)("p",{className:"subtext",children:['"',a,'"']}),n&&Object(l.jsxs)("p",{children:[" ",P.a.get("ui-tooltip-damage-reduction",{damageReduction:n})," "]}),Object(l.jsx)(Sa,{item:t.item})]})},qa=(n(459),function(e){var t=e.info;switch(t.itemType){case Le.b.deed:return Object(l.jsx)(la,{info:t});case Le.b.weapon:return Object(l.jsx)(Ia,{info:t});case Le.b.apparel:return Object(l.jsx)(Ca,{info:t});default:var n=P.a.getItemSubtext(t.item);return n&&Object(l.jsxs)("p",{className:"subtext",children:['"',n,'"']})||null}}),Aa=(n(460),function(e){var t=e.info,n=bt(),a=dt(),r=Object(j.d)((function(e){return e.workers})),c=ft(),o=Object(j.d)((function(e){return e.structures})),i=Object(j.d)(pt);switch(t){case Fe.a.fabric:case Fe.a.food:case Fe.a.iron:case Fe.a.leather:case Fe.a.stone:case Fe.a.wood:var s=ot(n[t],0),u=n[t]>=i[t];return Object(l.jsxs)("div",{className:"resource-context",children:[Object(l.jsx)("div",{className:"info",children:P.a.get("resource-".concat(t,"-info"))}),Object(l.jsx)("div",{children:P.a.get("ui-tooltip-resource-quantity",{amount:s})}),Object(l.jsx)("div",{children:function(){var e=Object(_.c)(Fe.a[t]),n=o[e];if(n.state!==W.Built)return Object(l.jsx)("span",{children:P.a.get("ui-tooltip-resource-produce-row-notbuilt",{structure:P.a.getStructureName(e)})});var a=Object(_.b)(e).levels[n.level].generates[t],r=P.a.get("ui-tooltip-resource-produce-row",{structure:"%SPLIT%",amount:a}).split("%SPLIT%");return Object(l.jsxs)("span",{className:"produced",children:[r[0],Object(l.jsx)(C.b,{to:Object(G.b)(e),children:P.a.getStructureName(e)}),r[1]]})}()}),u&&Object(l.jsx)("div",{className:"warning-full",children:P.a.get("ui-tooltip-resource-warehouse-full",{resource:t})})]});case"gold":var d=a;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"resource-context",children:Object(l.jsx)("div",{className:"info",children:" ".concat(P.a.get("resource-".concat(t,"-info")))})}),Object(l.jsx)("div",{children:P.a.get("ui-tooltip-resource-quantity",{amount:d})})]});case"workers":var m=c,p=r;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"resource-context",children:Object(l.jsx)("div",{className:"info",children:" ".concat(P.a.get("resource-".concat(t,"-info")))})}),Object(l.jsx)("div",{children:P.a.get("ui-tooltip-workers-quantity",{free:m,total:p})})]});default:throw new Error("Uknow value "+t)}}),Ea=(n(461),function(e){var t=e.className,n=e.children,a=Object(ce.a)(e,["className","children"]);return console.log(t),Object(l.jsx)("div",Object(ue.a)(Object(ue.a)({},a),{},{className:"info-window ".concat(t||""),children:n}))});n(462);!function(e){e[e.bottom=0]="bottom",e[e.top=1]="top",e[e.left=2]="left",e[e.right=3]="right"}(ha||(ha={}));var Ra=function(e){var t=e.children,n=e.referenceRect,a=e.className,r=void 0===a?"":a,c=Object(b.useRef)(null),o=Object(b.useState)(e.placement||ha.bottom),i=Object(T.a)(o,2),s=i[0],u=i[1],d=Object(b.useState)(),m=Object(T.a)(d,2),p=m[0],h=m[1];Object(b.useEffect)((function(){var e=c.current;if(e&&p){var t=e.getBoundingClientRect();switch(s){case ha.top:if(t.top-t.height-8-8<p.top)return void u(ha.bottom);break;case ha.bottom:if(t.top+t.height+8+8>p.height)return void u(ha.top)}e.style.opacity="1";var n=e.querySelector(".tooltip-content");if(t.left<p.left+8){var a=p.left-t.left+8;n.style.transform="translateX(".concat(a,"px)")}else if(t.right>p.right-8){var r=t.right-p.right+8;n.style.transform="translateX(".concat(-r,"px)")}else n.style.transform=""}}),[u,p,s,n]);var f=function(){lt.clear()};Object(b.useEffect)((function(){var e,t;return h(null===(e=c.current)||void 0===e||null===(t=e.closest(".app"))||void 0===t?void 0:t.getBoundingClientRect()),window.addEventListener("resize",f),function(){window.removeEventListener("resize",f)}}),[]);var j=0,v=0;if(p)switch(s){case ha.bottom:j=n.left-p.left+n.width/2,v=n.top-p.top+n.height,r+=" tooltip-bottom";break;case ha.top:j=n.left-p.left+n.width/2,v=n.top-p.top,r+=" tooltip-top"}return Object(l.jsxs)("div",{className:"tooltip ".concat(r),style:{left:j,opacity:0,top:v},ref:c,children:[Object(l.jsx)("div",{className:"tooltip-arrow"}),Object(l.jsx)(Ea,{className:"tooltip-content",children:t})]})},Pa=(n(463),function(e){var t=e.traitDefinition;return Object(l.jsxs)("div",{className:"trait-context",children:[Object(l.jsx)("div",{className:"description",children:P.a.getTraitDescription(t.trait)}),t.hasEffect&&Object(l.jsx)("div",{className:"effect",children:P.a.getTraitEffect(t.trait)})]})}),Da=(n(464),function(){var e=Object(b.useState)(),t=Object(T.a)(e,2),n=t[0],a=t[1],r=function(e){a(e)};if(Object(b.useEffect)((function(){return lt.addEventListener(lt.EVENT_CONTEXT_UPDATED,r),function(){lt.removeEventListener(lt.EVENT_CONTEXT_UPDATED,r)}}),[]),!n)return null;var c=n.info,o=n.type,i=n.className;return Object(l.jsx)(Ra,{referenceRect:n.referenceRect,className:i,children:Object(l.jsx)("div",{className:"context-tooltip",children:function(){switch(o){case $e.resource:var e=P.a.getResourceName(c);return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"name resource",children:e}),Object(l.jsx)(Aa,{info:c})]});case $e.item:var t=P.a.getItemName(c.item),a=c;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"name item ".concat(Ma(a)),children:t}),Object(l.jsx)(qa,{info:a})]});case $e.trait:var r=c,i=P.a.getTraitName(r.trait);return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"name trait",children:[P.a.get("ui-tooltip-type-trait"),i]}),Object(l.jsx)(Pa,{traitDefinition:r})]});case $e.skill:var s=c,u=P.a.getSkillName(s);return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"name skill",children:[P.a.get("ui-tooltip-type-skill"),u]}),P.a.getSkillInfo(s)]});case $e.component:return c;default:throw new Error("Unknown context type ".concat(n.type))}}()})})}),Ma=function(e){switch(e.rarity){case xn.a.common:return"item-name-common";case xn.a.uncommon:return"item-name-uncommon";case xn.a.rare:return"item-name-rare";case xn.a.epic:return"item-name-epic";case xn.a.legendary:return"item-name-legendary"}return"item-name-common"},Ha=(n(465),function(){Object(b.useRef)();var e=Object(b.useRef)(new K.Filter("",Wa,La));return Object(b.useEffect)((function(){requestAnimationFrame((function t(n){e.current.uniforms.time=(n||0)/1e3,requestAnimationFrame(t)}))}),[]),null}),La={resolution:{type:"2f",value:{x:window.innerWidth,y:window.innerHeight}},alpha:{type:"1f",value:1},shift:{type:"1f",value:1.6},time:{type:"1f",value:0},speed:{type:"2f",value:{x:.7,y:.4}}},Wa="\n    precision mediump float;\n    uniform vec2      resolution;\n    uniform float     time;\n    uniform float     alpha;\n    uniform vec2      speed;\n    uniform float     shift;\n\n    float rand(vec2 n) {\n        return fract(cos(dot(n, vec2(12.9898, 4.1414))) * 43758.5453);\n    }\n\n    float noise(vec2 n) {\n    const vec2 d = vec2(0.0, 1.0);\n    vec2 b = floor(n), f = smoothstep(vec2(0.0), vec2(1.0), fract(n));\n        return mix(mix(rand(b), rand(b + d.yx), f.x), mix(rand(b + d.xy), rand(b + d.yy), f.x), f.y);\n    }\n\n    float fbm(vec2 n) {\n    float total = 0.0, amplitude = 1.0;\n    for (int i = 0; i < 4; i++) {\n        total += noise(n) * amplitude;\n        n += n;\n        amplitude *= 0.5;\n    }\n\n    return total;\n    }\n\n    void main() {\n    const vec3 c1 = vec3(126.0/255.0, 0.0/255.0, 97.0/255.0);\n    const vec3 c2 = vec3(173.0/255.0, 0.0/255.0, 161.4/255.0);\n    const vec3 c3 = vec3(0.2, 0.0, 0.0);\n    const vec3 c4 = vec3(164.0/255.0, 1.0/255.0, 214.4/255.0);\n    const vec3 c5 = vec3(0.1);\n    const vec3 c6 = vec3(0.9);\n\n    vec2 p = gl_FragCoord.xy * 8.0 / resolution.xx;\n    float q = fbm(p - time * 0.1);\n    vec2 r = vec2(fbm(p + q + time * speed.x - p.x - p.y), fbm(p + q - time * speed.y));\n    vec3 c = mix(c1, c2, fbm(p + r)) + mix(c3, c4, r.x) - mix(c5, c6, r.y);\n    float grad = gl_FragCoord.y / resolution.y;\n    gl_FragColor = vec4(c * cos(shift * gl_FragCoord.y / resolution.y), 1.0);\n    gl_FragColor.xyz *= 1.0-grad;\n    }\n",Fa=["sound/fx/button-click.ogg","sound/fx/error.ogg","sound/fx/toast.ogg","sound/music/Soliloquy.mp3","sound/music/TheLoomingBattle.ogg"],Va=n(32),za=function(e,t){if(t>6)throw new Error("Cannot possibly have more than ".concat(6," on one item!"));return e-.1*e*(t-1)},Qa=(n(466),function(e){var t;return t=null==e.max?e.value:Object(l.jsxs)("span",{children:[e.value," / ",Object(l.jsx)("span",{className:"max",children:e.max})]}),Object(l.jsxs)("div",{className:"updownvalue",children:[Object(l.jsxs)("label",{children:[" ",e.label]}),t,Object(l.jsx)("i",{className:"arrow up"+(e.upDisabled?" disabled":""),onClick:function(t){e.onUp&&!e.upDisabled&&e.onUp(t)}}),Object(l.jsx)("i",{className:"arrow down"+(e.downDisabled?" disabled":""),onClick:function(t){e.onDown&&!e.downDisabled&&e.onDown(t)}})]})}),_a=(n(244),function(e){var t=e.resources,n=bt(),a=Object(b.useMemo)((function(){return Object.keys(t).reduce((function(e,a){return e[a]=n[a]>=t[a],e}),{})}),[t,n]),r=(e.className||"")+" resourcesbox",c=Object.keys(e.resources).map((function(t){var n="resource";a&&!a[t]&&(n+=" insufficient");var r=Fe.b[t];if(!r)throw new Error("No resource description found for ".concat(t));return Object(l.jsxs)("li",{className:n,children:[Object(l.jsx)(jt.b,{image:r.iconImg,size:"small"}),Object(l.jsx)("div",{className:"name",children:P.a.getResourceName(t)}),Object(l.jsx)("div",{className:"amount",children:e.resources[t]})]},t)}));return Object(l.jsx)("ul",{className:r,children:c})}),Ba=(n(467),function(e){var t=e.items,n=(e.className||"")+" items-box",a=t.reduce((function(e,t){return e[t]||(e[t]=0),e[t]++,e}),{}),r=Ln(),c=Object(b.useMemo)((function(){var e=Object(o.a)(r),n=[];return t.forEach((function(t){var a=e.findIndex((function(e){return e===t}));if(a>-1){var r=e.splice(a,1),c=Object(T.a)(r,1)[0];c&&n.push(c)}})),n}),[t,r]),i=Object.keys(a).map((function(e){var t=e,n=a[e],r="item";n>(c?c.filter((function(e){return e===t})).length:0)&&(r+=" missing");var o=He.a[t];return Object(l.jsxs)("li",{className:r,children:[Object(l.jsx)(jt.b,{image:o.iconImg,size:"smallest"}),Object(l.jsx)("div",{className:"name",children:"".concat(P.a.getItemName(t)," (").concat(n,")")})]},t)}));return Object(l.jsx)("ul",{className:n,children:i})}),Ga=(n(468),function(e){return Object(l.jsx)("div",{className:"structureview-header structureview-header-".concat(e.structure)})}),Ua=function(e){var t=e.structure,n=e.onHelpClicked,a=Object(j.c)(),r=dt(),c=ia(t).level,o=Object(_.b)(e.structure),i=o.levels[c+1],s=null!=i?i.cost.gold||0:-1,u=null!=i&&r>=s,d=null==i?P.a.get("ui-structure-upgrade-max"):P.a.get("ui-structure-upgrade",{cost:s,level:c+2}),m=ka(t);if(m.length){var p=m[0];return Object(l.jsx)(Qn,{className:"upgrading",label:"".concat(P.a.get("structure-upgrade-button-upgrading")," (").concat(Object(da.h)(p.timeRemaining),")"),progress:p.progress},"".concat(p.name).concat(p.startTime))}return Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{children:P.a.get("ui-structure-level")}),"".concat(c+1," / ").concat(o.levels.length),u&&Object(l.jsx)(Ee,{className:"help",square:!0,onClick:n,children:"?"}),Object(l.jsx)(Ee,{className:"upgrade",onClick:function(){!function(e){a(Object(Ze.c)(e));var n=[_e(t),Object(y.c)("log-town-upgrade-structure-complete",{level:c+1,structure:t},We.a.town)],r=i.cost.time,o=oa(ra.upgradeStructure,"".concat(t,".upgrade"),"town",r,n);a(o)}(s)},disabled:!u,children:d})]})},Xa=(n(469),function(e){var t=e.structure,n=Object(b.useState)(),a=Object(T.a)(n,2),r=a[0],c=a[1],o=Object(b.useState)(0),i=Object(T.a)(o,2),s=i[0],u=i[1],d=Object(j.c)(),m=bt(),p=Ln(),h=ft(),f=wa(t),v=xa(t);if(!Object(_.b)(e.structure))throw new Error("No definition found for structure ".concat(e.structure,"\n            with type ProductionStructureDefinition."));var g=ia(t),O=P.a.getStructureName(e.structure),y=function(e,n){var a,r=za(e.cost.time||0,n);d((a=e.cost.resources||{},{type:qe.removeResources,resources:a})),d(Be(t,n));var c=[Je(e.item),Be(t,n)],o=oa(ra.craftItem,e.item,"".concat(t,".craft"),r,c);d(o)};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(Ga,{structure:e.structure}),Object(l.jsxs)("details",{open:!0,className:"production-structure-view",children:[Object(l.jsx)("summary",{children:O}),Object(l.jsxs)("section",{children:[Object(l.jsx)(Ua,{structure:t}),Object(l.jsx)("div",{children:"craft:"}),Object(l.jsxs)("div",{className:"crafting-area",children:[Object(l.jsx)("ul",{className:"vertical-tab-bar",children:g.produces.map((function(e){return Object(l.jsxs)("li",{onClick:function(t){t.stopPropagation(),c(e)},className:r===e?"selected":"",children:[Object(l.jsx)(kn,{item:e,size:jt.a.small}),P.a.getItemName(e)]},"craft".concat(e))}))}),function(){var e=r;if(!e)return null;var t=Oa(e),n=t.cost.resources,a=Object.keys(n).some((function(e){return n[e]>m[e]})),c=!1,o=t.cost.materials;o&&(c=o.some((function(e){return-1===p.indexOf(e)})));var i=a||c||s<1;return Object(l.jsxs)("div",{className:"crafting-details",children:[P.a.get("ui-structure-production-craft-a",{item:e}),Object(l.jsxs)("div",{className:"crafting-costs",children:[Object(l.jsx)("fieldset",{children:Object(l.jsx)(_a,{resources:n})}),Object(l.jsx)("fieldset",{children:o&&Object(l.jsx)(Ba,{items:o})})]}),Object(l.jsxs)("div",{className:"buttonrow",children:[Object(l.jsxs)("div",{children:[Object(l.jsx)(Qa,{value:s,label:P.a.get("ui-structure-production-workers"),onUp:function(e){e.stopPropagation(),u(s+1)},onDown:function(e){e.stopPropagation(),u(s-1)},upDisabled:s>=h||s>=6,downDisabled:s<1}),function(e){if(0===s)return"";var t=za(e,s),n=Object(da.h)(t);return P.a.get("ui-structure-production-crafting-time",{time:n})}(t.cost.time||0)]}),Object(l.jsx)("div",{children:Object(l.jsx)(Ee,{disabled:i,className:"craft",onClick:function(e){e.stopPropagation(),y(t,s),u(0)},children:P.a.get("ui-structure-production-craft")})})]})]})}()]}),Object(l.jsxs)("fieldset",{children:[Object(l.jsx)("legend",{children:P.a.get("ui-structure-production-crafting")}),f.map((function(e){return Object(l.jsx)(Qn,{label:"".concat(e.name," (").concat(Object(da.h)(e.timeRemaining),")"),progress:e.progress},"".concat(e.name).concat(e.startTime))}))]}),v.length>0&&Object(l.jsxs)("fieldset",{children:[Object(l.jsx)("legend",{children:P.a.get("ui-structure-production-studying")}),v.map((function(e){return Object(l.jsx)(Qn,{label:"".concat(e.name," (").concat(Object(da.h)(e.timeRemaining),")"),progress:e.progress},"".concat(e.name).concat(e.startTime))}))]})]})]})]})}),Ya=me((function(e){var t=e.sufficientResources,n=e.resources,a=e.deltaResources,r=Object(j.d)((function(e){return e.structures})),c=(e.className||"")+" resourcesbox",o=Object.keys(n).map((function(n){var c="resource";t&&!t[n]&&(c+=" insufficient");var o,i=Fe.b[n],s=e.resources[n];if(!i)throw new Error("No resource description found for ".concat(n));a[n]&&(o=Object(l.jsx)("span",{className:"animate-up",children:"+ ".concat(a[n].toFixed(2))}));var u=Object(_.c)(Fe.a[n]),d=s>=e.maxResources[n];return Object(l.jsxs)("li",{className:c,children:[Object(l.jsx)(jt.b,{image:i.iconImg,size:"small"}),Object(l.jsx)("div",{className:"name",children:P.a.getResourceName(n)}),Object(l.jsx)("div",{className:"amount".concat(d?" full":""),children:ot(s,0)}),Object(l.jsx)("div",{className:"max",children:" / ".concat(e.maxResources[n])}),Object(l.jsx)("div",{className:"delta",children:o}),Object(l.jsxs)("div",{className:"structure",children:["source:",r[u].state===W.Built?Object(l.jsx)(C.b,{to:Object(G.b)(u),onClick:function(){e.onCloseWindow()},children:P.a.getStructureName(u)}):P.a.getStructureName(u)]})]},n)}));return Object(l.jsx)("ul",{className:c,children:o})})),Za=function(e){var t=Object(b.useRef)();return Object(b.useEffect)((function(){t.current=e})),t.current},Ja={fabric:0,food:0,iron:10,leather:0,stone:0,wood:10},Ka={fabric:0,food:0,iron:0,leather:0,stone:0,wood:0},$a=(n(470),function(e){var t=e.level,n=Object(_.b)(_.a.warehouse),a=n.levels[t],r=n.levels[t+1];return Object(l.jsxs)("div",{className:"upgrade-help-modal",children:[Object(l.jsxs)("div",{className:"top",children:[Object(l.jsx)("h3",{children:P.a.get("ui-structure-help-upgrade-title",{structure:_.a.warehouse})}),Object(l.jsxs)("div",{className:"cost",children:[Object(l.jsx)("section",{children:P.a.get("ui-structure-help-upgrade-cost-gold",{gold:r.cost.gold})}),r.cost.time&&Object(l.jsx)("section",{children:Object(da.h)(r.cost.time)})]})]}),Object(l.jsxs)("div",{className:"storage-increase",children:[Object(l.jsx)("div",{className:"header"}),Object(l.jsx)("div",{className:"header",children:P.a.get("ui-structure-warehouse-help-upgrade-header-capacity")}),Object(l.jsx)("div",{className:"header number",children:P.a.get("ui-structure-warehouse-help-upgrade-header-level",{level:t+1})}),Object(l.jsx)("div",{className:"header"}),Object(l.jsx)("div",{className:"header number",children:P.a.get("ui-structure-warehouse-help-upgrade-header-level",{level:t+2})}),Object.keys(r.maxResources).map((function(e){return function(e){var t=Fe.b[e];return Object(l.jsxs)(b.Fragment,{children:[Object(l.jsx)("div",{children:Object(l.jsx)(jt.b,{image:t.iconImg,size:"smallest"})}),Object(l.jsx)("div",{children:P.a.getResourceName(e)}),Object(l.jsx)("div",{className:"number",children:a.maxResources[e]}),Object(l.jsx)("div",{className:"arrow",children:"\u27f6"}),Object(l.jsx)("div",{className:"number",children:r.maxResources[e]})]},e)}(Fe.a[e])}))]})]})}),er=(n(471),wn.a.warehouse),tr=function(){var e,t=rn(),n=Object(b.useState)(null===(e=t[0])||void 0===e?void 0:e.id),a=Object(T.a)(n,2),r=a[0],c=a[1],o=bt(),i=Object(b.useState)(Ka),s=Object(T.a)(i,2),u=s[0],d=s[1],m=Za(o),p=Object(b.useRef)(null),h=Ln(),f=Object(j.d)((function(e){return e.structures})),v=Wn().dropItemWarehouse;Object(b.useEffect)((function(){var e=Object.keys(o).reduce((function(e,t){return m&&m[t]&&(e[t]=o[t]-m[t]),e}),{});d(e)}),[o,m]),Object(b.useEffect)((function(){if(p.current){var e=p.current;e.classList.remove("animate"),setTimeout((function(){p&&e.classList.add("animate")}),200)}}),[u]);var g=Object(_.b)(_.a.warehouse);if(!g)throw new Error("No definition found for structure ".concat(_.a.warehouse," with type StructureDefinition."));var O=ia(_.a.warehouse),y=g.levels[O.level],w=P.a.getStructureName(_.a.warehouse);return Object(l.jsxs)("details",{open:!0,className:"warehouse-structureview",children:[Object(l.jsx)("summary",{children:w}),Object(l.jsx)(Ua,{structure:_.a.warehouse,onHelpClicked:function(e){var t=e.currentTarget.getBoundingClientRect(),n=Object(l.jsx)($a,{level:O.level});lt.showContextTooltip($e.component,n,t,"upgrade-structure-tooltip"),e.stopPropagation()}}),Object(l.jsxs)("fieldset",{className:"resources",ref:p,children:[Object(l.jsx)("legend",{children:P.a.get("ui-structure-warehouse-resources")}),Object(l.jsx)(Ya,{resources:o,structures:f,maxResources:y.maxResources,deltaResources:u})]}),Object(l.jsx)("h3",{children:P.a.get("ui-structure-warehouse-stockpile")}),Object(l.jsx)(Mn,{sourceType:er,className:"inventory-large",items:h,onDropItem:function(e,t,n,a,r){v(e,t,n,a,r)}}),Object(l.jsx)("h3",{children:P.a.get("ui-structure-warehouse-adventurers")}),Object(l.jsxs)("div",{children:[Object(l.jsx)(Pt,{adventurers:t,selectedAdventurerId:r,onAdventurerTabSelected:function(e){c(e)}}),Object(l.jsx)("div",{className:"adventurer-inventory",children:r&&Object(l.jsx)($n,{adventurerId:r,horizontalMode:!0,traits:!1,skills:!1})})]})]})},nr=(n(472),Object(Rn.a)(wn.b.ADVENTURER,{drop:function(e,t){e.onDrop(t.getItem())},canDrop:function(e,t){return!0}},(function(e,t){return{canDrop:t.canDrop(),connectDropTarget:e.dropTarget(),isOver:t.isOver()}}))((function(e){var t=e.isOver,n=e.canDrop,a="droppable-adventurer-slot";return t?a+=" active-drop":n&&(a+=" can-drop"),(0,e.connectDropTarget)(Object(l.jsx)("div",{className:a}))}))),ar=(n(473),function(e){return Object(l.jsx)("ul",{className:"assign-adventurers",children:function(){for(var t=[],n=function(n){var a=void 0,r="";if(!!e.assignedAventurers[n]){var c=e.assignedAventurers[n];a=Object(l.jsx)(Rt,{adventurer:c,displayName:!1,size:jt.a.small,onClick:function(){return e.onAdventurerClicked(c)}}),r="has-adventurer"}else a=Object(l.jsx)(nr,{onDrop:function(t){e.onAdventurerDropped(t,n)}});t.push(Object(l.jsx)("li",{className:r,children:a},"slot".concat(n)))},a=0;a<e.availableSlots;a++)n(a);return t}()})}),rr=(n(474),function(e){var t=Object(j.d)((function(e){return e.stockpile})),n=function(e){return!e.requiredItems||e.requiredItems.every((function(n){var a=e.requiredItems.filter((function(e){return e===n})).length;return t.filter((function(e){return e===n})).length>=a}))};return Object(l.jsxs)("div",{className:"quest-board",children:[Object(l.jsx)("h2",{children:P.a.get("structure-tavern-title-quest-board")}),Object(l.jsx)("ul",{className:"quest-list",children:e.availableQuests.map((function(t){var n="quest ".concat(t.name===e.selectedQuestName?" selected":"");return Object(l.jsxs)("li",{className:n,onClick:function(){e.onQuestClick(t.name)},children:[Object(l.jsx)("div",{className:"icon",style:{backgroundImage:"url(".concat(".",")")}}),Object(l.jsxs)("div",{className:"title",children:[P.a.getQuestTitle(t.name)," "]})]},t.name)}))}),function(){if(!e.selectedQuestName)return null;var t=e.availableQuests.find((function(t){return t.name===e.selectedQuestName}));if(!t)return Object(l.jsxs)("div",{children:[" ",P.a.get("structure-tavern-quest-launched")," "]});var a=Object(Nt.b)(t.name),r=e.assignedAventurers.filter((function(e){return null!==e})).length>=3,c=n(a),o=r&&c;return Object(l.jsxs)("div",{className:"quest-details",children:[P.a.getQuestDescription(e.selectedQuestName),Object(l.jsx)(ar,{availableSlots:5,assignedAventurers:e.assignedAventurers,onAdventurerClicked:e.onRemoveAdventurer,onAdventurerDropped:e.onAdventurerDropped}),Object(l.jsx)(Ba,{items:a.requiredItems||[]}),Object(l.jsx)(Ee,{disabled:!o,onClick:function(){return e.onLaunchQuest()},children:P.a.get("structure-tavern-button-launch-quest")})]})}()]})}),cr=(n(475),function(e){var t=e.adventurer,n=e.assignedAventurers,a=e.questName,r=e.onAddAdventurer,c=e.onRemoveAdventurer,o=n.indexOf(t)>-1,i=P.a.getQuestTitle(a);return o?Object(l.jsx)(Ee,{onClick:function(){c(t)},className:"adventurer-button",children:P.a.get("structure-tavern-button-leave-quest")}):5===n.filter(Boolean).length?Object(l.jsx)(Ee,{disabled:!0,className:"adventurer-button",children:P.a.get("structure-tavern-button-join-quest-full-party")}):Object(l.jsx)(Ee,{onClick:function(){var e=or(n);r(t,e)},className:"adventurer-button",children:P.a.get("structure-tavern-button-join-quest",{quest:i})})}),or=function(e){for(var t=0;t<5;t++)if(!e[t])return t;return 0},ir=(n(476),{beginDrag:function(e){return{adventurer:e.adventurer,sourceId:e.sourceId,sourceType:wn.a.adventurerInventory}}});var sr,ur=Object(Sn.a)(wn.b.ADVENTURER,ir,(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}}))((function(e){var t=e.isDragging,n=e.connectDragSource,a="draggable-adventurer-avatar";return e.disabled&&(a+=" disabled"),t&&(a+=" dragging"),n(Object(l.jsx)("div",{className:a,children:Object(l.jsx)(Rt,Object(ue.a)({},e))}))})),lr=function(e){var t=e.adventurer,n=e.onQuest,a=e.assignedAventurers,r=e.expanded,c=e.selectedQuestName,o=e.onClick,i=e.onAddAdventurer,s=e.onRemoveAdventurer,u=a.indexOf(t)>-1;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"room ".concat(r?"expanded":""),children:[Object(l.jsx)(ur,{disabled:u||n,adventurer:t,className:"adventurer-icon",sourceId:pr},"avatar:".concat(t.id)),Object(l.jsxs)("span",{onClick:function(){return o(t)},children:[t.name,n&&P.a.get("structure-tavern-on-a-quest")]},t.id)]}),r&&Object(l.jsxs)("div",{className:"adventurer-details",children:[Object(l.jsx)($n,{adventurerId:t.id,name:!1}),!n&&c&&Object(l.jsx)(cr,{adventurer:t,assignedAventurers:a,questName:c,onAddAdventurer:i,onRemoveAdventurer:s})]})]})},dr=function(){return Object(l.jsx)("div",{className:"room",children:"(empty room)"})},mr=function(e){for(var t=e.roomCount,n=e.adventurers,a=e.assignedAventurers,r=e.selectedQuestName,c=e.onAddAdventurer,o=e.onRemoveAdventurer,i=Object(b.useState)(),s=Object(T.a)(i,2),u=s[0],d=s[1],m=function(e){u===e.id?d(void 0):d(e.id)},p=[],h=function(t){var i=n.find((function(e){return e.room===t}));if(!i)return p.push(Object(l.jsx)(dr,{},"room".concat(t))),"continue";var s,d=(s=i.id,!!Object.values(e.quests).find((function(e){return e.party.indexOf(s)>-1})));p.push(Object(l.jsx)(lr,{adventurer:i,assignedAventurers:a,selectedQuestName:r,expanded:u===i.id,onQuest:d,onClick:m,onAddAdventurer:c,onRemoveAdventurer:o},i.id))},f=0;f<t;f++)h(f);return Object(l.jsxs)("div",{className:"rooms",children:[Object(l.jsx)("h2",{children:"Rooms"}),p]})},pr=(n(477),"tavern"),br=function(){var e=ia(_.a.tavern).level,t=Object(j.d)((function(e){return e.adventurers})),n=Object(j.d)((function(e){return e.quests})),a=Object(b.useState)([]),r=Object(T.a)(a,2),c=r[0],i=r[1],s=Object(b.useState)(),u=Object(T.a)(s,2),d=u[0],m=u[1],p=Object(_.b)(_.a.tavern).levels[e],h=P.a.getStructureName(_.a.tavern),f=Object(j.c)(),v=n.filter((function(e){return e.status===yt.available})),g=function(e,t){var n=Object(o.a)(c);n[t]=e,i(n)},O=function(e){var t=c.indexOf(e),n=Object(o.a)(c);delete n[t],i(n)},y=function(){var e,t=P.a.getQuestTitle(d),n=c[0];Se.a.addToast(t,Ie.a.questLaunched,null===n||void 0===n?void 0:n.avatarImg,Object(G.a)(d)),e=d,f(Object(Ut.f)(e,c))};return Object(l.jsxs)("details",{open:!0,className:"tavernstructureview",children:[Object(l.jsx)("summary",{children:h}),Object(l.jsx)(Ua,{structure:_.a.tavern}),Object(l.jsxs)("section",{children:[Object(l.jsx)(mr,{roomCount:p.rooms,adventurers:t,assignedAventurers:c,quests:n,selectedQuestName:d,onAddAdventurer:g,onRemoveAdventurer:O}),Object(l.jsx)(rr,{availableQuests:v,selectedQuestName:d,assignedAventurers:c,onQuestClick:function(e){return function(e){m(d===e?void 0:e),i([])}(e)},onAdventurerDropped:function(e,t){e.sourceId===pr&&g(e.adventurer,t)},onRemoveAdventurer:O,onLaunchQuest:function(){return y()}})]})]})},hr=(n(478),function(e){var t=e.structure,n=Object(j.d)((function(t){var n=t.structures[e.structure];if(!n)throw new Error("No structure '".concat(e.structure,"' found in the store!"));return n.level})),a=Object(j.d)((function(t){var n=t.structures[e.structure];if(!n)throw new Error("No structure '".concat(e.structure,"' found in the store!"));return n.workers})),r=Object(j.d)((function(e){return ht(e)})),c=Object(_.b)(e.structure);if(!c)throw new Error("No definition found for structure ".concat(e.structure," with type ResourceStructureDefinition."));var o=Object(j.c)(),i=function(){o(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{type:Ae.decreaseWorkers,structure:e,workers:t}}(e.structure))},s=function(){o(Be(e.structure))},u=c.levels[n];return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(Ga,{structure:e.structure}),Object(l.jsx)("details",{open:!0,className:"resource-structure-view",children:Object(l.jsxs)("section",{children:[function(){var e=a===u.workerCapacity||(r||0)<1,t=0===a;return Object(l.jsx)(Qa,{label:P.a.get("ui-structure-production-workers"),value:a,max:u.workerCapacity,upDisabled:e,downDisabled:t,onDown:i,onUp:s})}(),Object(l.jsx)(Ua,{structure:t}),function(){var e=u.generates,t=Object.keys(e).reduce((function(t,n){return e[n]&&t.push("".concat(e[n]," x ").concat(a," = ").concat(e[n]*(a||0)," ").concat(n)),t}),[]).join(",");return Object(l.jsxs)("div",{children:["Generates (every minute): ",Object(l.jsx)("br",{}),t]})}()]})})]})}),fr=(n(479),Pe((function(e){var t=Object(j.d)((function(e){return e.tasks})).running.filter((function(t){return"town"===t.origin&&t.name==="".concat(e.structure,".build")}))[0],n=ia(e.structure);return Object(l.jsx)("div",{className:"structure-details",children:function(){if(n.state===W.Building)return t?Object(l.jsx)("div",{className:"building",children:Object(l.jsx)(Qn,{progress:t.progress,label:"Building... (".concat(Object(da.h)(t.timeRemaining),")")})}):null;switch(Object(_.b)(e.structure).type){case Va.a.production:return Object(l.jsx)(Xa,{structure:e.structure});case Va.a.resource:return Object(l.jsx)(hr,{structure:e.structure});case Va.a.warehouse:return Object(l.jsx)(tr,{});case Va.a.tavern:return Object(l.jsx)(br,{});default:return Object(l.jsxs)("div",{children:[" ",e.structure," "]})}}()})})));n(480);A.a.registerPIXI(PIXI),E.b.registerPlugin(A.a),function(e){e[e.Town=0]="Town",e[e.World=1]="World"}(sr||(sr={}));var jr,vr=960,gr=Object(b.createContext)(null),Or=function(e){var t=Object(b.useRef)(null),n=Object(b.useState)([]),a=Object(T.a)(n,2),r=a[0],c=a[1],i=Object(b.useState)([]),s=Object(T.a)(i,2),u=s[0],d=s[1],m=function(){R.c.playSound(R.b.buttonClick)},p=function(e){if(e){var t=P.a.getStructureName(e);h(Object(l.jsx)(fr,{structure:e,title:t})),R.c.playSound(R.b.buttonClick)}},h=function(e){d([].concat(Object(o.a)(u||[]),[e]))},f=function(){d([])},j=function(){u&&u.length&&d(u.slice(0,-1))};return Object(b.useEffect)((function(){var e=M()((function(){lt.clear()}),100);return window.addEventListener("scroll",e),window.addEventListener("wheel",e),function(){window.removeEventListener("resize",e),window.removeEventListener("wheel",e)}}),[]),Object(l.jsxs)(gr.Provider,{value:{media:r,onOpenWindow:h,onCloseWindow:f},children:[Object(l.jsx)(Ha,{}),Object(l.jsx)("div",{className:"app",ref:t,style:{maxWidth:vr},onClick:function(){lt.clear()},children:Object(l.jsx)(S.a,{backend:I.a,children:Object(l.jsx)(C.a,{children:Object(l.jsxs)(Q,{manifest:Fa,onLoadComplete:function(e){var t,n=e.filter((function(e){return e.mediaType===O.sound}));R.c.loadMedia(n),R.c.addSounds((t={},Object(N.a)(t,R.b.buttonClick,"sound/fx/button-click.ogg"),Object(N.a)(t,R.b.error,"sound/fx/error.ogg"),Object(N.a)(t,R.b.toast,"sound/fx/toast.ogg"),t)),c(e)},children:[Object(l.jsx)(gt,{persistor:e.persistor}),Object(l.jsxs)("div",{style:{margin:"4px 0 0 8px"},children:[Object(l.jsxs)(q.d,{children:[Object(l.jsx)(q.b,{path:"/",exact:!0,children:Object(l.jsx)(q.a,{from:"/",to:Object(G.d)()})}),Object(l.jsx)(q.b,{path:Object(G.d)(),children:Object(l.jsx)(C.b,{to:Object(G.c)(),children:Object(l.jsxs)(Ee,{onClick:function(){return m()},color:"green",children:[" ",P.a.get("ui-view-button-town")," "]})})}),Object(l.jsx)(q.b,{path:Object(G.c)(),children:Object(l.jsx)(C.b,{to:Object(G.d)(),children:Object(l.jsxs)(Ee,{onClick:function(){return m()},children:[" ",P.a.get("ui-view-button-world")," "]})})})]})," | ",Object(l.jsx)(Ee,{onClick:function(){gc()},color:X.purple,children:" Restart! "})]}),Object(l.jsxs)(q.d,{children:[Object(l.jsx)(q.b,{path:Object(G.c)(),render:function(){return Object(l.jsx)(ke,{onStructureClick:p})}}),Object(l.jsx)(q.b,{path:Object(G.d)(),render:function(){return Object(l.jsx)(na,{})}})]}),Object(l.jsx)(ca,{}),function(){if(!u.length)return null;var e=u[u.length-1],t={onClose:f,onBack:j,backEnabled:u.length>1,closeEnabled:!0};return b.cloneElement(e,t)}(),Object(l.jsx)(Da,{}),Object(l.jsx)(Ce,{})]})})})})]})},yr=function(e,t){var n=t.structures,a={},r=tt(Ye.resourceGeneration),c=(Date.now()-e)/(2e4/r),o=pt(t);return c<1?null:(Object.keys(n).forEach((function(e){return function(e){var t=Object(_.b)(e);if(t.type===Va.a.resource){var r=t,o=n[e].level,i=r.levels[o];Object.keys(i.generates).reduce((function(t,a){var r=i.generates[a]*n[e].workers*c;return t[a]=(t[a]||0)+r,t}),a)}}(e)})),Object.keys(a).forEach((function(e){a[e]&&t.resources[e]+a[e]>=o[e]&&(a[e]=o[e]-t.resources[e])})),a)},wr=function(e,t){var n=tt(Ye.questProgress),a=[],r=[],c=t.getState();return c.quests.forEach((function(o){if(o.status===yt.active){var i=Nt.a[o.name],s=o.progress,u=Math.floor(s);if(i.nodes[u].type===Ot.a.nothing){for(var l=e/(6e4/n)*4,d=Math.min(s+l,i.nodes.length-1),m=Math.floor(d)-u,p=1;p<=m;p++){var b=i.nodes[u+p];if(b.type===Ot.a.encounter){t.dispatch(Object(Ut.i)(o.name,b.startScene));var h=P.a.getQuestTitle(o.name),f=Object(Tt.c)(c.adventurers,o);Se.a.addToast(h,Ie.a.questEncounter,null===f||void 0===f?void 0:f.avatarImg,Object(G.a)(o.name)),b.log&&a.push({channel:We.a.quest,channelContext:o.name,key:b.log});break}b.type===Ot.a.nothing&&b.log&&a.push({channel:We.a.quest,channelContext:o.name,key:b.log})}r.push({name:o.name,progress:d})}}})),{logUpdates:a,questUpdates:r}},xr=n(256),kr=n.n(xr);var Nr,Tr,Sr,Ir=!1,Cr=function(){return Ir?(Ir=!1,jr.state()):null},qr=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ar(){if("serviceWorker"in navigator){if(new URL(".",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat(".","/service-worker.js");qr?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Er(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):Er(e)}))}}function Er(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Rr,Pr,Dr,Mr=function(){return{strength:Math.floor(3*Math.random())+9,dexterity:Math.floor(3*Math.random())+9,intelligence:Math.floor(3*Math.random())+9,health:Math.floor(3*Math.random())+9}},Hr="img/avatars",Lr="img/scene/actors/",Wr=[{id:"c4a5d270",equipment:{head:Le.a.cowl,chest:Le.a.chest,hands:Le.a.clothGloves,shoulders:Le.a.shoulders2,legs:Le.a.pants2,feet:Le.a.boots3,offHand:Le.a.indomitableCarapace},basicAttributes:Mr(),health:100*Math.random(),xp:100*Math.random(),baseAP:6,room:0,name:"Ximena Maddox",traits:[_n.houseMaddox,_n.gloomy],avatarImg:"".concat(Hr,"/female/f_14.png"),spritesheetPath:"".concat(Lr,"archer.json"),skills:(Nr={},Object(N.a)(Nr,Fn.c.crossbow,10),Object(N.a)(Nr,Fn.c.bow,10),Nr),inventory:[Le.a.deedForLumbermill,null,Le.a.simpleCrossbow,Le.a.dagger,Le.a.khopesh,null,Le.a.sword,null,null,null,null,Le.a.steelShield,null,null,null,null]},{id:"2e655832",equipment:{feet:Le.a.boots2},basicAttributes:Mr(),name:"Donte Houston",health:100*Math.random(),xp:100*Math.random(),baseAP:6,room:1,avatarImg:"".concat(Hr,"/male/m_05.png"),spritesheetPath:"".concat(Lr,"footman.json"),traits:[_n.houseHouston],skills:(Tr={},Object(N.a)(Tr,Fn.c.crossbow,12),Object(N.a)(Tr,Fn.c.staff,13),Tr),inventory:[Le.a.simpleCrossbow,null,null,null,null,Le.a.boots1,Le.a.chainmailHood,Le.a.nomadHelmet,Le.a.plateChest4,null,Le.a.buckler,null,null,null,null,null,null,null,null,null,null,null,Le.a.plateHelmet,Le.a.cowl]},{id:"ec6f1050",equipment:{feet:Le.a.boots3,offHand:Le.a.aegisOfValor},basicAttributes:Mr(),name:"Zackary 'bone bag' Morris",health:100*Math.random(),xp:100*Math.random(),baseAP:5,room:2,traits:[_n.gloomy],skills:(Sr={},Object(N.a)(Sr,Fn.c.sword,12),Object(N.a)(Sr,Fn.c.hammer,6),Sr),avatarImg:"".concat(Hr,"/male/m_09.png"),spritesheetPath:"".concat(Lr,"skeleton.json"),inventory:[Le.a.greatswordOfGwai,null,null,null,Le.a.berserkerShield]},{id:"d299f98a",basicAttributes:Mr(),equipment:{},name:"Mike Keith",health:100*Math.random(),xp:100*Math.random(),baseAP:6,room:4,avatarImg:"".concat(Hr,"/male/m_19.png"),spritesheetPath:"".concat(Lr,"grunt.json"),traits:[_n.arrowFinder],skills:Object(N.a)({},Fn.c.sword,13),inventory:[null,null,null,null,Le.a.khopesh,Le.a.hornedHelmet,Le.a.woodenBulwark]},{id:"96c686c3",equipment:{},basicAttributes:Mr(),name:"Wayne Monroe",health:100*Math.random(),xp:100*Math.random(),baseAP:4,room:5,avatarImg:"".concat(Hr,"/male/m_08.png"),spritesheetPath:"".concat(Lr,"grunt.json"),traits:[_n.houseMonroe,_n.arrowFinder],skills:Object(N.a)({},Fn.c.axe,12),inventory:[null,null,null,Le.a.goldenShield]},{id:"250d1a9d",basicAttributes:Mr(),equipment:{},name:"Alexis Ortiz ",health:100*Math.random(),xp:100*Math.random(),baseAP:5,room:9,avatarImg:"".concat(Hr,"/female/f_10.png"),spritesheetPath:"".concat(Lr,"footman.json"),inventory:[null,null,null,null,null],skills:Object(N.a)({},Fn.c.axe,10)},{id:"169384ef",equipment:{},basicAttributes:Mr(),name:"Karlee Nolan",health:100*Math.random(),xp:100*Math.random(),baseAP:5,room:3,avatarImg:"".concat(Hr,"/female/f_16.png"),spritesheetPath:"".concat(Lr,"footman.json"),inventory:[Le.a.greatswordOfGwai,null,null,null],skills:Object(N.a)({},Fn.c.axe,10)},{id:"f22d66cb",basicAttributes:Mr(),equipment:{},name:"Gylbarde the Earnest",health:100*Math.random(),xp:100*Math.random(),baseAP:5,room:8,avatarImg:"".concat(Hr,"/male/m_09.png"),spritesheetPath:"".concat(Lr,"footman.json"),inventory:[null,null,null,null,null],skills:Object(N.a)({},Fn.c.axe,13)},{id:"36c686c1",equipment:{},basicAttributes:Mr(),name:"Lanslet of the Water",health:100*Math.random(),xp:100*Math.random(),baseAP:6,room:6,avatarImg:"".concat(Hr,"/male/m_26.png"),spritesheetPath:"".concat(Lr,"footman.json"),inventory:[Le.a.greatswordOfGwai,null,null,null,Le.a.shoulders1,Le.a.fedora,Le.a.greaves2],skills:Object(N.a)({},Fn.c.axe,3)},{id:"12c613d4",equipment:{},basicAttributes:Mr(),name:"Tedric the Bold",health:100*Math.random(),xp:100*Math.random(),baseAP:6,room:7,avatarImg:"".concat(Hr,"/male/m_33.png"),spritesheetPath:"".concat(Lr,"footman.json"),inventory:[Le.a.greatswordOfGwai,null,null,null],skills:Object(N.a)({},Fn.c.axe,10)}],Fr={lastTick:Date.now(),lastProducedUpdate:Date.now()},Vr=function(){for(var e=[],t=Object(_.b)(_.a.warehouse).levels[0].maxStockpile,n=0;n<t;n++)if(Math.random()<.5)e.push(null);else{var a=zr(Le.a);e.push(a)}return e},zr=function(e){var t=Object.values(e);return t[Math.floor(Math.random()*t.length)]},Qr=function(e,t){if(!t.log.length)return e;var n=t.log.map((function(e){return Object(ue.a)(Object(ue.a)({},e),{},{time:Date.now()})}));return[].concat(Object(o.a)(n),Object(o.a)(e))},_r=n(125),Br=[{name:"kill10Boars",status:yt.active,party:["c4a5d270","2e655832","ec6f1050","d299f98a"],progress:0,questVars:_r.a,encounterResults:[],icon:"sigil1.png"},{name:"retrieveMagicAmulet",party:[],status:yt.available,progress:0,questVars:{},encounterResults:[],icon:"sigil2.png",reward:{gold:4,items:[Le.a.deedForWeaponsmith]}}],Gr=function(e,t){var n=t.assignedAventurers.filter((function(e){return!!e})).map((function(e){return e.id}));return e.map((function(e){if(e.name===t.questName){var a=Object(Nt.b)(t.questName).getInitialQuestVars(e);return Object(ue.a)(Object(ue.a)({},e),{},{status:yt.active,party:n,questVars:a})}return e}))},Ur=function(e,t){return e.map((function(e){if(e.name===t.questName){var n=e.progress+1;return Object(ue.a)(Object(ue.a)({},e),{},{progress:n,scene:void 0,sceneName:void 0})}return e}))},Xr=function(e,t){return e.map((function(e){return e.name===t.questName?Object(ue.a)(Object(ue.a)({},e),{},{sceneName:t.sceneName,scene:void 0}):e}))},Yr=function(e,t){return e.map((function(e){return e.name===t.questName?Object(ue.a)(Object(ue.a)({},e),{},{scene:t.scene}):e}))},Zr=function(e,t){return e.map((function(e){if(e.name===t.questName){var n=e.scene;if(!n)throw new Error("Something broke. No scene");return n.actionQueue=[].concat(Object(o.a)(n.actionQueue||[]),[t.sceneAction]),Object(ue.a)(Object(ue.a)({},e),{},{scene:n})}return e}))},Jr=function(e,t){return e.map((function(e){if(e.name===t.questName){var n=e.scene;if(!n)throw new Error("Something broke. No scene");var a=n.actionQueue[0];if(!a)return e;switch(a.actionType){case Ft.move:n.actors=n.actors.map((function(e){return e.name===a.actor?Object(ue.a)(Object(ue.a)({},e),{},{location:a.target}):e}))}return n.actionQueue=Object(o.a)(n.actionQueue.slice(1)),Object(ue.a)(Object(ue.a)({},e),{},{scene:n})}return e}))},Kr=function(e,t){return e.map((function(e){if(e.name===t.questName){var n=e.scene;if(!n)throw new Error("Something broke. No scene");return n.actors=n.actors.map((function(e){if(e.name===t.actor){var n=e.ap-t.ap;return Object(ue.a)(Object(ue.a)({},e),{},{ap:n})}return e})),Object(ue.a)(Object(ue.a)({},e),{},{scene:n})}return e}))},$r=function(e,t){return e.map((function(e){if(e.name===t.questName){var n=e.scene;if(!n)throw new Error("Something broke. No scene");return n.objects=n.objects.map((function(e){return e.id===t.id?Object(ue.a)(Object(ue.a)({},e),t.object):e})),Object(ue.a)(Object(ue.a)({},e),{},{scene:n})}return e}))},ec=function(e,t){var n=t.quests;return n.length?e.map((function(e){var t=n.find((function(t){return t.name===e.name}));if(t){var a=t.progress;return Object(ue.a)(Object(ue.a)({},e),{},{progress:a})}return e})):e},tc=function(e,t){return e.map((function(e){if(e.name===t.questName){var n=Object.assign({},e.questVars,t.vars);return Object(ue.a)(Object(ue.a)({},e),{},{questVars:n})}return e}))},nc=function(e,t){return e.map((function(e){if(e.name===t.questName){var n=e.encounterResults.concat();return n[t.nodeIndex]=t.result,Object(ue.a)(Object(ue.a)({},e),{},{encounterResults:n})}return e}))},ac=function(e,t){return e.map((function(e){return e.name===t.questName&&e.scene&&(e.scene.activeInteractionModal=t.sceneInteractionModal),e}))},rc=(Rr={},Object(N.a)(Rr,_.a.alchemist,Object(ue.a)(Object(ue.a)({},Y),{},{produces:[]})),Object(N.a)(Rr,_.a.armoursmith,Object(ue.a)(Object(ue.a)({},Y),{},{produces:[Le.a.boots1]})),Object(N.a)(Rr,_.a.garden,{level:0,workers:0,state:W.Built}),Object(N.a)(Rr,_.a.lumberMill,Y),Object(N.a)(Rr,_.a.mine,{level:0,workers:0,state:W.NotBuilt}),Object(N.a)(Rr,_.a.quarry,Y),Object(N.a)(Rr,_.a.tavern,{level:0,workers:0,state:W.Built}),Object(N.a)(Rr,_.a.tannery,Y),Object(N.a)(Rr,_.a.warehouse,{level:0,workers:0,state:W.Built}),Object(N.a)(Rr,_.a.weaponsmith,Object(ue.a)(Object(ue.a)({},Y),{},{produces:[Le.a.simpleCrossbow,Le.a.dagger]})),Object(N.a)(Rr,_.a.weaver,Y),Object(N.a)(Rr,_.a.workshop,Object(ue.a)(Object(ue.a)({},Y),{},{produces:[Le.a.torch,Le.a.sandwich]})),Rr),cc=function(e,t,n){var a=Object(ue.a)(Object(ue.a)({},e[t]),{},{state:n});return Object(ue.a)(Object(ue.a)({},e),{},Object(N.a)({},t,a))},oc={completed:[],running:[]},ic=function(e){return{name:e.name,origin:e.origin,type:e.taskType,callbacks:e.callbacks,timeRemaining:e.time,startTime:Date.now(),lastTick:Date.now(),progress:0}},sc=Object(De.b)({adventurers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Hn.a.moveItemInInventory:var n=t,a=n.adventurerId,r=n.fromSlot,c=n.toSlot,o=e.find((function(e){return e.id===a})),i=o.inventory.map((function(e,t){return t===r?o.inventory[c]:t===c?o.inventory[r]:e}));return e.map((function(e){return e===o?Object(ue.a)(Object(ue.a)({},e),{},{inventory:i}):e}));case Hn.a.moveItemToOtherAdventurer:var s=t,u=s.adventurerId,l=s.fromSlot,d=s.toAdventurerId,m=e.find((function(e){return e.id===u})),p=m.inventory[l];return e.map((function(e){if(e.id===u){var t=e.inventory.concat();return t[l]=null,Object(ue.a)(Object(ue.a)({},e),{},{inventory:t})}if(e.id===d){var n=e.inventory.concat(),a=n.findIndex((function(e){return null===e}));return n[a]=p,Object(ue.a)(Object(ue.a)({},e),{},{inventory:n})}return e}));case Hn.a.addItemToInventory:var b=t,h=b.item;return e.map((function(e){if(e.id===t.adventurerId){var n=e.inventory.concat(),a=t.toSlot;return null!==a&&void 0!==a||(a=n.findIndex((function(e){return null===e||void 0===e}))),n[a]=h,Object(ue.a)(Object(ue.a)({},e),{},{inventory:n})}return e}));case Hn.a.removeItemFromInventory:var f=t,j=f.fromSlot;return e.map((function(e){if(e.id===t.adventurerId){var n=e.inventory.map((function(e,t){return t!==j?e:null}));return Object(ue.a)(Object(ue.a)({},e),{},{inventory:n})}return e}));case Hn.a.assignEquipment:var v=t,g=v.equipmentSlot,O=v.item;return e.map((function(e){return e.id===t.adventurerId?Object(ue.a)(Object(ue.a)({},e),{},{equipment:Object(ue.a)(Object(ue.a)({},e.equipment),{},Object(N.a)({},nn.a[g],O))}):e}));case Hn.a.removeEquipment:var y=t,w=y.equipmentSlot;return e.map((function(e){return e.id===t.adventurerId?Object(ue.a)(Object(ue.a)({},e),{},{equipment:Object(ue.a)(Object(ue.a)({},e.equipment),{},Object(N.a)({},nn.a[w],null))}):e}))}return e},combat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.startCombatAction:var n=t;return Object(ue.a)(Object(ue.a)({},e),{},{action:{actor:n.actor,endsAt:n.endsAt,target:n.target,type:n.combatType}});case a.moveActor:var r=t,c=e.actors.map((function(e){return e.name===r.actor?Object(ue.a)(Object(ue.a)({},e),{},{location:r.location}):e}));return Object(ue.a)(Object(ue.a)({},e),{},{actors:c});case a.clearCombatAction:return Object(ue.a)(Object(ue.a)({},e),{},{action:void 0})}return e},engine:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.gameTick:var n=t.resources,a=null===n?e.lastProducedUpdate:Date.now();return Object(ue.a)(Object(ue.a)({},e),{},{lastProducedUpdate:a,lastTick:Date.now()})}return e},gold:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ze.a.addGold:return e+t.amount}return e},stockpile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vr(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ue.addItem:var n=t,a=n.item,r=t,c=r.toSlot;return void 0===c&&-1===(c=e.findIndex((function(e){return null===e})))?[].concat(Object(o.a)(e),[a]):e.map((function(e,t){return t===c?a:e}));case Ue.moveItemInWarehouse:var i=t,s=i.fromSlot,u=i.toSlot;return e.map((function(t,n){return n===s?e[u]:n===u?e[s]:t}));case Ue.removeItem:var l=t,d=l.fromSlot;return e.map((function(e,t){return t!==d?e:null}))}return e},log:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y.a.addLogEntry:var n=t,a=n.entry,r=n.channel,c=n.channelContext,i=a.key,s=a.context,u=Date.now();return[{channel:r,channelContext:c,context:s,key:i,time:u}].concat(Object(o.a)(e));case d.gameTick:return Qr(e,t)}return e},quests:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Br,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ut.a.launchQuest:return Gr(e,t);case Ut.a.exitEncounter:return Ur(e,t);case Ut.a.updateQuestVars:return tc(e,t);case Ut.a.updateEncounterResult:return nc(e,t);case Ut.a.setSceneName:return Xr(e,t);case Ut.a.setScene:return Yr(e,t);case Ut.a.enqueueSceneAction:return Zr(e,t);case Ut.a.completeSceneAction:return Jr(e,t);case Ut.a.deductActorAp:return Kr(e,t);case Ut.a.updateSceneObjectAction:return $r(e,t);case Ut.a.setActiveSceneInteractionModal:return ac(e,t);case d.gameTick:return ec(e,t)}return e},resources:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ja,t=arguments.length>1?arguments[1]:void 0,n=function(t){return Object.keys(e).reduce((function(n,a){return n[a]=e[a]+(t[a]||0),n}),{})};switch(t.type){case qe.addResources:var a=t.resources;return n(a);case qe.removeResources:var r=t.resources;return Object.keys(e).reduce((function(t,n){return t[n]=e[n]-(r[n]||0),t}),{});case d.gameTick:var c=t.resources;return null===c?e:n(c)}return e},rngState:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===d.gameTick&&null!=t.rngState&&(e=Object.assign({},t.rngState)),e},structures:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ae.startBuildingStructure:return cc(e,t.structure,W.Building);case Ae.finishBuildingStructure:return cc(e,t.structure,W.Built);case Ae.upgradeStructure:var n=e[t.structure].level+1,a=Object(ue.a)(Object(ue.a)({},e[t.structure]),{},{level:n});return Object(ue.a)(Object(ue.a)({},e),{},Object(N.a)({},t.structure,a));case Ae.increaseWorkers:var r=t,c=r.workers,i=e[t.structure].workers+c,s=Object(ue.a)(Object(ue.a)({},e[t.structure]),{},{workers:i});return Object(ue.a)(Object(ue.a)({},e),{},Object(N.a)({},t.structure,s));case Ae.decreaseWorkers:var u=t,l=u.workers,d=e[t.structure].workers-l,m=Object(ue.a)(Object(ue.a)({},e[t.structure]),{},{workers:d});return Object(ue.a)(Object(ue.a)({},e),{},Object(N.a)({},t.structure,m));case Ae.setStructureState:var p=t,b=p.state;return cc(e,t.structure,b);case Ae.addItemToToProduces:var h=t,f=h.item,j=[].concat(Object(o.a)(e[t.structure].produces),[f]),v=Object(ue.a)(Object(ue.a)({},e[t.structure]),{},{produces:j});return Object(ue.a)(Object(ue.a)({},e),{},Object(N.a)({},t.structure,v))}return e},tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case aa.start:var n=ic(t),a=e.running.concat(n);return Object(ue.a)(Object(ue.a)({},e),{},{running:a});case d.gameTick:var r=Date.now(),c=[],o=[];return e.running.forEach((function(e){var t=r+e.timeRemaining,n=(r-e.startTime)/(t-e.startTime),a=e.timeRemaining-(r-e.lastTick),i=Object(ue.a)(Object(ue.a)({},e),{},{progress:n,lastTick:r,timeRemaining:a});a<0?o.push(i):c.push(i)})),{running:c,completed:o}}return e},workers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:13,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Xe.addWorkers:return e+t.value}return e}}),uc=n(165),lc={key:"root",storage:g.a,version:k},dc=Object(uc.a)(lc,sc),mc=Object(u.a)(s.a.mark((function e(){var t,n=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.abrupt("return",new Promise((function(e,n){var a=Object(De.d)(dc,t,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),r=Object(uc.b)(a,void 0,(function(){var t=Object(Tt.d)(a.getState());e({store:a,persistor:r,isHydrated:t})}))})));case 2:case"end":return e.stop()}}),e)}))),pc=function(e,t){e.completed.forEach((function(e){return function(e){switch(e.callbacks.forEach((function(e){return t(e)})),e.type){case ra.craftItem:var n=e.name,a=P.a.get("common-item-crafted",{item:n}),r=Object(He.b)(n);Se.a.addToast(a,Ie.a.itemCrafted,r.iconImg)}}(e)}))},bc=(n(489),function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ne.c)("".concat(".","/lang/en-US.json"));case 2:t=e.sent,P.a.init(t.data),n="GILLESROX2",Ir=!0,jr=kr()(n,{state:!0}),hc();case 6:case"end":return e.stop()}var n}),e)})));return function(){return e.apply(this,arguments)}}()),hc=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mc();case 2:t=e.sent,n=t.store,a=t.isHydrated,Pr=t.persistor,a?jc(n):fc(n),Oc(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fc=function(e){console.log("STARTING NEW GAME"),e.dispatch(Object(y.c)("test-game-welcome")),console.log("Starting new GILLES-IDLE-GAME (version ".concat(x,")"))},jc=function(e){console.log("Continuing existing GILLES-IDLE-GAME (version ".concat(x,")"))},vc=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pr.purge();case 2:return e.next=4,mc(t);case 4:n=e.sent,a=n.store,Oc(a),location.href="#/world/";case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gc=function(){confirm("Are you sure you wish to reset all your progress?")&&(clearTimeout(Dr),Pr.purge(),g.a.clear(),hc(),location.href="#/town")},Oc=function(e){clearTimeout(Dr),f.render(Object(l.jsx)(j.a,{store:e,children:Object(l.jsx)(Or,{persistor:Pr})}),document.getElementById("root")),Ar();Dr=setInterval((function(){var t=e.getState(),n=Date.now()-t.engine.lastTick,a=[],r=yr(t.engine.lastProducedUpdate,t),c=Cr();p(n,e);var i=wr(n,e),s=i.questUpdates,u=i.logUpdates;a.push.apply(a,Object(o.a)(u)),e.dispatch(function(e,t,n,a,r){return{type:d.gameTick,delta:e,rngState:t,resources:n,quests:a,log:r}}(n,c,r,s,a)),pc(t.tasks,e.dispatch)}),2500)};bc()},function(e,t,n){"use strict";n.r(t),n.d(t,"DungeonEntranceSceneController",(function(){return D})),n.d(t,"DungeonHallwaySceneController",(function(){return M}));var a,r=n(22),c=n(24),o=n(82),i=n(62),s=n(40),u=n(39),l=n(34),d=n.n(l),m=n(47),p=n(8),b=n(126),h=function(e){var t=e.layers.filter((function(e){return e.type===b.a.objectgroup})),n={};return t.forEach((function(t){t.objects.reduce((function(t,n){var a=n.x,r=n.y;void 0!==n.gid&&(r-=n.height);var c=[a/e.tilewidth,r/e.tileheight],o=f(n.properties),i=Object(p.a)({location:c,ezProps:o},n);return t["".concat(c[0],",").concat(c[1])]=i,t}),n)})),n},f=function(e){if(e)return e.reduce((function(e,t){return e[t.name]=t.value,e}),{})};!function(e){e.adventurerStart="adventurerStart",e.exit="exit"}(a||(a={}));var j=function(e,t,n){t.data.reduce((function(e,t,a){if(t>0){var r=a%n,c=Math.floor(a/n);e.push([r,c])}return e}),e)},v=function(e,t){return e[0]===t[0]&&e[1]===t[1]},g=n(71),O=n(255),y=n(27),w=n(42),x=n(43),k=n(31);function N(e){return"string"===typeof e.key}var T=n(7),S=n(58),I=n(56),C=n(45),q=n(76),A=n(41);var E=n(60),R=function(){function e(t,n){Object(r.a)(this,e),this.mapData=void 0,this.aStar=void 0,this.questName=void 0,this.tilemapObjects=void 0,this.jsonPath=void 0,this.store=void 0,this.blockedTiles=[],this.spritesheetsMap={},this.store=t,this.questName=n}return Object(c.a)(e,[{key:"loadData",value:function(e){var t=this;if(this.dataLoaded)return e();if(!this.jsonPath)throw new Error("No jsonPath defined!");Object(g.b)("".concat(".","/").concat(this.jsonPath),function(){var n=Object(m.a)(d.a.mark((function n(a){var r,c,o,i,s,u,l;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.mapData=a.data,t.tilemapObjects=h(a.data),t.mapData.layers.filter((function(e){return e.visible})).forEach((function(e){e.properties&&e.properties.some((function(e){return"blocksMovement"===e.name&&!0===e.value}))&&j(t.blockedTiles,e,e.width)})),r=t.getAdventurers(),c=Array.from(new Set(r.map((function(e){return e.spritesheetPath})))),o=0,i=c;case 6:if(!(o<i.length)){n.next=16;break}return s=i[o],n.next=10,Object(g.c)(s);case 10:u=n.sent,l=u.spritesheet,t.spritesheetsMap[s]=l;case 13:o++,n.next=6;break;case 16:t.aStar=t.createAStar(),e();case 18:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}},{key:"createScene",value:function(){var e={objects:this.createObjects(),actors:this.createActors(),combat:!0};this.store.dispatch(Object(y.h)(this.questName,e))}},{key:"sceneEntered",value:function(){}},{key:"getActorSpritesheet",value:function(e){var t=this.getActorSpritesheetPath(e);return this.spritesheetsMap[t]}},{key:"getActorSpritesheetPath",value:function(e){return this.getAdventurers().find((function(t){return t.id===e})).spritesheetPath}},{key:"actorMoved",value:function(e,t){var n,a=this.tilemapObjects["".concat(t[0],",").concat(t[1])];if(a&&"exit"===a.type)if(null===(n=a.ezProps)||void 0===n?void 0:n.loadScene)this.store.dispatch(Object(y.i)(this.questName,a.ezProps.loadScene));else{var r=Math.floor(this.getQuest().progress)+1,c=Object(I.b)(this.questName).nodes[r];c.log&&this.store.dispatch(Object(S.c)(c.log,null,C.a.quest,this.questName)),this.store.dispatch(Object(y.e)(this.questName))}}},{key:"actorCanInteract",value:function(e){var t,n,a=this.getQuest().scene,r=null===a||void 0===a?void 0:a.actors.find((function(t){return t.name===e})),c=null===(t=this.tilemapObjects)||void 0===t?void 0:t["".concat(r.location[0],",").concat(r.location[1])];return c&&(null===(n=c.ezProps)||void 0===n?void 0:n.interactive)}},{key:"actorInteract",value:function(e){if(this.actorCanInteract(e)){var t=this.getQuest().scene,n=null===t||void 0===t?void 0:t.actors.find((function(t){return t.name===e})),a=null===t||void 0===t?void 0:t.objects.find((function(e){return v(e.location,n.location)}));a?this.interactWithObject(n,a):console.warn("No object found")}else console.warn("Can't interact")}},{key:"interactWithObject",value:function(e,t){}},{key:"pointToSceneLocation",value:function(e){var t,n;return(null===(t=this.mapData)||void 0===t?void 0:t.tilewidth)&&(null===(n=this.mapData)||void 0===n?void 0:n.tileheight)?[Math.floor(e.x/this.mapData.tilewidth),Math.floor(e.y/this.mapData.tilewidth)]:[0,0]}},{key:"locationIsBlocked",value:function(e){return this.blockedTiles.some((function(t){return v(t,e)}))}},{key:"getLootCache",value:function(e){}},{key:"takeGoldFromCache",value:function(e){var t=this.getLootCache(e);t&&this.store.dispatch(Object(q.b)(t.gold||0))}},{key:"takeItemFromCache",value:function(e,t,n,a){var r=this.getLootCache(t);if(r){var c=r.items[e];this.store.dispatch(Object(A.b)(n.id,c,a))}}},{key:"getSituation",value:function(e,t){}},{key:"handleSituationOptionClick",value:function(e,t){}},{key:"findPath",value:function(e,t){var n,a=function(e){return{x:e[0],y:e[1]}};return null===(n=this.aStar)||void 0===n?void 0:n.findPath(a(e),a(t))}},{key:"calculateWalkApCosts",value:function(e,t){var n;return(null===(n=this.findPath(e,t))||void 0===n?void 0:n.length)||0}},{key:"getRemainingAdventurerAp",value:function(e){var t,n=this.getQuest().scene;return null===n||void 0===n||null===(t=n.actors.find((function(t){return t.name===e})))||void 0===t?void 0:t.ap}},{key:"createAStar",value:function(){for(var e=[],t=0;t<this.mapData.height;t++){for(var n=[],a=0;a<this.mapData.width;a++){var r=[a,t],c=this.locationIsBlocked(r);n.push(c?1:0)}e.push(n)}return new O.AStarFinder({grid:{matrix:e},includeStartNode:!1,heuristic:"Manhattan",weight:0})}},{key:"createActors",value:function(){if(!this.tilemapObjects)throw new Error("No tilemapObjects");var e=this.getAdventurers(),t=Object.values(this.tilemapObjects).filter((function(e){return"adventurerStart"===e.type})).map((function(e){return e.location}));if(e.length>t.length)throw new Error("Not enough objects with 'adventurerStart' property set to true");return e.reduce((function(e,n,a){var r=t[a],c=n.baseAP;return e.push({location:r,name:n.id,ap:c}),e}),[])}},{key:"createObjects",value:function(){var e=this;if(!this.tilemapObjects)throw new Error("No tilemapObjects");return Object.values(this.tilemapObjects).map((function(t){return e.createObject(t)})).filter((function(e){return null!==e}))}},{key:"createObject",value:function(e){switch(e.type){case a.adventurerStart:case a.exit:return null;default:return e}}},{key:"getQuest",value:function(){var e=this;return this.store.getState().quests.find((function(t){return t.name===e.questName}))}},{key:"getQuestVars",value:function(){return this.getQuest().questVars}},{key:"getAdventurers",value:function(){var e=this.store.getState(),t=this.getQuest();return Object(E.b)(e.adventurers,t)}},{key:"getAdventurerByActor",value:function(e){return this.store.getState().adventurers.find((function(t){return t.id===e.name}))}},{key:"questUpdate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=N(e)?e:{key:e},r=T.a.getTextEntry(a);n&&w.a.addToast(r,x.a.questUpdate,t,Object(k.a)(this.questName)),this.store.dispatch(Object(S.b)(a,C.a.quest,this.questName))}},{key:"basePath",get:function(){return this.jsonPath?"".concat(".","/").concat(this.jsonPath.substr(0,this.jsonPath.lastIndexOf("/"))):null}},{key:"dataLoaded",get:function(){return!!this.mapData}}]),e}(),P=n(108),D=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).jsonPath="scenes/ork-dungeon-level1.json",e}return Object(c.a)(n,[{key:"interactWithObject",value:function(e,t){switch(t.name){case"chest":if(33===t.gid){var a,r={key:"quest-common-adventurer-opened-chest",context:{adventurer:null===(a=this.getAdventurerByActor(e))||void 0===a?void 0:a.name}};this.questUpdate(r,"/img/items/misc/chest-02.png"),this.store.dispatch(Object(y.k)(this.questName,t.id,{gid:34}))}this.store.dispatch(Object(y.g)(this.questName,{type:"lootCache",lootCache:t.name}));break;case"altar":this.store.dispatch(Object(y.g)(this.questName,{type:"situation",situation:"altar"}))}Object(o.a)(Object(i.a)(n.prototype),"interactWithObject",this).call(this,e,t)}},{key:"sceneEntered",value:function(){this.getQuestVars().dungeon.entered||this.questUpdate("quest-kill10-boars-enter-dungeon-see-chest")}},{key:"getLootCache",value:function(e){return this.getQuestVars().dungeon.lootCaches[e]}},{key:"takeGoldFromCache",value:function(e){if(Object(o.a)(Object(i.a)(n.prototype),"takeGoldFromCache",this).call(this,e),this.getLootCache(e)){var t=this.getQuestVars();t.dungeon.lootCaches[e].gold=0,this.store.dispatch(Object(y.j)(this.questName,t))}}},{key:"takeItemFromCache",value:function(e,t,a,r){if(Object(o.a)(Object(i.a)(n.prototype),"takeItemFromCache",this).call(this,e,t,a,r),this.getLootCache(t)){var c=this.getQuestVars(),s=c.dungeon.lootCaches[t].items.filter((function(t,n){return n!==e}));c.dungeon.lootCaches[t].items=s,this.store.dispatch(Object(y.j)(this.questName,c))}}},{key:"getSituation",value:function(e,t){switch(e){case"altar":return this.getQuestVars().dungeon.situations.altar.candleLit?{title:"quest-kill10-boars-dungeonentrance-altar",choices:["quest-kill10-boars-dungeonentrance-altar-rummagedrawers"]}:{title:"quest-kill10-boars-dungeonentrance-altar",choices:["quest-kill10-boars-dungeonentrance-altar-lightcandle","quest-kill10-boars-dungeonentrance-altar-rummagedrawers"]};default:return Object(o.a)(Object(i.a)(n.prototype),"getSituation",this).call(this,e,t)}}},{key:"handleSituationOptionClick",value:function(e,t){switch(e){case"altar":switch(t){case"quest-kill10-boars-dungeonentrance-altar-lightcandle":var n=this.getQuestVars();n.dungeon.situations.altar.candleLit=!0,this.store.dispatch(Object(y.j)(this.questName,n));break;case"quest-kill10-boars-dungeonentrance-altar-rummagedrawers":this.store.dispatch(Object(y.g)(this.questName,{type:"lootCache",lootCache:"altar"}))}}}}]),n}(R),M=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).jsonPath="scenes/ork-dungeon-level2.json",e}return n}(R);P.a.registerSceneController("kill10Boars","dungeon.entrance",D),P.a.registerSceneController("kill10Boars","dungeon.hallway",M)}],[[490,1,2]]]);
//# sourceMappingURL=main.c63c6cff.chunk.js.map