(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{121:function(e,t,n){},147:function(e,t,n){},193:function(e,t,n){},194:function(e,t,n){},195:function(e,t,n){},196:function(e,t,n){},197:function(e,t,n){},198:function(e,t,n){},200:function(e,t,n){},201:function(e,t,n){},202:function(e,t,n){},203:function(e,t,n){},204:function(e,t,n){},205:function(e,t,n){},206:function(e,t,n){},207:function(e,t,n){},208:function(e,t,n){},209:function(e,t,n){},210:function(e,t,n){},211:function(e,t,n){},212:function(e,t,n){},220:function(e,t){},221:function(e,t,n){},222:function(e,t,n){},223:function(e,t,n){},224:function(e,t,n){},225:function(e,t,n){},226:function(e,t,n){},227:function(e,t,n){},228:function(e,t,n){},229:function(e,t,n){},232:function(e,t,n){"use strict";n.r(t);var r,a,o,c=n(31),s=n.n(c),i=n(42),u=n(87),l=n.n(u),m=n(0),d=n.n(m),p=n(49),g=n(9);function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.common,r=arguments.length>3?arguments[3]:void 0;return{type:o.addLogEntry,key:e,channel:n,channelContext:r,context:t}}!function(e){e.gameTick="gameTick"}(r||(r={})),function(e){e[e.common=0]="common",e[e.town=1]="town",e[e.quest=2]="quest"}(a||(a={})),(o||(o={})).addLogEntry="addLogEntry";var f,h=function(e){var t=e.split(".").map(function(e){return Number(e)});if(3!==t.length)throw new Error("Received invalid version string: ".concat(e));t.forEach(function(e){if(e>=1024)throw new Error("Version string invalid, ".concat(e," is too large"))});for(var n=0,r=0;r<3;r++)n|=t[r]<<10*r;return n}("0.0.4"),b=n(18),y=n(1),w=n(3),k=n(4),O=n(6),E=n(5),j=n(43),T=n(7),I=(n(121),function(e){var t=e.className||"";return m.createElement("div",{className:"ui-button widgets-squareiconbutton ".concat(t),onClick:function(t){e.onClick&&e.onClick(t)}},e.text)}),C=(n(72),function(e){var t=(e.active?"active":"")+(e.className||"");return m.createElement("li",{className:"widget-tab ".concat(t),onClick:function(t){e.onClick&&e.onClick(t)}},e.children)}),N=n(35),x=function(e){var t=null;e.children&&e.children.length&&(t=e.children[0].props.id);var n=Object(m.useState)(t),r=Object(N.a)(n,2),a=r[0],o=r[1],c=e.className||"",s=d.a.Children.map(e.children,function(e){return d.a.cloneElement(e,{active:e.props.id===a,onClick:function(){i(e.props.id)}})}),i=function(t){o(t),e.onTabSelected&&e.onTabSelected(t)};return d.a.createElement("ul",{className:"widget-tabstrip ".concat(c),onClick:function(t){e.onClick&&e.onClick(t)}},s)},S=n(12);!function(e){e[e.resource=0]="resource",e[e.production=1]="production",e[e.tavern=2]="tavern",e[e.warehouse=3]="warehouse"}(f||(f={}));var q,A,D={type:f.production,cost:{gold:40,time:4e3},levels:[{displayName:"structure-alchemist-name",workerCapacity:2,cost:{gold:0},produces:[]},{displayName:"structure-alchemist-name",workerCapacity:5,cost:{gold:30},produces:[]},{displayName:"structure-alchemist-name",workerCapacity:10,cost:{gold:50},produces:[]}]},R=n(59),W=(n(122),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"milliseconds";return R.duration(e,t).format("d [days] h [hours] m [min] s [sec]",{trim:"both"})});!function(e){e[e.deed=0]="deed",e[e.equipment=1]="equipment",e[e.material=2]="material",e[e.questItem=3]="questItem",e[e.trinket=4]="trinket",e[e.weapon=5]="weapon"}(q||(q={})),function(e){e.deedForLumbermill="deedForLumbermill",e.deedForWeaponsmith="deedForWeaponsmith",e.boots1="boots1",e.boots2="boots2",e.boots3="boots3",e.chainmailHood="chainmailHood",e.chest="chest",e.clothGloves="clothGloves",e.cowl="cowl",e.fedora="fedora",e.druidChest="druidChest",e.druidFeet="druidFeet",e.druidHands="druidHands",e.druidHead="druidHead",e.druidLegs="druidLegs",e.greaves1="greaves1",e.greaves2="greaves2",e.hornedHelmet="hornedHelmet",e.leatherGloves="leatherGloves",e.nomadHelmet="nomadHelmet",e.pants1="pants1",e.pants2="pants2",e.plateChest1="plateChest1",e.plateChest2="plateChest2",e.plateChest3="plateChest3",e.plateChest4="plateChest4",e.plateGloves1="plateGloves1",e.plateGloves2="plateGloves2",e.plateHelmet="plateHelmet",e.platePants="platePants",e.plateShoulders1="plateShoulders1",e.plateShoulders2="plateShoulders2",e.robe="robe",e.shoulders1="shoulders1",e.shoulders2="shoulders2",e.shoulders3="shoulders3",e.vest="vest",e.arrowheads="arrowheads",e.bolts="bolts",e.buckle="buckle",e.chain="chain",e.cogs="cogs",e.gem="gem",e.gunpowder="gunpowder",e.ingot="ingot",e.nails="nails",e.poisonVial="poisonVial",e.ribbon="ribbon",e.rope="rope",e.scales="scales",e.spring="spring",e.thread="thread",e.blueprints="blueprints",e.crate="crate",e.dynamite="dynamite",e.eye="eye",e.feather="feather",e.food="food",e.heart="heart",e.horn="horn",e.key="key",e.letters="letters",e.lockPicks="lockPicks",e.oil="oil",e.orcFinger="orcFinger",e.plans="plans",e.purpleGems="purpleGems",e.runestone="runestone",e.sandwich="sandwich",e.teeth="teeth",e.tooth="tooth",e.torch="torch",e.tusk="tusk",e.vase="vase",e.vial="vial",e.weeds="weeds",e.ring="ring",e.magicAmulet="magicAmulet",e.battleAxe="battleAxe",e.brassKnuckles="brassKnuckles",e.cleaver="cleaver",e.club="club",e.crossbow="crossbow",e.dagger="dagger",e.flail="flail",e.greatswordOfGwai="greatswordOfGwai",e.khopesh="khopesh",e.longbow="longbow",e.mace="mace",e.morningStar="morningStar",e.poisonedDagger="poisonedDagger",e.ravenStaff="ravenStaff",e.savageStaff="savageStaff",e.spear="spear",e.sword="sword",e.warhammer="warhammer"}(A||(A={}));var M,B={item:A.boots1,cost:{resources:{wood:2,iron:15},time:18e5}},L={item:A.chest,cost:{resources:{wood:10,iron:45},time:36e5}},Q={item:A.cowl,cost:{resources:{iron:15},time:36e5}},H={cost:{gold:40,time:4e3},type:f.production,levels:[{displayName:"structure-armoursmith-name",workerCapacity:2,cost:{gold:0},produces:[B]},{displayName:"structure-armoursmith-name",workerCapacity:5,cost:{gold:30},produces:[B,L]},{displayName:"structure-armoursmith-name",workerCapacity:10,cost:{gold:50},produces:[B,L,Q]}]},_={type:f.resource,cost:{gold:40,time:4e3},levels:[{displayName:"structure-garden-name",workerCapacity:2,cost:{gold:0},generates:{food:2}},{displayName:"structure-garden-name",workerCapacity:5,cost:{gold:30},generates:{food:2}},{displayName:"structure-garden-name",workerCapacity:10,cost:{gold:50},generates:{food:2}}]},G={type:f.resource,cost:{gold:31,time:5e3},levels:[{displayName:"structure-lumber-mill-name",workerCapacity:2,cost:{gold:0},generates:{wood:2}},{displayName:"structure-lumber-mill-name",workerCapacity:5,cost:{gold:30},generates:{wood:2}},{displayName:"structure-lumber-mill-name",workerCapacity:10,cost:{gold:50},generates:{wood:2}}]},F={cost:{gold:40,time:4e3},type:f.resource,levels:[{displayName:"structure-mine-name",workerCapacity:2,cost:{gold:0},generates:{iron:2}},{displayName:"structure-mine-name",workerCapacity:5,cost:{gold:30},generates:{iron:2}},{displayName:"structure-mine-name",workerCapacity:10,cost:{gold:50},generates:{iron:2}}]},U={cost:{gold:40,time:4e3},type:f.resource,levels:[{displayName:"structure-quarry-name",workerCapacity:2,cost:{gold:0},generates:{stone:2}},{displayName:"structure-quarry-name",workerCapacity:5,cost:{gold:30},generates:{stone:4}},{displayName:"structure-quarry-name",workerCapacity:10,cost:{gold:50},generates:{stone:6}}]},z={cost:{gold:40,time:4e3},type:f.resource,levels:[{displayName:"structure-tannery-name",workerCapacity:2,cost:{gold:0},generates:{leather:2}},{displayName:"structure-tannery-name",workerCapacity:5,cost:{gold:30},generates:{leather:5}},{displayName:"structure-tannery-name",workerCapacity:10,cost:{gold:50},generates:{leather:7}}]},P={cost:{gold:40,time:4e3},type:f.tavern,levels:[{displayName:"structure-tavern-name",workerCapacity:2,cost:{gold:0},rooms:10},{displayName:"structure-tavern-name",workerCapacity:5,cost:{gold:30},rooms:12},{displayName:"structure-tavern-name",workerCapacity:10,cost:{gold:50},rooms:15}]},V={cost:{gold:40,time:4e3},type:f.warehouse,levels:[{displayName:"structure-warehouse-name",workerCapacity:2,cost:{gold:0},maxResources:{fabric:200,food:200,iron:200,leather:200,stone:200,wood:200}},{displayName:"structure-warehouse-name",workerCapacity:5,cost:{gold:30},maxResources:{fabric:500,food:500,iron:500,leather:500,stone:500,wood:500}},{displayName:"structure-warehouse-name",workerCapacity:10,cost:{gold:50},maxResources:{fabric:1e3,food:1e3,iron:1e3,leather:1e3,stone:1e3,wood:1e3}}]},K={item:A.crossbow,cost:{resources:{wood:20,iron:5},time:18e5}},X={item:A.longbow,cost:{resources:{wood:40,iron:5},time:36e5}},Y={item:A.poisonedDagger,cost:{resources:{wood:50,iron:15},materials:[A.poisonVial],time:36e5}},J={item:A.dagger,cost:{resources:{wood:10,iron:10},time:36e5}},Z={item:A.sword,cost:{resources:{wood:10,iron:30},time:36e5}},$={item:A.khopesh,cost:{resources:{wood:15,iron:40},time:12e4}},ee={type:f.production,cost:{gold:40,time:4e3},levels:[{displayName:"structure-weaponsmith-name",workerCapacity:2,cost:{gold:0},produces:[K,J]},{displayName:"structure-weaponsmith-name",workerCapacity:5,cost:{gold:30},produces:[K,J,X]},{displayName:"structure-weaponsmith-name",workerCapacity:10,cost:{gold:50},produces:[K,J,X,Z,$]},{displayName:"structure-weaponsmith-name",workerCapacity:14,cost:{gold:50},produces:[K,J,X,Z,$,Y]}]},te={cost:{gold:40,time:4e3},type:f.resource,levels:[{displayName:"structure-weaver-name",workerCapacity:2,cost:{gold:0},generates:{fabric:2}},{displayName:"structure-weaver-name",workerCapacity:5,cost:{gold:30},generates:{fabric:5}},{displayName:"structure-weaver-name",workerCapacity:10,cost:{gold:50},generates:{fabric:7}}]},ne={item:A.torch,cost:{resources:{wood:2,fabric:1},time:6e4}},re={item:A.sandwich,cost:{resources:{food:1},time:3e4}},ae={type:f.production,cost:{gold:40,time:4e3},levels:[{displayName:"structure-workshop-name",workerCapacity:2,cost:{gold:0},produces:[ne,re]},{displayName:"structure-workshop-name",workerCapacity:5,cost:{gold:30},produces:[]},{displayName:"structure-workshop-name",workerCapacity:10,cost:{gold:50},produces:[]},{displayName:"structure-workshop-name",workerCapacity:14,cost:{gold:50},produces:[]}]};!function(e){e.alchemist="alchemist",e.armoursmith="armoursmith",e.garden="garden",e.lumberMill="lumberMill",e.mine="mine",e.quarry="quarry",e.tavern="tavern",e.tannery="tannery",e.warehouse="warehouse",e.weaponsmith="weaponsmith",e.weaver="weaver",e.workshop="workshop"}(M||(M={}));var oe={alchemist:D,armoursmith:H,garden:_,lumberMill:G,mine:F,quarry:U,tavern:P,tannery:z,warehouse:V,weaponsmith:ee,weaver:te,workshop:ae},ce=oe;var se,ie,ue=q.deed,le={deedForLumbermill:{item:A.deedForLumbermill,structure:M.lumberMill,itemType:ue,subText:"It allows for the construction of a lumber mill",iconImg:"/img/items/deeds/deed.png"},deedForWeaponsmith:{item:A.deedForWeaponsmith,structure:M.weaponsmith,itemType:ue,subText:"It allows for the construction of a weaponsmith",iconImg:"/img/items/deeds/deed.png"}},me=q.equipment,de="/img/items/equipment/";!function(e){e[e.feet=0]="feet",e[e.hands=1]="hands",e[e.chest=2]="chest",e[e.legs=3]="legs",e[e.head=4]="head",e[e.shoulders=5]="shoulders"}(ie||(ie={}));var pe,ge,ve,fe,he,be=(se={},Object(y.a)(se,A.boots1,{item:A.boots1,equipmentType:ie.feet,itemType:me,subText:"These boots are made for questin'",iconImg:"".concat(de,"boots_1.png")}),Object(y.a)(se,A.boots2,{item:A.boots2,equipmentType:ie.feet,itemType:me,subText:"",iconImg:"".concat(de,"boots_2.png")}),Object(y.a)(se,A.boots3,{item:A.boots3,equipmentType:ie.feet,itemType:me,subText:"",iconImg:"".concat(de,"boots_3.png")}),Object(y.a)(se,A.chainmailHood,{item:A.chainmailHood,equipmentType:ie.head,itemType:me,subText:"",iconImg:"".concat(de,"chainmail_hood.png")}),Object(y.a)(se,A.chest,{item:A.chest,equipmentType:ie.chest,itemType:me,subText:"",iconImg:"".concat(de,"chest_1.png")}),Object(y.a)(se,A.clothGloves,{item:A.clothGloves,equipmentType:ie.hands,itemType:me,subText:"",iconImg:"".concat(de,"cloth_gloves.png")}),Object(y.a)(se,A.cowl,{item:A.cowl,equipmentType:ie.head,itemType:me,subText:"",iconImg:"".concat(de,"cowl.png")}),Object(y.a)(se,A.druidChest,{item:A.druidHands,equipmentType:ie.chest,itemType:me,subText:"",iconImg:"".concat(de,"druid-chest.png")}),Object(y.a)(se,A.druidFeet,{item:A.druidFeet,equipmentType:ie.feet,itemType:me,subText:"",iconImg:"".concat(de,"druid-feet.png")}),Object(y.a)(se,A.druidHands,{item:A.druidHands,equipmentType:ie.hands,itemType:me,subText:"",iconImg:"".concat(de,"druid-hands.png")}),Object(y.a)(se,A.druidHead,{item:A.druidHead,equipmentType:ie.head,itemType:me,subText:"",iconImg:"".concat(de,"druid-head.png")}),Object(y.a)(se,A.druidLegs,{item:A.druidLegs,equipmentType:ie.legs,itemType:me,subText:"",iconImg:"".concat(de,"druid-legs.png")}),Object(y.a)(se,A.fedora,{item:A.fedora,equipmentType:ie.head,itemType:me,subText:"I study the blade",iconImg:"".concat(de,"fedora.png")}),Object(y.a)(se,A.greaves1,{item:A.greaves1,equipmentType:ie.hands,itemType:me,subText:"",iconImg:"".concat(de,"greaves_1.png")}),Object(y.a)(se,A.greaves2,{item:A.greaves2,equipmentType:ie.hands,itemType:me,subText:"",iconImg:"".concat(de,"greaves_2.png")}),Object(y.a)(se,A.hornedHelmet,{item:A.hornedHelmet,equipmentType:ie.head,itemType:me,subText:"",iconImg:"".concat(de,"horned_helmet.png")}),Object(y.a)(se,A.leatherGloves,{item:A.leatherGloves,equipmentType:ie.hands,itemType:me,subText:"",iconImg:"".concat(de,"leather_gloves.png")}),Object(y.a)(se,A.nomadHelmet,{item:A.nomadHelmet,equipmentType:ie.head,itemType:me,subText:"",iconImg:"".concat(de,"nomad_helmet.png")}),Object(y.a)(se,A.pants1,{item:A.pants1,equipmentType:ie.legs,itemType:me,subText:"",iconImg:"".concat(de,"pants_1.png")}),Object(y.a)(se,A.pants2,{item:A.pants2,equipmentType:ie.legs,itemType:me,subText:"",iconImg:"".concat(de,"pants_2.png")}),Object(y.a)(se,A.plateChest1,{item:A.plateChest1,equipmentType:ie.chest,itemType:me,subText:"",iconImg:"".concat(de,"plate_chest_1.png")}),Object(y.a)(se,A.plateChest2,{item:A.plateChest2,equipmentType:ie.chest,itemType:me,subText:"",iconImg:"".concat(de,"plate_chest_2.png")}),Object(y.a)(se,A.plateChest3,{item:A.plateChest3,equipmentType:ie.chest,itemType:me,subText:"",iconImg:"".concat(de,"plate_chest_3.png")}),Object(y.a)(se,A.plateChest4,{item:A.plateChest4,equipmentType:ie.chest,itemType:me,subText:"",iconImg:"".concat(de,"plate_chest_4.png")}),Object(y.a)(se,A.plateGloves1,{item:A.plateGloves1,equipmentType:ie.hands,itemType:me,subText:"",iconImg:"".concat(de,"plate_gloves_1.png")}),Object(y.a)(se,A.plateGloves2,{item:A.plateGloves2,equipmentType:ie.hands,itemType:me,subText:"",iconImg:"".concat(de,"plate_gloves_2.png")}),Object(y.a)(se,A.plateHelmet,{item:A.plateHelmet,equipmentType:ie.head,itemType:me,subText:"",iconImg:"".concat(de,"plate_helmet_1.png")}),Object(y.a)(se,A.platePants,{item:A.platePants,equipmentType:ie.legs,itemType:me,subText:"",iconImg:"".concat(de,"plate_pants1.png")}),Object(y.a)(se,A.plateShoulders1,{item:A.plateShoulders1,equipmentType:ie.shoulders,itemType:me,subText:"",iconImg:"".concat(de,"plate_shoulders_1.png")}),Object(y.a)(se,A.plateShoulders2,{item:A.plateShoulders2,equipmentType:ie.shoulders,itemType:me,subText:"",iconImg:"".concat(de,"plate_shoulders_2.png")}),Object(y.a)(se,A.robe,{item:A.robe,equipmentType:ie.chest,itemType:me,subText:"",iconImg:"".concat(de,"robe_1.png")}),Object(y.a)(se,A.shoulders1,{item:A.shoulders1,equipmentType:ie.shoulders,itemType:me,subText:"",iconImg:"".concat(de,"shoulders_1.png")}),Object(y.a)(se,A.shoulders2,{item:A.shoulders2,equipmentType:ie.shoulders,itemType:me,subText:"",iconImg:"".concat(de,"shoulders_2.png")}),Object(y.a)(se,A.shoulders3,{item:A.shoulders3,equipmentType:ie.shoulders,itemType:me,subText:"",iconImg:"".concat(de,"shoulders_3.png")}),Object(y.a)(se,A.vest,{item:A.vest,equipmentType:ie.chest,itemType:me,subText:"",iconImg:"".concat(de,"vest_1.png")}),se),ye=q.material,we="/img/items/materials/",ke=(pe={},Object(y.a)(pe,A.arrowheads,{item:A.arrowheads,itemType:ye,iconImg:"".concat(we,"arrowheads.png")}),Object(y.a)(pe,A.bolts,{item:A.bolts,itemType:ye,iconImg:"".concat(we,"bolts.png")}),Object(y.a)(pe,A.buckle,{item:A.buckle,itemType:ye,iconImg:"".concat(we,"buckle.png")}),Object(y.a)(pe,A.chain,{item:A.chain,itemType:ye,iconImg:"".concat(we,"chain.png")}),Object(y.a)(pe,A.cogs,{item:A.cogs,itemType:ye,iconImg:"".concat(we,"cogs.png")}),Object(y.a)(pe,A.gem,{item:A.gem,itemType:ye,iconImg:"".concat(we,"gem.png")}),Object(y.a)(pe,A.ingot,{item:A.ingot,itemType:ye,iconImg:"".concat(we,"ingot.png")}),Object(y.a)(pe,A.nails,{item:A.nails,itemType:ye,iconImg:"".concat(we,"nails.png")}),Object(y.a)(pe,A.poisonVial,{item:A.poisonVial,itemType:ye,iconImg:"".concat(we,"poison-vial.png")}),Object(y.a)(pe,A.ribbon,{item:A.ribbon,itemType:ye,iconImg:"".concat(we,"ribbon.png")}),Object(y.a)(pe,A.rope,{item:A.rope,itemType:ye,iconImg:"".concat(we,"rope.png")}),Object(y.a)(pe,A.gem,{item:A.gem,itemType:ye,iconImg:"".concat(we,"gem.png")}),Object(y.a)(pe,A.gunpowder,{item:A.gunpowder,itemType:ye,iconImg:"".concat(we,"gunpowder.png")}),Object(y.a)(pe,A.scales,{item:A.scales,itemType:ye,iconImg:"".concat(we,"scales.png")}),Object(y.a)(pe,A.spring,{item:A.spring,itemType:ye,iconImg:"".concat(we,"spring.png")}),Object(y.a)(pe,A.thread,{item:A.thread,itemType:ye,iconImg:"".concat(we,"thread.png")}),pe),Oe=q.questItem,Ee="/img/items/quest-items/",je=(ge={},Object(y.a)(ge,A.blueprints,{item:A.blueprints,itemType:Oe,iconImg:"".concat(Ee,"blueprints.png")}),Object(y.a)(ge,A.crate,{item:A.crate,itemType:Oe,iconImg:"".concat(Ee,"crate.png")}),Object(y.a)(ge,A.dynamite,{item:A.dynamite,itemType:Oe,iconImg:"".concat(Ee,"dynamite.png")}),Object(y.a)(ge,A.eye,{item:A.eye,itemType:Oe,iconImg:"".concat(Ee,"eye.png")}),Object(y.a)(ge,A.feather,{item:A.feather,itemType:Oe,iconImg:"".concat(Ee,"feather.png")}),Object(y.a)(ge,A.food,{item:A.food,itemType:Oe,iconImg:"".concat(Ee,"food.png")}),Object(y.a)(ge,A.heart,{item:A.heart,itemType:Oe,iconImg:"".concat(Ee,"heart.png")}),Object(y.a)(ge,A.horn,{item:A.horn,itemType:Oe,iconImg:"".concat(Ee,"horn.png")}),Object(y.a)(ge,A.key,{item:A.key,itemType:Oe,iconImg:"".concat(Ee,"key.png")}),Object(y.a)(ge,A.letters,{item:A.letters,itemType:Oe,iconImg:"".concat(Ee,"letters.png")}),Object(y.a)(ge,A.lockPicks,{item:A.lockPicks,itemType:Oe,iconImg:"".concat(Ee,"lock-picks.png")}),Object(y.a)(ge,A.oil,{item:A.oil,itemType:Oe,iconImg:"".concat(Ee,"oil.png")}),Object(y.a)(ge,A.orcFinger,{item:A.orcFinger,itemType:Oe,iconImg:"".concat(Ee,"orc-finger.png")}),Object(y.a)(ge,A.plans,{item:A.plans,itemType:Oe,iconImg:"".concat(Ee,"plans.png")}),Object(y.a)(ge,A.purpleGems,{item:A.purpleGems,itemType:Oe,iconImg:"".concat(Ee,"purple-gems.png")}),Object(y.a)(ge,A.runestone,{item:A.runestone,itemType:Oe,iconImg:"".concat(Ee,"runestone.png")}),Object(y.a)(ge,A.sandwich,{item:A.sandwich,itemType:Oe,iconImg:"".concat(Ee,"sandwich.png")}),Object(y.a)(ge,A.teeth,{item:A.teeth,itemType:Oe,iconImg:"".concat(Ee,"teeth.png")}),Object(y.a)(ge,A.tooth,{item:A.tooth,itemType:Oe,iconImg:"".concat(Ee,"tooth.png")}),Object(y.a)(ge,A.torch,{item:A.torch,itemType:Oe,iconImg:"".concat(Ee,"torch.png")}),Object(y.a)(ge,A.tusk,{item:A.tusk,itemType:Oe,iconImg:"".concat(Ee,"tusk.png")}),Object(y.a)(ge,A.vase,{item:A.vase,itemType:Oe,iconImg:"".concat(Ee,"vase.png")}),Object(y.a)(ge,A.vial,{item:A.vial,itemType:Oe,iconImg:"".concat(Ee,"vial.png")}),Object(y.a)(ge,A.weeds,{item:A.weeds,itemType:Oe,iconImg:"".concat(Ee,"weeds.png")}),ge),Te=q.trinket,Ie=(ve={},Object(y.a)(ve,A.magicAmulet,{item:A.magicAmulet,itemType:Te,iconImg:"".concat("/img/items/trinkets/","magic_amulet.png")}),Object(y.a)(ve,A.ring,{item:A.ring,itemType:Te,iconImg:"".concat("/img/items/trinkets/","ring.png")}),ve),Ce=q.weapon,Ne="/img/items/weapons/";!function(e){e[e.axe=0]="axe",e[e.bow=1]="bow",e[e.club=2]="club",e[e.crossbow=3]="crossbow",e[e.fist=4]="fist",e[e.flail=5]="flail",e[e.hammer=6]="hammer",e[e.melee=7]="melee",e[e.knife=8]="knife",e[e.staff=9]="staff",e[e.sword=10]="sword",e[e.poleArm=11]="poleArm"}(he||(he={}));var xe=(fe={},Object(y.a)(fe,A.battleAxe,{item:A.battleAxe,itemType:Ce,weaponType:he.axe,subText:"It's an axe for battle",iconImg:"".concat(Ne,"battle_axe.png")}),Object(y.a)(fe,A.brassKnuckles,{item:A.brassKnuckles,itemType:Ce,weaponType:he.melee,subText:" Brass knuckles are pieces of metal shaped to fit around the knuckles.",iconImg:"".concat(Ne,"brass_knuckles.png")}),Object(y.a)(fe,A.crossbow,{item:A.crossbow,itemType:Ce,weaponType:he.crossbow,subText:"Shoots and reloads fast",iconImg:"".concat(Ne,"crossbow.png")}),Object(y.a)(fe,A.cleaver,{item:A.cleaver,itemType:Ce,weaponType:he.knife,subText:"A cleaver is a large knife that varies in its shape but usually resembles a rectangular-bladed hatchet.",iconImg:"".concat(Ne,"cleaver.png")}),Object(y.a)(fe,A.club,{item:A.club,itemType:Ce,weaponType:he.club,subText:"A club is among the simplest of all weapons: a short staff or stick, usually made of wood, wielded as a weapon",iconImg:"".concat(Ne,"club.png")}),Object(y.a)(fe,A.dagger,{item:A.dagger,itemType:Ce,weaponType:he.knife,subText:"Excellent for ritual sacrifice and cheese platters",iconImg:"".concat(Ne,"dagger.png")}),Object(y.a)(fe,A.flail,{item:A.flail,itemType:Ce,weaponType:he.flail,subText:"A flail is a weapon consisting of a striking head attached to a handle by a flexible rope, strap, or chain. ",iconImg:"".concat(Ne,"flail.png")}),Object(y.a)(fe,A.greatswordOfGwai,{item:A.greatswordOfGwai,itemType:Ce,weaponType:he.sword,subText:"Finer steel was seldom forged",iconImg:"".concat(Ne,"greatsword-gwai.png"),unique:!0}),Object(y.a)(fe,A.khopesh,{item:A.khopesh,itemType:Ce,weaponType:he.sword,subText:"Dafuq is this. Can I get garlic sauce with that?",iconImg:"".concat(Ne,"khopesh.png")}),Object(y.a)(fe,A.longbow,{item:A.longbow,itemType:Ce,weaponType:he.bow,subText:"A deadly killer from long range",iconImg:"".concat(Ne,"longbow.png")}),Object(y.a)(fe,A.mace,{item:A.mace,itemType:Ce,weaponType:he.club,subText:"A mace is a blunt weapon, a type of club or virge that uses a heavy head on the end of a handle to deliver powerful blows.",iconImg:"".concat(Ne,"mace.png")}),Object(y.a)(fe,A.morningStar,{item:A.morningStar,itemType:Ce,weaponType:he.club,subText:"A morning star is any of several medieval club-like weapons consisting of a shaft with an attached ball adorned with one or more spikes.",iconImg:"".concat(Ne,"morning-star.png")}),Object(y.a)(fe,A.poisonedDagger,{item:A.poisonedDagger,itemType:Ce,weaponType:he.knife,subText:"Excellent for ritual sacrifice and cheese platters",iconImg:"".concat(Ne,"poisoned-dagger.png")}),Object(y.a)(fe,A.ravenStaff,{item:A.ravenStaff,itemType:Ce,weaponType:he.staff,subText:"Kaa, kaa!",iconImg:"".concat(Ne,"raven-staff.png")}),Object(y.a)(fe,A.savageStaff,{item:A.savageStaff,itemType:Ce,weaponType:he.staff,subText:"Savage dude",iconImg:"".concat(Ne,"savage-staff.png")}),Object(y.a)(fe,A.spear,{item:A.spear,itemType:Ce,weaponType:he.poleArm,subText:"A spear is a pole weapon consisting of a shaft, usually of wood, with a pointed head. ",iconImg:"".concat(Ne,"sword.png")}),Object(y.a)(fe,A.sword,{item:A.sword,itemType:Ce,weaponType:he.sword,subText:"An elegant weapon for a more civilized age",iconImg:"".concat(Ne,"sword.png")}),Object(y.a)(fe,A.warhammer,{item:A.warhammer,itemType:Ce,weaponType:he.hammer,subText:"A war hammer is a late medieval weapon of war intended for close combat action, whose design resembles the hammer",iconImg:"".concat(Ne,"warhammer.png")}),fe),Se=Object(S.a)({},le,be,ke,je,Ie,xe),qe=Se;function Ae(e){return Se[e]}var De=n(32),Re=function(){function e(){Object(w.a)(this,e)}return Object(k.a)(e,null,[{key:"init",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.texts=e,this.templates={},t&&this.compileAll(),this.initialized=!0}},{key:"get",value:function(e,t){if(!this.initialized)throw new Error("Error ".concat(this," not initialized!"));var n=this.getTemplate(e);return n?n(t):(console.error("Key '".concat(e,"' not found in TextManager")),"<<'".concat(e,"' missing>>"))}},{key:"getTextEntry",value:function(e){return this.get(e.key,e.context)}},{key:"getTemplate",value:function(e){var t=this.templates[e];return!t&&this.texts[e]&&(this.compile(e,this.texts[e]),t=this.templates[e]),t}},{key:"getQuestTitle",value:function(e){return this.get("quest-".concat(e,"-title"))}},{key:"getQuestDescription",value:function(e){return this.get("quest-".concat(e,"-description"))}},{key:"getResourceName",value:function(e){return this.get("resource-".concat(e,"-name"))}},{key:"getItemName",value:function(e){var t=q[Ae(e).itemType];return this.get("item-".concat(t,"-").concat(e,"-name"))}},{key:"getStructureName",value:function(e){return this.get("structure-".concat(e,"-name"))}},{key:"compileAll",value:function(){var e=this;Object.keys(this.texts).forEach(function(t){e.compile(t,e.texts[t])})}},{key:"compile",value:function(e,t){var n=De.compile(t);this.templates[e]=n}}]),e}();Re.initialized=!1,Re.texts=void 0,Re.templates=void 0,De.registerHelper("item:name",function(e,t){if(!qe[e])return new De.SafeString("<<ITEM DEFINITION NOT FOUND: ".concat(e,">>"));switch(t){case"aA":return Me(e);case"aD":case"aU":return Le(e);default:var n=qe[e].name;return new De.SafeString(n)}}),De.registerHelper("structure:name",function(e){var t=Re.get("structure-".concat(e,"-name"));return new De.SafeString(t)});var We,Me=function(e){return Be(e)},Be=function(e){var t=Re.getItemName(e),n=Re.getTemplate("common-article-undefined");return new De.SafeString("".concat(n({noun:t})))},Le=function(e){var t=Re.getItemName(e),n=Re.getTemplate("common-article-defined");return new De.SafeString("".concat(n({noun:t})))};n(147);!function(e){e[e.all=0]="all",e[e.town=1]="town",e[e.quest=2]="quest"}(We||(We={}));var Qe,He=function(e){function t(e){var n;return Object(w.a)(this,t),(n=Object(O.a)(this,Object(E.a)(t).call(this,e))).state={expanded:!1,selectedTabId:"all"},n}return Object(T.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this,t=[{label:Re.get("common-log-tab-all"),tabId:"all",tabType:We.all},{label:Re.get("common-log-tab-town"),tabId:"town",tabType:We.town}];this.props.questNames.forEach(function(e){t.push({channelContext:e,label:Re.getQuestTitle(e),tabId:"quest-".concat(e),tabType:We.quest})});var n=[],r=t.find(function(t){return t.tabId===e.state.selectedTabId});switch(r.tabType){case We.all:n=this.props.logEntries;break;case We.town:n=this.props.logEntries.filter(function(e){return e.channel===a.town});break;case We.quest:n=this.props.logEntries.filter(function(e){return e.channel===a.quest&&e.channelContext===r.channelContext})}var o=t.map(function(e){return m.createElement(C,{id:e.tabId,key:e.tabId},e.label)});return m.createElement("div",{className:"log ".concat(this.state.expanded?"expanded":"")},m.createElement("div",{className:"tab-bar"},m.createElement(x,{className:"tabs",onTabSelected:function(t){return e.handleTabSelected(t)}},o),m.createElement(I,{className:"expand-button",onClick:function(){return e.handleToggleExpand()},text:this.state.expanded?"\u25bc":"\u25b2"})),m.createElement("div",{className:"log-entries"},n.map(function(e){return function(e){var t=Re.get(e.key,e.context);return m.createElement("div",{className:"entry",key:e.time},t)}(e)})))}},{key:"handleTabSelected",value:function(e){this.setState({selectedTabId:e})}},{key:"handleToggleExpand",value:function(){this.setState({expanded:!this.state.expanded})}}]),t}(m.Component),_e=n(36);!function(e){e[e.unavailable=0]="unavailable",e[e.available=1]="available",e[e.active=2]="active",e[e.completed=3]="completed"}(Qe||(Qe={}));var Ge,Fe=function(e){return e.log},Ue=Object(_e.a)([function(e){return e.quests}],function(e){return e.filter(function(e){return e.status===Qe.active}).map(function(e){return e.name})}),ze=function(e,t){return Object(_e.a)([Fe],function(e){return e.find(function(e){return e.channel===a.quest&&e.channelContext===t})})(e)},Pe=Object(g.b)(function(e){return{logEntries:e.log,questNames:Ue(e)}},function(e){return{}})(He),Ve=n(33);!function(e){e[e.NotBuilt=0]="NotBuilt",e[e.Building=1]="Building",e[e.Built=2]="Built"}(Ge||(Ge={}));var Ke,Xe,Ye;Ge.NotBuilt;!function(e){e[e.town=0]="town",e[e.world=1]="world"}(Ke||(Ke={})),function(e){e[e.buttonClick=0]="buttonClick"}(Xe||(Xe={}));var Je={},Ze=null,$e={},et=function(){function e(){Object(w.a)(this,e)}return Object(k.a)(e,null,[{key:"loadMedia",value:function(e){Ye=e}},{key:"addSounds",value:function(e){Object.entries(e).forEach(function(e){var t=Object(N.a)(e,2),n=t[0],r=t[1];$e[n]=Ye.find(function(e){return e.url===r}).content})}},{key:"playSound",value:function(e){$e[e].play()}},{key:"addMusicTrack",value:function(e,t){var n=Ye.find(function(e){return e.url===t});if(!n)throw new Error("No sound found at ".concat(t));Je.hasOwnProperty(e)||(Je[e]=n.content)}},{key:"playMusicTrack",value:function(e){null!==Ze&&Je[Ze].fade(1,0,500);var t=Je[e];t.playing()||(t.loop(!0),t.play()),t.fade(0,1,500),Ze=e}}]),e}(),tt=(n(193),function(e){function t(e){var n;return Object(w.a)(this,t),(n=Object(O.a)(this,Object(E.a)(t).call(this,e))).plasmaBeam=void 0,n.anim=void 0,n.handleStructureClick=function(e){n.props.onStructureClick&&n.props.onStructureClick(M[e.target.name()])},n.handleBackgroundClick=function(e){n.props.onStructureClick&&n.props.onStructureClick(null)},n.state={images:{}},et.addMusicTrack(Ke.town,"sound/music/Soliloquy.mp3"),n}return Object(T.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){this.playMusic()}},{key:"componentWillUnmount",value:function(){this.anim&&this.anim.stop(),delete this.anim}},{key:"render",value:function(){var e=this,t=Object.keys(M).map(function(t,n){var r=ce[t],a=e.props.structures[t];if(a.state===Ge.NotBuilt)return null;var o=r.levels[a.level],c=Re.get(o.displayName);return m.createElement(Ve.Text,{name:t,key:t,text:"".concat(c," (level ").concat(a.level+1,")"),x:100,y:50*n+100,fontSize:40,fill:"white",onClick:e.handleStructureClick})});return console.log("rendered the town"),m.createElement(Ve.Stage,{width:1024,height:768,scale:{x:.4,y:.4}},m.createElement(Ve.Layer,{name:"background",onClick:this.handleBackgroundClick},m.createElement(Ve.Image,{image:this.imgSrc("img/town/sky.jpg")})),m.createElement(Ve.Layer,{name:"town"},m.createElement(Ve.Image,{name:"warehouse",image:this.imgSrc("img/town/tavern.png"),x:15,y:1057,shadowBlur:15,shadowColor:"red",shadowEnabled:!0,strokeWidth:30,ref:function(e){nt(e)}}),m.createElement(Ve.Image,{name:M.warehouse,image:this.imgSrc("img/town/lighthouse.png"),ref:function(e){nt(e)}}),m.createElement(Ve.Image,{name:"lumberMill",image:this.imgSrc("img/town/mill.png"),x:947,y:1384,shadowBlur:15,ref:function(e){nt(e)}}),t))}},{key:"imgSrc",value:function(e){var t=this.props.media.find(function(t){return t.url===e});if(void 0===t)throw Error("Could not find image with url ".concat(e));return t.content}},{key:"playMusic",value:function(){et.playMusicTrack(Ke.town)}}]),t}(m.Component)),nt=function(e){},rt=tt,at=function(e){return function(t){function n(){return Object(w.a)(this,n),Object(O.a)(this,Object(E.a)(n).apply(this,arguments))}return Object(T.a)(n,t),Object(k.a)(n,[{key:"render",value:function(){var t=this;return m.createElement(Sr.Consumer,null,function(n){return m.createElement(e,Object.assign({},t.props,n))})}}]),n}(m.Component)},ot=n(15);var ct,st,it=Object(ot.c)(Object(g.b)(function(e,t){return{structures:e.structures}},function(e,t){return{}}),at)(rt);function ut(e){return{type:ct.addGold,amount:e}}function lt(e){return{type:ct.addGold,amount:-e}}function mt(e){return{type:st.addResources,resources:e}}(ct||(ct={})).addGold="addGold",function(e){e.addResources="addResources",e.removeResources="removeResources"}(st||(st={}));n(45),n(194);var dt,pt,gt=function(e){var t=e.itemsInInventory,n=(e.className||"")+" itemsbox",r=e.items.reduce(function(e,t){return e[t]||(e[t]=0),e[t]++,e},{}),a=Object.keys(r).map(function(e){var n=e,a=r[e],o="item";a>(t?t.filter(function(e){return e===n}).length:0)&&(o+=" missing");var c=qe[n];return m.createElement("li",{className:o,key:n},m.createElement("div",{className:"icon common-icon-smallest",style:{backgroundImage:"url(".concat(c.iconImg,")")}}),m.createElement("div",{className:"name"},"".concat(Re.getItemName(n)," (").concat(a,")")))});return m.createElement("ul",{className:n},a)},vt=Object(g.b)(function(e,t){var n=[],r=Object(b.a)(e.items);return t.items.forEach(function(e){var t=r.findIndex(function(t){return t===e});if(t>-1){var a=r.splice(t,1),o=Object(N.a)(a,1)[0];o&&n.push(o)}}),{itemsInInventory:n}})(gt);!function(e){e.wood="wood",e.iron="iron",e.stone="stone",e.leather="leather",e.fabric="fabric",e.food="food"}(pt||(pt={}));var ft,ht,bt=(dt={},Object(y.a)(dt,pt.wood,{resource:pt.wood,iconImg:"/img/resources/wood.png"}),Object(y.a)(dt,pt.iron,{resource:pt.iron,iconImg:"/img/resources/iron.png"}),Object(y.a)(dt,pt.stone,{resource:pt.stone,iconImg:"/img/resources/stone.png"}),Object(y.a)(dt,pt.leather,{resource:pt.leather,iconImg:"/img/resources/leather.png"}),Object(y.a)(dt,pt.fabric,{resource:pt.fabric,iconImg:"/img/resources/fabric.png"}),Object(y.a)(dt,pt.food,{resource:pt.food,iconImg:"/img/resources/food.png"}),dt),yt=(n(58),function(e){var t=e.sufficientResources,n=(e.className||"")+" resourcesbox",r=Object.keys(e.resources).map(function(n){var r="resource";t&&!t[n]&&(r+=" insufficient");var a=bt[n];if(!a)throw new Error("No resource description found for ".concat(n));return m.createElement("li",{className:r,key:n},m.createElement("div",{className:"icon",style:{backgroundImage:"url(".concat(a.iconImg,")")}}),m.createElement("div",{className:"name"},Re.getResourceName(n)),m.createElement("div",{className:"amount"},e.resources[n]))});return m.createElement("ul",{className:n},r)}),wt=Object(g.b)(function(e,t){var n={};return Object.keys(t.resources).forEach(function(r){n[r]=e.resources[r]>=t.resources[r]}),{sufficientResources:n}})(yt),kt=function(e,t){if(t>6)throw new Error("Cannot possibly have more than ".concat(6," on one item!"));return e-.1*e*t};!function(e){e[e.item=0]="item"}(ft||(ft={})),function(e){e[e.smallest=0]="smallest",e[e.small=1]="small",e[e.medium=2]="medium",e[e.big=3]="big",e[e.biggest=4]="biggest"}(ht||(ht={}));var Ot=function e(t){switch(t){case ht.smallest:return"common-icon-smallest";case ht.small:return"common-icon-small";case ht.medium:return"common-icon-medium";case ht.big:return"common-icon-big";case ht.biggest:return"common-icon-biggest"}return e(ht.medium)},Et=(n(195),function(e){var t=e.item,n=Ae(t),r=m.useContext(Sr),a=m.useRef(null);n||console.warn("could not find definition for ".concat(t));var o="item-icon "+Ot(e.size);return m.createElement("div",{className:o,onClick:function(n){if(!1!==e.showContext){var o=n.currentTarget.getBoundingClientRect();r.onContextualObjectActivated(ft.item,Ae(t),a,o)}e.onClick&&e.onClick(n)},style:{backgroundImage:"url(".concat(n.iconImg,")")}})}),jt=(n(196),function(e){var t,n,r,a=(t=e.progress||0,n=0,t>(r=1)?r:t<n?n:t);return m.createElement("div",{className:"progressbar"},m.createElement("div",{className:"progressbar-label"},e.label),m.createElement("div",{className:"progressbar-info",style:{width:"".concat(100*a,"%")}},"  "))});n(197);var Tt,It,Ct,Nt=function(e){var t;return t=null==e.max?e.value:m.createElement("span",null,e.value," / ",m.createElement("span",{className:"max"},e.max)),m.createElement("div",{className:"updownvalue"},m.createElement("label",null," ",e.label),t,m.createElement("i",{className:"arrow up"+(e.upDisabled?" disabled":""),onClick:function(t){e.onUp&&!e.upDisabled&&e.onUp(t)}}),m.createElement("i",{className:"arrow down"+(e.downDisabled?" disabled":""),onClick:function(t){e.onDown&&!e.downDisabled&&e.onDown(t)}}))},xt=(n(198),function(e){function t(e){var n;return Object(w.a)(this,t),(n=Object(O.a)(this,Object(E.a)(t).call(this,e))).state={selectedItem:null,workersAssigned:0},n}return Object(T.a)(t,e),Object(k.a)(t,[{key:"componentWillMount",value:function(){console.log("component will mount"+this.props.type)}},{key:"componentWillUnmount",value:function(){console.log("component will unmount"+this.props.type)}},{key:"render",value:function(){var e=this,t=ce[this.props.type];if(!t)throw new Error("No definition found for structure ".concat(this.props.type,"\n                with type ProductionStructureDefinition."));var n=this.props.level||0,r=t.levels[n],a=Re.get(r.displayName);return m.createElement("details",{open:!0,className:"productionstructureview"},m.createElement("summary",null,a),m.createElement("section",null,function(){var r=e.props.gold,a=t.levels[n+1],o=null!=a?a.cost.gold||0:-1,c=null!=a&&r>=o,s="Upgrade! (".concat(o<0?"max":o+" gold",")");return m.createElement("div",null,m.createElement("label",null,"level:"),n+1+" / "+t.levels.length,m.createElement("button",{style:{float:"right"},onClick:function(t){e.props.onUpgrade&&e.props.onUpgrade(o,n+1)},disabled:!c},s))}(),m.createElement("div",null,"craft:"),m.createElement("div",{className:"crafting-area"},m.createElement("ul",{className:"vertical-tab-bar"},function(){var t=e.state.selectedItem;return r.produces.map(function(n){return m.createElement("li",{key:"craft".concat(n.item),onClick:function(t){t.stopPropagation(),e.setState({selectedItem:n.item})},className:t===n.item?"selected":""},m.createElement(Et,{item:n.item}),Re.getItemName(n.item))})}()),function(){var t=e.state.selectedItem;if(!t)return null;var n=r.produces.find(function(e){return e.item===t}),a=e.props.resources||{},o=n.cost.resources,c=Object.keys(o).some(function(e){return o[e]>a[e]}),s=!1,i=n.cost.materials;i&&(s=i.some(function(t){return-1===e.props.items.indexOf(t)}));var u=c||s||e.state.workersAssigned<1,l=qe[t],d=null;return i&&(d=m.createElement(vt,{items:i})),m.createElement("div",{className:"crafting-details"},"Craft a ",Re.getItemName(l.item),m.createElement("div",{className:"crafting-costs"},m.createElement("fieldset",null,m.createElement(wt,{resources:o})),m.createElement("fieldset",null,d)),m.createElement("div",{style:{display:"flex "}},m.createElement(Nt,{value:e.state.workersAssigned,label:"Workers: ",onUp:function(t){t.stopPropagation(),e.setState({workersAssigned:e.state.workersAssigned+1})},onDown:function(t){t.stopPropagation(),e.setState({workersAssigned:e.state.workersAssigned-1})},upDisabled:e.state.workersAssigned>=e.props.workersFree||e.state.workersAssigned>=6,downDisabled:e.state.workersAssigned<1}),"\xa0",function(t){if(0===e.state.workersAssigned)return"";var n=kt(t,e.state.workersAssigned),r=W(n);return" Crafting time: ".concat(r)}(n.cost.time||0)),m.createElement("div",null,m.createElement("button",{disabled:u,onClick:function(t){t.stopPropagation(),e.props.onCraft&&(e.props.onCraft(n,e.state.workersAssigned),e.setState({workersAssigned:0}))}},"Craft")))}()),m.createElement("fieldset",null,m.createElement("legend",null,"Currently crafting:"),(e.props.tasks||[]).map(function(e){return m.createElement(jt,{key:"".concat(e.name).concat(e.startTime),label:"".concat(e.name," (").concat(W(e.timeRemaining),")"),progress:e.progress})}))))}}]),t}(m.Component));function St(e,t){return{type:Tt.addItem,item:e,toSlot:t}}function qt(e){return{type:It.finishBuildingStructure,structure:e}}function At(e){return{type:It.upgradeStructure,structure:e}}function Dt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{type:It.increaseWorkers,structure:e,workers:t}}function Rt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{type:It.decreaseWorkers,structure:e,workers:t}}function Wt(e,t,n,r,a){return{type:Ct.start,taskType:e,name:t,origin:n,time:r,callbacks:a}}!function(e){e.addItem="addItem",e.moveItemInWarehouse="moveItemInWarehouse",e.removeItem="removeItem"}(Tt||(Tt={})),function(e){e.upgradeStructure="upgradeStructure",e.increaseWorkers="increaseWorkers",e.decreaseWorkers="decreaseWorkers",e.startBuildingStructure="startBuildingStructure",e.finishBuildingStructure="finishBuildingStructure",e.setStructureState="setStructureState"}(It||(It={})),function(e){e.start="startTask",e.update="updateTasks"}(Ct||(Ct={}));var Mt,Bt=Object(_e.a)([function(e){return e.structures},function(e){return e.workers}],function(e,t){return t-Object.keys(e).map(function(t){return e[t]}).reduce(function(e,t){return e+t.workers},0)});!function(e){e[e.buildStructure=0]="buildStructure",e[e.craftItem=1]="craftItem"}(Mt||(Mt={}));var Lt=Object(g.b)(function(e,t){var n=e.structures[t.type],r=e.tasks.running.filter(function(e){return e.origin==="".concat(t.type,".craft")});return{gold:e.gold,items:e.items,level:n.level,resources:e.resources,tasks:r,workersFree:Bt(e)}},function(e,t){return{onCraft:function(n,r){var a,o=kt(n.cost.time||0,r);e((a=n.cost.resources||{},{type:st.removeResources,resources:a})),e(Dt(t.type,r));var c=[St(n.item),Rt(t.type,r)],s=Wt(Mt.craftItem,n.item,"".concat(t.type,".craft"),o,c);e(s)},onUpgrade:function(n,r){e(lt(n)),e(At(t.type)),e(v("log-town-upgrade-structure-complete",{level:++r,structure:t.type},a.town))}}})(xt),Qt=function(e){var t=ce[e.type];if(!t)throw new Error("No definition found for structure ".concat(e.type," with type ResourceStructureDefinition."));var n=e.level||0,r=t.levels[n],a=Re.get(r.displayName);return m.createElement("details",{open:!0,className:"structureview"},m.createElement("summary",null,a),m.createElement("section",null,function(){var t=e.workers===r.workerCapacity||(e.workersFree||0)<1,n=0===e.workers;return m.createElement(Nt,{label:"workers:",value:e.workers,max:r.workerCapacity,upDisabled:t,downDisabled:n,onDown:function(){e.onWorkersDown&&e.onWorkersDown()},onUp:function(){e.onWorkersUp&&e.onWorkersUp()}})}(),function(){var r=e.gold||0,a=t.levels[n+1],o=null!=a?a.cost.gold||0:-1,c=null!=a&&r>=o,s="Upgrade! (".concat(o<0?"max":o+" gold",")");return m.createElement("div",null,m.createElement("label",null,"level:"),n+1+" / "+t.levels.length,m.createElement("button",{style:{float:"right"},onClick:function(t){e.onUpgrade&&e.onUpgrade(o,n+1)},disabled:!c},s))}(),function(){var t=r.generates,n=Object.keys(t).reduce(function(n,r){return t[r]&&n.push("".concat(t[r]," x ").concat(e.workers," = ").concat(t[r]*(e.workers||0)," ").concat(r)),n},[]).join(",");return m.createElement("div",null,"Generates (every minute): ",m.createElement("br",null),n)}()))};var Ht,_t=Object(g.b)(function(e,t){var n=e.structures[t.type];if(!n)throw new Error("No structure '".concat(t.type,"' found in the store!"));return{gold:e.gold,level:n.level,workers:n.workers,workersFree:Bt(e)}},function(e,t){return{onUpgrade:function(n,r){e(lt(n)),e(At(t.type)),e(v("log-town-upgrade-structure-complete",{level:++r,structure:t.type},a.town))},onWorkersDown:function(){e(Rt(t.type))},onWorkersUp:function(){e(Dt(t.type))}}})(Qt);function Gt(e){return{type:Ht.advanceQuest,questName:e}}function Ft(e,t){return{type:Ht.startEncounter,questName:e,encounter:t}}!function(e){e.launchQuest="launchQuest",e.advanceQuest="advanceQuest",e.updateQuestVars="updateQuestVars",e.updateEncounterResult="updateEncounterResult",e.startEncounter="startEncounter",e.updateQuests="updateQuests"}(Ht||(Ht={}));var Ut,zt="adventurer",Pt="item";!function(e){e[e.adventurerInventory=0]="adventurerInventory",e[e.warehouse=1]="warehouse",e[e.tavern=2]="tavern",e[e.adventurerEquipment=3]="adventurerEquipment"}(Ut||(Ut={}));var Vt=n(20),Kt=(n(200),function(e){var t=e.adventurer,n=(e.className||"")+" avatar";return m.createElement("div",{className:n,style:{backgroundImage:"url(".concat(t.avatarImg,")")},onClick:function(){e.onClick&&e.onClick(e.adventurer.id)}},m.createElement("div",{className:"sizer"}),e.displayName&&m.createElement("div",{className:"name"},t.name))}),Xt=(n(201),{beginDrag:function(e){return{adventurer:e.adventurer,sourceId:e.sourceId,sourceType:Ut.adventurerInventory}}});var Yt,Jt,Zt=function(e){function t(){return Object(w.a)(this,t),Object(O.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isDragging,n=e.connectDragSource,r="draggable-adventurer-avatar";return e.disabled&&(r+=" disabled"),t&&(r+=" dragging"),n(m.createElement("div",{className:r},m.createElement(Kt,this.props)))}}]),t}(m.Component),$t=Object(Vt.c)(zt,Xt,function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(Zt);!function(e){e.backstabbed="backstabbed",e.goblinHouseHallway="goblinHouseHallway",e.goblinHouseOutside="goblinHouseOutside",e.theBigTree="theBigTree"}(Yt||(Yt={})),function(e){e[e.nothing=0]="nothing",e[e.encounter=1]="encounter",e[e.combat=2]="combat",e[e.boss=3]="boss"}(Jt||(Jt={}));var en={kill10Boars:{nodes:[{x:0,y:1,type:Jt.nothing,log:"quest-kill10Boars-node0"},{x:0,y:3,type:Jt.nothing,log:"quest-kill10Boars-node1"},{x:0,y:2,type:Jt.encounter,encounter:Yt.goblinHouseOutside},{x:0,y:3,type:Jt.nothing,log:"quest-kill10Boars-node4"},{x:1,y:3,type:Jt.nothing},{x:1,y:3,type:Jt.nothing},{x:2,y:1,type:Jt.encounter,encounter:Yt.backstabbed},{x:1,y:3,type:Jt.nothing,log:"The party spots a boss"},{x:2,y:3,type:Jt.boss}]},retrieveMagicAmulet:{requiredItems:[A.torch,A.torch,A.torch,A.sandwich,A.sandwich],nodes:[{x:0,y:1,type:Jt.nothing},{x:1,y:1,type:Jt.nothing,log:"Papa loves mambo"},{x:1,y:1,type:Jt.nothing,log:"Mama loves mambo"},{x:1,y:1,type:Jt.nothing,log:"Look at 'em sway with it"},{x:1,y:1,type:Jt.nothing,log:"gettin' so gay with it"},{x:1,y:1,type:Jt.nothing},{x:1,y:1,type:Jt.nothing},{x:0,y:2,type:Jt.encounter,encounter:Yt.theBigTree},{x:1,y:1,type:Jt.nothing},{x:1,y:1,type:Jt.nothing},{x:1,y:1,type:Jt.nothing},{x:1,y:1,type:Jt.nothing},{x:1,y:1,type:Jt.nothing},{x:1,y:1,type:Jt.nothing},{x:1,y:1,type:Jt.nothing},{x:1,y:1,type:Jt.nothing},{x:1,y:1,type:Jt.nothing},{x:2,y:1,type:Jt.encounter,encounter:Yt.backstabbed},{x:3,y:1,type:Jt.boss}]}},tn=en;function nn(e){return en[e]}n(202);var rn=function(e){function t(){return Object(w.a)(this,t),Object(O.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isOver,n=e.canDrop,r="droppable-adventurer-slot";return t?r+=" active-drop":n&&(r+=" can-drop"),(0,e.connectDropTarget)(m.createElement("div",{className:r}))}}]),t}(m.Component),an=Object(Vt.d)(zt,{drop:function(e,t){e.onDrop(t.getItem())},canDrop:function(e,t){return!0}},function(e,t){return{canDrop:t.canDrop(),connectDropTarget:e.dropTarget(),isOver:t.isOver()}})(rn),on=(n(203),function(e){return m.createElement("ul",{className:"assign-adventurers"},function(){for(var t=[],n=function(n){var r=void 0,a="";if(e.assignedAventurers[n]){var o=e.assignedAventurers[n];r=m.createElement(Kt,{adventurer:o,displayName:!1,onClick:function(){return e.onRemoveAdventurer(n)}}),a="has-adventurer"}else r=m.createElement(an,{onDrop:function(t){e.onAddEventurer(t,n)}});t.push(m.createElement("li",{key:"slot".concat(n),className:a}," ",r," "))},r=0;r<e.availableSlots;r++)n(r);return t}())}),cn=(n(204),function(e){function t(e){var n;return Object(w.a)(this,t),(n=Object(O.a)(this,Object(E.a)(t).call(this,e))).state={selectedQuest:null},n}return Object(T.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this,t=this.props.availableQuests.map(function(t){var n="img/sigils/".concat(t.icon),r="quest"+(t.name===e.props.selectedQuestName?" selected":"");return m.createElement("li",{key:t.name,className:r,onClick:function(){e.props.onQuestClick(t.name)}},m.createElement("div",{className:"icon",style:{backgroundImage:"url(".concat(n,")")}}),m.createElement("div",{className:"title"},Re.getQuestTitle(t.name)," "))});return m.createElement("div",{className:"quest-board"},m.createElement("h2",null," ",Re.get("structure-tavern-title-quest-board")," "),m.createElement("ul",{className:"quest-list"},t),function(){if(!e.props.selectedQuestName)return null;var t=e.props.availableQuests.find(function(t){return t.name===e.props.selectedQuestName});if(!t)return m.createElement("div",null," ",Re.get("structure-tavern-quest-launched")," ");var n=nn(t.name),r=e.props.assignedAventurers.filter(function(e){return null!==e}).length>=3,a=e.checkEnoughItems(n),o=r&&a;return m.createElement("div",{className:"quest-details"},Re.getQuestDescription(e.props.selectedQuestName),m.createElement(on,{availableSlots:5,assignedAventurers:e.props.assignedAventurers,onRemoveAdventurer:e.props.onRemoveAdventurer,onAddEventurer:e.props.onAddAdventurer}),m.createElement(vt,{items:n.requiredItems||[]}),m.createElement("button",{disabled:!o,onClick:function(){return e.props.onLaunchQuest()}},Re.get("structure-tavern-button-launch-quest")))}())}},{key:"checkEnoughItems",value:function(e){var t=this;return!e.requiredItems||e.requiredItems.every(function(n){var r=e.requiredItems.filter(function(e){return e===n}).length;return t.props.items.filter(function(e){return e===n}).length>=r})}}]),t}(m.Component));var sn=Object(g.b)(function(e,t){return{items:e.items}})(cn),un=(n(205),function(e){function t(e){var n;return Object(w.a)(this,t),(n=Object(O.a)(this,Object(E.a)(t).call(this,e))).state={assignedAventurers:[],selectedQuestName:null},n}return Object(T.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this,t=ce[M.tavern],n=this.props.level||0,r=t.levels[n],a=Re.get(r.displayName),o=r.rooms,c=this.props.quests.filter(function(e){return e.status===Qe.available});return m.createElement("details",{open:!0,className:"tavernstructureview"},m.createElement("summary",null,a),function(){var r=e.props.gold,a=t.levels[n+1],o=null!=a?a.cost.gold||0:-1,c=null!=a&&r>=o,s="Upgrade! (".concat(o<0?"max":o+" gold",")");return m.createElement("div",null,m.createElement("label",null,"level:"),n+1+" / "+t.levels.length,m.createElement("button",{style:{float:"right"},onClick:function(t){e.props.onUpgrade&&e.props.onUpgrade(o,n+1)},disabled:!c},s))}(),m.createElement("section",null,function(){for(var t=[],n=function(n){var r=e.props.adventurers.find(function(e){return e.room===n}),a=null;if(r){var o=r.name,c=e.state.assignedAventurers.indexOf(r)>-1,s=e.getQuestByAdventurer(r.id);s&&(o+=" (on a quest)"),a=[m.createElement($t,{disabled:c||null!=s,adventurer:r,className:"adventurer-icon",sourceId:"tavern",key:"avatar:".concat(r.id)}),o]}else a="(empty room)";t.push(m.createElement("div",{key:"room".concat(n),className:"room"},a))},r=0;r<o;r++)n(r);return m.createElement("div",{className:"rooms"},m.createElement("h2",null,"Rooms"),t)}(),m.createElement(sn,{availableQuests:c,selectedQuestName:this.state.selectedQuestName,assignedAventurers:this.state.assignedAventurers,onQuestClick:function(t){return e.handleQuestClick(t)},onAddAdventurer:function(t,n){return e.handleAddAdventurer(t,n)},onRemoveAdventurer:function(t){return e.handleRemoveAdventurer(t)},onLaunchQuest:function(){return e.handleLaunchQuest()}})))}},{key:"handleQuestClick",value:function(e){this.state.selectedQuestName===e?this.setState({selectedQuestName:null}):this.setState({selectedQuestName:e}),this.setState({assignedAventurers:[]})}},{key:"handleAddAdventurer",value:function(e,t){if("tavern"===e.sourceId){var n=Object(b.a)(this.state.assignedAventurers);n[t]=e.adventurer,this.setState({assignedAventurers:n})}}},{key:"handleRemoveAdventurer",value:function(e){var t=Object(b.a)(this.state.assignedAventurers);delete t[e],this.setState({assignedAventurers:t})}},{key:"handleLaunchQuest",value:function(){var e=this.state.assignedAventurers,t=this.state.selectedQuestName;this.props.onLaunchQuest(t,e)}},{key:"getQuestByAdventurer",value:function(e){return Object.values(this.props.quests).find(function(t){return t.party.indexOf(e)>-1})}}]),t}(m.Component));var ln,mn=Object(g.b)(function(e,t){var n=e.structures[M.tavern];return{adventurers:e.adventurers,gold:e.gold,level:n.level,quests:e.quests}},function(e,t){return{onLaunchQuest:function(t,n){e(function(e,t){return{type:Ht.launchQuest,questName:e,assignedAventurers:t}}(t,n))},onUpgrade:function(t,n){e(lt(t)),e(At(M.tavern)),e(v("log-town-upgrade-structure-complete",{level:++n,structure:M.tavern},a.town))}}})(un);function dn(e,t,n){return{type:ln.moveItemInInventory,adventurerId:e,fromSlot:t,toSlot:n}}function pn(e,t,n){return{type:ln.addItemToInventory,adventurerId:e,item:t,toSlot:n}}function gn(e,t){return{type:ln.removeItemFromInventory,adventurerId:e,fromSlot:t}}!function(e){e.moveItemInInventory="moveItemInInventory",e.moveItemToOtherAdventurer="moveItemToOtherAdventurer",e.moveItemFromWarehouseToAdventurer="moveItemFromWarehouseToAdventurer",e.addItemToInventory="addItemToInventory",e.removeItemFromInventory="removeItemFromInventory",e.assignEquipment="assignEquipment"}(ln||(ln={}));var vn=function(e){function t(){return Object(w.a)(this,t),Object(O.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.onClick,r=e.isDragging,a=e.connectDragSource,o=e.size;return r?null:a(m.createElement("div",null,m.createElement(Et,{item:t,onClick:function(e){n&&n(e)},size:o})))}}]),t}(m.Component),fn=Object(Vt.c)(Pt,{beginDrag:function(e){return{inventorySlot:e.index,item:e.item,sourceId:e.sourceId,sourceType:e.sourceType}}},function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(vn),hn=(n(206),function(e){function t(){return Object(w.a)(this,t),Object(O.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isOver,n=e.canDrop,r=e.connectDropTarget;var a="inventory-item "+Ot(this.props.size);return r(m.createElement("div",{className:a},this.props.children))}}]),t}(m.Component)),bn=Object(Vt.d)(Pt,{drop:function(e,t){e.onDrop(t.getItem())},canDrop:function(e){return e.empty}},function(e,t){return{canDrop:t.canDrop(),connectDropTarget:e.dropTarget(),isOver:t.isOver()}})(hn),yn=at(function(e){for(var t=[],n=function(n){var r=void 0,a=e.items[n];a&&(r=m.createElement(fn,{index:n,sourceId:e.sourceId,sourceType:e.sourceType,item:a}));var o=m.createElement(bn,{key:"inventory-slot-".concat(n),empty:void 0===r,size:e.iconSize,onDrop:function(t){if(e.onDropItem){var r=t.inventorySlot;e.onDropItem(t.item,r,n,t.sourceType,t.sourceId)}}},r);t.push(o)},r=0;r<e.items.length;r++)n(r);return m.createElement("div",{className:"inventory"},t)}),wn=function(e){var t=e.sufficientResources,n=e.resources,r=e.deltaResources,a=(e.className||"")+" resourcesbox",o=Object.keys(n).map(function(n){var a="resource";t&&!t[n]&&(a+=" insufficient");var o,c=bt[n],s=e.resources[n];if(!c)throw new Error("No resource description found for ".concat(n));return r[n]&&(o=m.createElement("span",{className:"animate-up"},"+ ".concat(r[n].toFixed(2)))),m.createElement("li",{className:a,key:n},m.createElement("div",{className:"icon common-icon-smallest",style:{backgroundImage:"url(".concat(c.iconImg,")")}}),m.createElement("div",{className:"name"},Re.getResourceName(n)),m.createElement("div",{className:"amount"},s.toFixed(1)),m.createElement("div",{className:"max"}," / ".concat(e.maxResources[n])),m.createElement("div",{className:"delta"},o))});return m.createElement("ul",{className:a},o)},kn=(n(207),Ut.warehouse),On=function(e){function t(e){var n;return Object(w.a)(this,t),(n=Object(O.a)(this,Object(E.a)(t).call(this,e))).resourcesDelta=void 0,n.resourcesRef=void 0,n.state={selectedAdventurer:null},n.resourcesDelta={},n.resourcesRef=null,n}return Object(T.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=ce[M.warehouse];if(!n)throw new Error("No definition found for structure ".concat(M.warehouse," with type StructureDefinition."));var r=t.level,a=Re.getStructureName(M.warehouse),o=null;if(this.state.selectedAdventurer){var c=t.adventurersInTown.find(function(t){return t.id===e.state.selectedAdventurer});o=m.createElement(yn,{sourceType:kn,items:c.inventory,onDropItem:function(n,r,a,o,c){var s=e.state.selectedAdventurer;switch(o){case Ut.adventurerInventory:t.onMoveItemInInventory&&t.onMoveItemInInventory(s,r,a);break;case kn:t.onMoveItemToAdventurer&&t.onMoveItemToAdventurer(s,n,r,a)}}})}var s=m.createElement(m.Fragment,null,m.createElement(x,{className:"adventurers-tabstrip",onTabSelected:function(t){return function(t){e.setState({selectedAdventurer:t})}(t)}},t.adventurersInTown.map(function(e){return m.createElement(C,{id:e.id,key:e.id},m.createElement(Kt,{adventurer:e,className:"common-icon-small"}))})),m.createElement("div",{className:"adventurer-info"},o));return m.createElement("details",{open:!0,className:"warehouse-structureview"},m.createElement("summary",null,a),function(){var e=t.gold,a=n.levels[r+1],o=null!=a?a.cost.gold||0:-1,c=null!=a&&e>=o,s="Upgrade! (".concat(o<0?"max":o+" gold",")");return m.createElement("div",null,m.createElement("label",null,"level:"),r+1+" / "+n.levels.length,m.createElement("button",{style:{float:"right"},onClick:function(e){t.onUpgrade&&t.onUpgrade(o,r+1)},disabled:!c},s))}(),m.createElement("fieldset",{className:"resources",ref:function(t){e.resourcesRef=t}},m.createElement("legend",null,"Resources"),m.createElement(wn,{resources:t.resources,maxResources:t.maxResources,deltaResources:this.resourcesDelta})),m.createElement(yn,{sourceType:kn,items:t.items,onDropItem:function(e,n,r,a,o){switch(a){case kn:t.onMoveItemInWarehouse&&t.onMoveItemInWarehouse(n,r);break;case Ut.adventurerInventory:t.onMoveItemFromAdventurer&&t.onMoveItemFromAdventurer(o,e,n,r)}}}),s)}},{key:"componentDidUpdate",value:function(e){var t=this;Object.keys(e.resources).forEach(function(n){t.resourcesDelta[n]=t.props.resources[n]-e.resources[n]}),this.resourcesRef&&(this.resourcesRef.classList.remove("animate"),setTimeout(function(){t.resourcesRef&&t.resourcesRef.classList.add("animate")},200))}}]),t}(m.Component),En=function(e){return e.adventurers},jn=function(e){return e.quests},Tn=(Object(_e.a)([En,jn],function(e,t){var n=[],r=function(t){return e.find(function(e){return e.id===t})},a=Object.values(t).reduce(function(e,t){var a=t.party.map(function(e){return r(e)});return t.status===Qe.active&&(e[t.name]=a),n.push.apply(n,Object(b.a)(a)),e},{});return a.solo=e.filter(function(e){return-1===n.indexOf(e)}),a}),Object(_e.a)([En,jn],function(e,t){var n=t.reduce(function(e,t){return t.status===Qe.active&&e.push.apply(e,Object(b.a)(t.party)),e},[]);return e.filter(function(e){return-1===n.indexOf(e.id)})}));var In=Object(g.b)(function(e,t){var n=e.structures[M.warehouse],r=ce[M.warehouse],a=n.level,o=r.levels[a],c=Tn(e);if(!n)throw new Error("No structure '".concat(M.warehouse,"' found in the store!"));return{adventurersInTown:c,gold:e.gold,items:e.items,level:a,maxResources:o.maxResources,resources:e.resources,workers:n.workers,workersFree:Bt(e)}},function(e,t){return{onMoveItemFromAdventurer:function(t,n,r,a){var o=gn(t,r);e(o);var c=St(n,a);e(c)},onMoveItemInWarehouse:function(t,n){e(function(e,t){return{type:Tt.moveItemInWarehouse,fromSlot:e,toSlot:t}}(t,n))},onMoveItemInInventory:function(t,n,r){var a=dn(t,n,r);e(a)},onMoveItemToAdventurer:function(t,n,r,a){var o=function(e){return{type:Tt.removeItem,fromSlot:e}}(r);e(o);var c=pn(t,n,a);e(c)},onUpgrade:function(t,n){e(lt(t)),e(At(M.warehouse)),e(v("log-town-upgrade-structure-complete",{level:++n,structure:M.warehouse},a.town))}}})(On),Cn=(n(208),function(e){var t;if(e.structures[e.structure].state===Ge.Building){var n=e.buildTask?e.buildTask.progress:1;t=m.createElement("div",null,m.createElement(jt,{label:"Building...",progress:n}))}else t=function(e){switch(ce[e].type){case f.production:return m.createElement(Lt,{type:e});case f.resource:return m.createElement(_t,{type:e});case f.warehouse:return m.createElement(In,null);case f.tavern:return m.createElement(mn,null);default:return m.createElement("div",null," ",e," ")}}(e.structure);return m.createElement("fieldset",{className:"structure-details"},m.createElement("legend",null,"Structure"),t)}),Nn=(n(209),function(e){var t=null;!1!==e.backEnabled&&(t=m.createElement(I,{className:"back-button",onClick:function(t){e.onBack&&e.onBack()},text:"<"}));var n=null;return!1!==e.closeEnabled&&(n=m.createElement(I,{className:"close-button",onClick:function(t){e.onClose&&e.onClose()},text:"x"})),m.createElement("div",{className:"window"},m.createElement("div",{className:"header"},t,m.createElement("h3",null,e.title),n),e.children)}),xn=function(e){return function(t){function n(e){return Object(w.a)(this,n),Object(O.a)(this,Object(E.a)(n).call(this,e))}return Object(T.a)(n,t),Object(k.a)(n,[{key:"render",value:function(){return m.createElement(Nn,this.props,m.createElement(e,this.props))}}]),n}(m.Component)};var Sn,qn=Object(ot.c)(Object(g.b)(function(e,t){return{buildTask:e.tasks.running.filter(function(e){return"town"===e.origin&&e.name==="".concat(t.structure,".build")})[0],structures:e.structures}},function(e){return{onCheatGold:function(t){return e(ut(t))},onCheatResources:function(t){return e(mt(t))}}}),xn)(Cn),An=(n(210),function(e){function t(){return Object(w.a)(this,t),Object(O.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return(0,this.props.connectDropTarget)(m.createElement("div",{className:"droppable-adventurer-avatar"},m.createElement(Kt,{adventurer:this.props.adventurer,onClick:this.props.onClick})))}}]),t}(m.Component)),Dn=Object(Vt.d)(Pt,{drop:function(e,t){e.onDrop(t.getItem())},canDrop:function(e,t){return!0}},function(e,t){return{canDrop:t.canDrop(),connectDropTarget:e.dropTarget(),isOver:t.isOver()}})(An),Rn=(n(211),n(212),{drop:function(e,t){e.onDrop(t.getItem())},canDrop:function(e,t){var n=Ae(t.getItem().item);return n.itemType===q.equipment&&n.equipmentType===e.type}}),Wn=Object(Vt.d)(Pt,Rn,function(e,t){return{canDrop:t.canDrop(),connectDropTarget:e.dropTarget(),isOver:t.isOver()}})(function(e){var t=e.isOver,n=e.canDrop,r="grey";return t&&n?r="green":n&&(r="orange"),(0,e.connectDropTarget)(m.createElement("div",{className:"equipment-slot",style:{borderColor:r}},e.children))}),Mn=function(e){var t=m.useContext(Sr),n=e.adventurer,r=Object.keys(n.stats).map(function(e){var t=n.stats[e];return m.createElement("div",{key:"".concat(n.id,"-").concat(e)}," ",m.createElement("b",null,e),": ",t.toFixed(1)," ")}),a=function(r){var a=n.equipment[ie[r]],o=null;if(a){var c=m.createRef();o=m.createElement(fn,{index:r,sourceId:n.id,sourceType:Ut.adventurerEquipment,item:a,onClick:function(e){var n=e.currentTarget.getBoundingClientRect();t.onContextualObjectActivated(ft.item,Ae(a),c,n),e.stopPropagation()},ref:c,size:ht.medium})}return m.createElement(Wn,{onDrop:function(t){return function(t,r){var a=r.item;e.onRemoveItemFromInventory(n.id,r.inventorySlot),e.onAssignEquipment(n.id,t,a)}(r,t)},type:r},o)},o=m.createElement("ul",null,m.createElement("li",null,a(ie.head)),m.createElement("li",null,a(ie.shoulders)),m.createElement("li",null,a(ie.chest)),m.createElement("li",null,a(ie.hands)),m.createElement("li",null,a(ie.legs)),m.createElement("li",null,a(ie.feet)));return m.createElement("div",{className:"adventurer-info"},m.createElement("div",{className:"left"},m.createElement("div",{className:"name"},m.createElement("b",null,n.name)),m.createElement("div",{className:"attributes"},r),m.createElement("div",{className:"equipment"},o)),m.createElement("div",{className:"right"},m.createElement(yn,{sourceType:Ut.adventurerInventory,sourceId:n.id,items:n.inventory,onDropItem:function(t,r,a){e.onMoveItemInInventory&&e.onMoveItemInInventory(n.id,r,a)}})))},Bn=Object(g.b)(function(e){return{}},function(e){return{onAssignEquipment:function(t,n,r){var a=function(e,t,n){return{type:ln.assignEquipment,adventurerId:e,item:n,equipmentType:t}}(t,n,r);e(a)},onMoveItemInInventory:function(t,n,r){var a=dn(t,n,r);e(a)},onRemoveItemFromInventory:function(t,n){var r=gn(t,n);e(r)}}})(Mn),Ln=function(e,t){return t.party.map(function(t){return Qn(e,t)})},Qn=function(e,t){return e.adventurers.find(function(e){return e.id===t})},Hn=function(e){return!!e.rngState},_n=n(90),Gn=n.n(_n);function Fn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return e=Math.ceil(e),t=Math.floor(t),Math.floor(function(){if(!Sn)throw new Error("Call init() before random()");return Un=!0,Sn()}()*(t-e+1))+e}var Un=!1,zn=function(){function e(t,n){Object(w.a)(this,e),this.questName=void 0,this.store=void 0,this.questName=t,this.store=n}return Object(k.a)(e,[{key:"getAdventurerWithHighest",value:function(e){return Ln(this.store,this.quest).concat().sort(function(t,n){return n.stats[e]-t.stats[e]})[0]}},{key:"getAdventurerWithLowest",value:function(e){return Ln(this.store,this.quest).concat().sort(function(t,n){return t.stats[e]-n.stats[e]})[0]}},{key:"getRandomAdventurer",value:function(){return this.adventurers[Fn(0,this.adventurers.length)]}},{key:"questVars",get:function(){return this.quest.questVars}},{key:"quest",get:function(){var e=this;return this.store.quests.find(function(t){return t.name===e.questName})}},{key:"adventurers",get:function(){return Ln(this.store,this.quest)}}]),e}(),Pn={},Vn={name:Yt.backstabbed,getOracle:function(e,t){return new zn(e,t)},getDescription:function(e){return{key:"encounter-backstabbed-description"}},getOptions:function(e){return{fight:"Fight the brigands",flight:"Run away!"}},answer:function(e,t,n){switch(e){case"flight":return"You run away like a pussy";case"fight":var r=t.getRandomAdventurer();return n(pn(r.id,A.deedForWeaponsmith)),"The party fights off the rogues. One of them drops a document. ".concat(r.name," picks it up");default:throw new Error("Unhandled option '".concat(e))}}},Kn={name:Yt.goblinHouseOutside,getOracle:function(e,t){return new zn(e,t)},getDescription:function(e){return{key:"encounter-goblinHouseOutside-description"}},getOptions:function(e){return{investigate:"Investigate",leave:"Keep walking"}},answer:function(e,t,n){t.store,t.questVars;var r=t.quest;switch(e){case"investigate":return n(Ft(r.name,Yt.goblinHouseHallway)),"The party coutiously opens the door and goes inside";case"leave":return n(Ft(r.name,Yt.goblinHouseHallway)),"The party coutiously opens the door and goes inside";default:throw new Error("Unhandled option ".concat(e))}}},Xn={backstabbed:Vn,goblinHouseHallway:{name:Yt.goblinHouseHallway,getOracle:function(e,t){return new zn(e,t)},getDescription:function(e){return{key:"encounter-goblinHouseHallway-description"}},getOptions:function(e){return{investigate:"Go inside the house",leave:"Leave the premise"}},answer:function(e,t,n){t.store,t.questVars,t.quest;switch(e){case"walkAround":return"Your party walks around the tree";case"leave":return n(Gt(t.questName)),"The party escapes the house unscathed";default:throw new Error("Unhandled option ".concat(e))}}},goblinHouseOutside:Kn,theBigTree:{name:Yt.theBigTree,getOracle:function(e,t){return new zn(e,t)},getDescription:function(e){return{key:"encounter-thebigtree-description"}},getOptions:function(e){var t=e.getAdventurerWithHighest("strength");return{walkAround:"Walk around the tree",lift:"Lift the tree (".concat(t.name,")")}},answer:function(e,t,n){var r=t.questVars,a=t.quest;switch(e){case"walkAround":return"Your party walks around the tree";case"lift":var o=t.getAdventurerWithHighest("strength");r.treeState="lifted",n(function(e,t){return{type:Ht.updateQuestVars,questName:e,vars:t}}(a.name,r));var c=Fn(2,5);return n(ut(c)),"".concat(o.name," heaves and lifts the heavy tree, moving it aside. Underneath your party finds ").concat(c," gold coins");default:throw new Error("Unhandled option ".concat(e))}}}},Yn=Xn;n(221);var Jn=function(e){function t(e){var n;return Object(w.a)(this,t),(n=Object(O.a)(this,Object(E.a)(t).call(this,e))).getAvatars=function(){return n.props.adventurers.map(function(e){var t=n.state.selectedAdventurer===e.id;return d.a.createElement(Dn,{key:"".concat(e.id,"-avatar"),className:t?" selected":"",adventurer:e,onClick:function(){return n.handleAvatarClick(e.id)},onDrop:function(t){var r=n.state.selectedAdventurer;if(e.id!==r&&n.props.onMoveItemToOtherAdventurer){var a=t.inventorySlot;n.props.onMoveItemToOtherAdventurer(r,a,e.id)}}})})},n.getBottomPart=function(){if(n.state.selectedAdventurer){var e=n.props.adventurers.find(function(e){return e.id===n.state.selectedAdventurer});return n.getAdventurerInfo(e)}var t=n.props.quest,r=nn(t.name),a=Math.floor(t.progress),o=r.nodes[a],c=d.a.createElement("p",null),s=d.a.createElement("p",null);switch(o.type){case Jt.nothing:c=d.a.createElement("div",null," ",n.props.lastLog&&Re.getTextEntry(n.props.lastLog)," ");break;case Jt.encounter:var i=n.props.store,u=function(e){return Xn[e]}(t.currentEncounter),l=u.getOracle(t.name,i),m=u.getDescription(l),p=Re.getTextEntry(m);c=d.a.createElement("div",null,d.a.createElement("p",null," ",p," "));var g=u.getOptions(l);s=d.a.createElement("ul",null,Object.keys(g).map(function(e){return d.a.createElement("li",{key:e},d.a.createElement("button",{onClick:function(){return n.handleEncounterOptionClick(u,e,l)}},e),g[e])}));break;case Jt.boss:c=d.a.createElement("p",null," ","Boss fight!"," ")}return d.a.createElement("div",{className:"questlog"},c,d.a.createElement("div",{className:"actions"},s))},n.state={selectedAdventurer:null},n}return Object(T.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return d.a.createElement("div",{className:"partywindow"},d.a.createElement("div",{className:"avatars"},this.getAvatars()),this.getBottomPart())}},{key:"componentDidUpdate",value:function(e){e.quest!==this.props.quest&&this.setState({selectedAdventurer:null})}},{key:"getAdventurerInfo",value:function(e){return e?d.a.createElement(Bn,{adventurer:e}):null}},{key:"handleAvatarClick",value:function(e){this.state.selectedAdventurer===e&&(e=null),this.setState({selectedAdventurer:e})}},{key:"handleEncounterOptionClick",value:function(e,t,n){var r=e.answer(t,n,this.props.onDispatch);this.props.onUpdateEncounterResult(this.props.quest.progress,r)}}]),t}(d.a.Component);var Zn=Object(ot.c)(Object(g.b)(function(e,t){return{adventurers:Ln(e,t.quest),lastLog:ze(e,t.quest.name),store:e}},function(e,t){return{onAdvanceQuest:function(t){e(Gt(t))},onDispatch:e,onMoveItemInInventory:function(t,n,r){var a=dn(t,n,r);e(a)},onMoveItemToOtherAdventurer:function(t,n,r){var a=function(e,t,n,r){return{type:ln.moveItemToOtherAdventurer,adventurerId:e,fromSlot:t,toAdventurerId:n,toSlot:r}}(t,n,r);e(a)},onUpdateEncounterResult:function(n,r){var a=function(e,t,n){return{type:Ht.updateEncounterResult,questName:e,nodeIndex:t,result:n}}(t.quest.name,n,r);e(a)}}}),xn)(Jn),$n=(n(222),function(e){var t=e.quest,n=tn[t.name],r=n.nodes.map(function(e,n){return function(e,n){var r={className:Math.floor(t.progress)===n?"active":"",key:"node_".concat(n)};switch(e.type){case Jt.encounter:return m.createElement("span",Object.assign({title:"encounter"},r),"*");case Jt.boss:return m.createElement("span",Object.assign({title:"boss"},r),"#");case Jt.nothing:default:return m.createElement("span",r,"-")}}(e,n)});return m.createElement("div",{className:"questlinevisualization"},m.createElement("div",{className:"questname"}," ",Re.getQuestTitle(t.name)," "),r,e.selected?m.createElement("span",{className:"selected"},"selected"):m.createElement("button",{className:"select",onClick:function(){return e.onSelectQuest(t.name)}},"select"))}),er=(n(223),function(e){function t(e){var n;return Object(w.a)(this,t),(n=Object(O.a)(this,Object(E.a)(t).call(this,e))).state={selectedQuest:null},et.addMusicTrack(Ke.world,"sound/music/TheLoomingBattle.ogg"),n}return Object(T.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this,t=this.props.quests.find(function(t){return t.name===e.state.selectedQuest}),n=this.props.quests.filter(function(e){return e.status===Qe.active}).map(function(n){return m.createElement($n,{key:n.name,selected:n===t,quest:n,onSelectQuest:function(){return e.handleSelectQuest(n.name)}})});return m.createElement("div",{className:"realworldview"},m.createElement("fieldset",{className:"progress"},m.createElement("legend",null,"Quest progress"),n))}},{key:"handleSelectQuest",value:function(e){this.setState({selectedQuest:e});var t=this.props.quests.find(function(t){return t.name===e}),n=Re.getQuestTitle(t.name),r=m.createElement(Zn,{quest:t,title:n});this.props.onOpenWindow(r)}},{key:"componentDidMount",value:function(){this.playMusic()}},{key:"playMusic",value:function(){et.playMusicTrack(Ke.world)}}]),t}(m.Component));var tr,nr=Object(ot.c)(Object(g.b)(function(e,t){return{quests:e.quests}},function(e,t){return{onAdvanceQuest:function(e){}}}),at)(er);n(224);!function(e){e[e.bottom=0]="bottom",e[e.top=1]="top",e[e.left=2]="left",e[e.right=3]="right"}(tr||(tr={}));var rr,ar=["img/town/effects/plasma_beam_heavy_green.png","img/town/effects/smoke.png","img/town/sky.jpg","img/town/lighthouse.png","img/town/tavern.png","img/town/mill.png","sound/fx/button-click.ogg","sound/music/Soliloquy.mp3","sound/music/TheLoomingBattle.ogg"],or=n(94),cr=n(46),sr=n(37);(rr||(rr={})).addWorkers="addWorkers";n(86);var ir,ur=function(e){function t(e){var n;return Object(w.a)(this,t),(n=Object(O.a)(this,Object(E.a)(t).call(this,e))).itemSelectRef=void 0,n.handleCheatGold=function(e){var t=n.state.gold;n.props.onCheatGold&&n.props.onCheatGold(t)},n.handleCheatWorkers=function(e){var t=n.state.workers;n.props.onCheatWorkers&&n.props.onCheatWorkers(t)},n.handleCheatResources=function(e){n.props.onCheatResources&&n.props.onCheatResources(n.state.resources)},n.handleCheatItem=function(e){var t=n.itemSelectRef.current.value;n.props.onCheatItem&&n.props.onCheatItem(t)},n.handleChangeStructureState=function(e,t){n.props.onCheatStructureState&&n.props.onCheatStructureState(e,t?Ge.Built:Ge.NotBuilt)},n.handleChangeGold=function(e){var t=Number(e.target.value);n.setState({gold:t})},n.handleChangeWorkers=function(e){var t=Number(e.target.value);n.setState({workers:t})},n.handleChangeResources=function(e){var t=Number(e.target.checked);n.setState({resources:t})},n.state={gold:50,resources:50,workers:10},n.itemSelectRef=m.createRef(),n}return Object(T.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this,t=Object.keys(this.props.structures).map(function(t){return function(t){var n=ce[t],r=e.props.structures[t],a=n.levels[r.level],o=Re.get(a.displayName);return m.createElement("div",{className:"label-dropdown",key:t},m.createElement("label",{title:t},"".concat(o)),m.createElement("input",{key:t,type:"checkbox",checked:e.props.structures[t].state===Ge.Built,onChange:function(){return e.handleChangeStructureState(t,e.props.structures[t].state!==Ge.Built)}}))}(t)}),n=function(e){return m.createElement("option",{value:e,key:e},Re.getItemName(e))},r=Object.keys(q).filter(function(e){return!isNaN(e)}).map(function(e){return m.createElement("optgroup",{label:q[e],key:e},function(e){return Object.keys(A).filter(function(t){return Ae(t).itemType==e}).map(function(e){return n(e)})}(e))});return m.createElement("div",{className:"cheat-box"},m.createElement("div",{className:"label-numberbox-button"},m.createElement("label",null,"Gold"),m.createElement("input",{type:"number",value:this.state.gold,style:{width:"50px"},onChange:this.handleChangeGold}),m.createElement("button",{onClick:this.handleCheatGold},"Add")),m.createElement("div",{className:"label-numberbox-button"},m.createElement("label",null,"Workers"),m.createElement("input",{type:"number",value:this.state.workers,style:{width:"50px"},onChange:this.handleChangeWorkers}),m.createElement("button",{onClick:this.handleCheatWorkers},"Add")),m.createElement("div",{className:"label-numberbox-button"},m.createElement("label",null,"Resources"),m.createElement("input",{type:"number",value:this.state.resources,style:{width:"50px"},onChange:this.handleChangeResources}),m.createElement("button",{onClick:this.handleCheatResources},"Add")),m.createElement("div",{className:"label-numberbox-button"},m.createElement("label",null,"Items"),m.createElement("select",{style:{width:"150px"},ref:this.itemSelectRef},r),m.createElement("button",{onClick:this.handleCheatItem},"Add")),t)}}]),t}(m.Component),lr=[pt.food,pt.wood,pt.stone,pt.fabric,pt.leather],mr=Object(ot.c)(Object(g.b)(function(e){return{structures:e.structures}},function(e){return{onCheatGold:function(t){e(ut(t)),e(v("common-cheat-gold-added",{amount:t},a.common))},onCheatItem:function(t){e(St(t)),e(v("common-cheat-item-added",{item:t},a.common))},onCheatResources:function(t){var n=lr.reduce(function(e,n){return e[n]=t,e},{});e(mt(n)),e(v("common-cheat-resources-added",{amount:t},a.common))},onCheatStructureState:function(t,n){return e(function(e,t){return{type:It.setStructureState,structure:e,state:t}}(t,n))},onCheatWorkers:function(t){var n;e((n=t,{type:rr.addWorkers,value:n})),e(v("common-cheat-workers-added",{amount:t},a.common))}}}),xn)(ur),dr=function(e){function t(e){var n;return Object(w.a)(this,t),(n=Object(O.a)(this,Object(E.a)(t).call(this,e))).state={},n}return Object(T.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this;return m.createElement("div",{className:"menu"},m.createElement("ul",null,m.createElement("li",{onClick:function(){var t=m.createElement(mr,{title:"Cheats"});e.props.onOpenWindow(t)}},"Cheats!")))}}]),t}(m.Component),pr=Object(ot.c)(xn,at)(dr),gr=(n(225),function(e){var t=function(e,t,n){return m.createElement("li",{title:n,key:n},m.createElement("div",{className:"icon common-icon-smallest",style:{backgroundImage:"url(".concat(e,")")}}),m.createElement("div",{className:"amount"},t.toFixed(0)))},n=lr.map(function(n){return t(bt[n].iconImg,e.resources[n],Re.getResourceName(n))});return n.push(t("/img/resources/worker.png",e.workersFree,"workers"),t("/img/resources/gold.png",e.gold,"gold")),m.createElement("ul",{className:"resourcebar"},n)}),vr=Object(g.b)(function(e){return{gold:e.gold,resources:e.resources,workers:e.workers,workersFree:Bt(e)}})(gr),fr=(n(226),Object(ot.c)(Object(g.b)(function(e){return{}}),sr.f,at)(function(e){return m.createElement("div",{className:"topbar"},m.createElement("div",{className:"topbar-left"},m.createElement(vr,null)),m.createElement("div",{className:"topbar-right"},m.createElement("div",{className:"hamburger",onClick:function(t){var n=m.createElement(pr,{title:"Menu"});e.onOpenWindow(n)}},"\u2630")))})),hr=(n(227),n(92)),br=function(e){function t(){return Object(w.a)(this,t),Object(O.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this.props,t=e.itemsLoaded,n=e.itemsTotal;return m.createElement("div",null," ","Loading (".concat(Math.floor((t||0)/(n||0)*100),")%")," ")}}]),t}(m.Component);!function(e){e[e.image=0]="image",e[e.sound=1]="sound"}(ir||(ir={}));var yr=function(e){function t(e){var n;return Object(w.a)(this,t),(n=Object(O.a)(this,Object(E.a)(t).call(this,e))).loadMedia=function(){n.setState({itemsLoaded:0});var e=n.props.manifest.map(function(e){return n.loadItem(e).catch(function(e){return console.error(e)})});Promise.all(e).then(function(e){n.props.onLoadComplete&&n.props.onLoadComplete(wr),n.setState({completed:!0})})},n.loadItem=function(){var e=Object(i.a)(s.a.mark(function e(t){var r,a,o,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(wr.some(function(e){return e.url===t})&&console.warn("Loading media with url ".concat(t," more than once! Will overwrite.")),(r=Or(t))!==ir.image){e.next=7;break}return e.next=5,kr(t);case 5:o=e.sent,a={content:o,mediaType:r,url:t};case 7:if(r===ir.sound&&(c=new hr.Howl({src:[t]}),a={content:c,mediaType:r,url:t}),!a){e.next=14;break}return wr.push(a),n.setState({itemsLoaded:n.state.itemsLoaded+1}),e.abrupt("return",a);case 14:throw new Error("Unknown error while trying to load ".concat(t));case 15:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.state={completed:!1,itemsLoaded:0},n}return Object(T.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){this.loadMedia()}},{key:"componentDidUpdate",value:function(e){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.manifest,r=this.state.completed,a=m.createElement(br,{itemsLoaded:this.state.itemsLoaded,itemsTotal:n.length});return r?t:a}}]),t}(m.Component),wr=[],kr=function(e){var t=new Image;return t.src=e,new Promise(function(e,n){function r(){t.naturalWidth?e(t):n(null),t.removeEventListener("load",r),t.removeEventListener("error",r)}t.naturalWidth?e(t):t.complete?n(null):(t.addEventListener("load",r),t.addEventListener("error",r))})},Or=function(e){if((e=e.toLowerCase()).endsWith("png")||e.endsWith("jpg")||e.endsWith("gif"))return ir.image;if(e.endsWith("mp3")||e.endsWith("ogg")||e.endsWith("wav"))return ir.sound;throw Error("Could not determine type for ".concat(e))};var Er,jr,Tr=Object(g.b)(function(e,t){return{store:e}},function(e,t){return{handleStartConstruction:function(t){e(function(e){return{type:It.startBuildingStructure,structure:e}}(t));var n=[qt(t)],r=ce[t].cost.time,a=Wt(Mt.buildStructure,"".concat(t,".build"),"town",r,n);e(a)}}})(function(e){var t=e.info;switch(t.itemType){case q.deed:var n=e.store.gold,r=t,a=ce[r.structure],o=a.cost.gold||0<=n,c=!(e.store.structures[r.structure].state===Ge.NotBuilt)||!o;return m.createElement("div",null,m.createElement("p",null,' " ',t.subText,' " '),m.createElement("button",{disabled:c,onClick:function(){return e.handleStartConstruction(r.structure)}},"Start construction (",a.cost.gold," gold)"));default:return m.createElement("p",null,' " ',t.subText,' " ')}}),Ir=(n(228),function(e){function t(){return Object(w.a)(this,t),Object(O.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e,t=this.props.info,n=this.props.type;switch(t||(t={iconImg:"/img/items/deeds/deed.png",item:A.deedForWeaponsmith,itemType:q.weapon,subText:"It allows for the construction of a weaponsmith"}),n){case ft.item:default:e=m.createElement(Tr,{info:t})}var r=Re.getItemName(t.item);return m.createElement("div",{className:"contextbox"},m.createElement("div",null,r," "),e)}},{key:"componentDidUpdate",value:function(){}}]),t}(m.Component)),Cr=(Er=Ir,function(e){var t=m.useRef(null),n=m.useState(e.placement||tr.bottom),r=Object(N.a)(n,2),a=r[0],o=r[1],c=e.containerRect,s=e.referenceRect;m.useEffect(function(){var e=t.current,n=e.getBoundingClientRect();switch(a){case tr.top:if(n.top-n.height-8-8<c.top)return void o(tr.bottom);case tr.bottom:if(n.top+n.height+8+8>c.height)return void o(tr.top)}if(e.style.opacity="1",n.left<c.left+8){var r=c.left-n.left+8;e.querySelector(".popup-content").style.transform="translateX(".concat(r,"px)")}if(n.right>c.right-8){var s=n.right-c.right+8;e.querySelector(".popup-content").style.transform="translateX(".concat(-s,"px)")}});var i=0,u=0,l="";switch(a){case tr.bottom:i=s.left-c.left+s.width/2,u=s.top-c.top+s.height,l="popup-bottom";break;case tr.top:i=s.left-c.left+s.width/2,u=s.top-c.top,l="popup-top"}return m.createElement("div",{className:"popup ".concat(l),style:{left:i,opacity:0,top:u},ref:t},m.createElement("div",{className:"popup-arrow"}),m.createElement("div",{className:"popup-content"},m.createElement(Er,e)))});!function(e){e[e.Town=0]="Town",e[e.World=1]="World"}(jr||(jr={}));var Nr=860,xr=648,Sr=m.createContext(null),qr=function(e){function t(e){var n;return Object(w.a)(this,t),(n=Object(O.a)(this,Object(E.a)(t).call(this,e))).containerRef=void 0,n.selectStructure=function(e){if(e){var t=Re.getStructureName(e),r=m.createElement(qn,{structure:e,title:t});n.handleWindowOpened(r)}},n.handleMediaLoadComplete=function(e){var t=e.filter(function(e){return e.mediaType===ir.sound});et.loadMedia(t),et.addSounds(Object(y.a)({},Xe.buttonClick,"sound/fx/button-click.ogg")),n.setState({media:e})},n.handleContextualObjectActivated=function(e,t,r,a){n.setState({selectedContext:{contextInfo:t,contextType:e,contextRect:a}})},n.handleAppClick=function(){n.state.selectedContext&&n.setState({selectedContext:null})},n.handleWindowOpened=function(e){n.setState({activeWindows:[].concat(Object(b.a)(n.state.activeWindows),[e])})},n.handleWindowClose=function(){n.state.activeWindows.length&&n.setState({activeWindows:[]})},n.handleWindowBack=function(){n.state.activeWindows.length&&n.setState({activeWindows:n.state.activeWindows.slice(0,-1)})},n.state={selectedContext:null,containerRect:null,media:[],selectedStructure:null,activeWindows:[]},n.containerRef=m.createRef(),n.handleResize=n.handleResize.bind(Object(j.a)(n)),n}return Object(T.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this,t=function(){et.playSound(Xe.buttonClick)},n=null;if(this.state.selectedContext){var r=this.state.selectedContext,a=r.contextType,o=r.contextInfo,c=r.contextRect;n=m.createElement(Cr,{type:a,info:o,containerRect:this.state.containerRect,referenceRect:c,placement:tr.bottom})}var s=this.getActiveWindow();return m.createElement(Sr.Provider,{value:{media:this.state.media,onContextualObjectActivated:this.handleContextualObjectActivated,onOpenWindow:this.handleWindowOpened}},m.createElement("div",{className:"app",ref:this.containerRef,style:{width:xr,height:Nr},onClick:this.handleAppClick},m.createElement(Vt.b,{backend:or.a},m.createElement(cr.a,null,m.createElement(yr,{manifest:ar,onLoadComplete:this.handleMediaLoadComplete},m.createElement(fr,null),m.createElement(sr.a,{from:"/",to:"town"}),m.createElement(sr.b,{path:"/world",component:function(){return m.createElement(cr.b,{to:"/town"},m.createElement("button",{onClick:function(){return t()}}," ",Re.get("common-view-button-town")," "))}}),m.createElement(sr.b,{path:"/town",component:function(){return m.createElement(cr.b,{to:"/world"},m.createElement("button",{onClick:function(){return t()}}," ",Re.get("common-view-button-world")," "))}})," | ",m.createElement("button",{onClick:function(){return e.props.persistor.purge(),void window.location.reload()},style:{color:"red"}}," Restart! "),m.createElement(sr.b,{path:"/town",component:function(){return m.createElement(it,{onStructureClick:e.selectStructure})}}),m.createElement(sr.b,{path:"/world",component:function(){return m.createElement(nr,null)}}),s,n,m.createElement(Pe,null))))))}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize),this.handleResize()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"getActiveWindow",value:function(){if(!this.state.activeWindows.length)return null;var e=this.state.activeWindows[this.state.activeWindows.length-1],t={onClose:this.handleWindowClose,onBack:this.handleWindowBack,backEnabled:this.state.activeWindows.length>1,closeEnabled:!0};return m.cloneElement(e,t)}},{key:"handleResize",value:function(){if(this.containerRef.current){window.innerHeight<Nr?this.containerRef.current.style.transform="scale(".concat(window.innerHeight/Nr,") translateX(-50%)"):this.containerRef.current.style.transform="scale(1) translateX(-50%)";var e=this.containerRef.current.getBoundingClientRect();this.setState({containerRect:e,selectedContext:null})}}}]),t}(m.Component);var Ar=Object(g.b)(function(e,t){return{}},function(e,t){return{}})(qr),Dr=(n(229),function(e){var t=ce[M.warehouse],n=e.structures[M.warehouse].level;return t.levels[n].maxResources}),Rr=function(e,t){var n=t.structures,r={},a=e/6e4,o=Dr(t);return Object.keys(n).forEach(function(e){return function(e){var t=ce[e];if(t.type===f.resource){var o=t,c=n[e].level,s=o.levels[c];Object.keys(s.generates).reduce(function(t,r){var o=s.generates[r]*n[e].workers*a;return t[r]=(t[r]||0)+o,t},r)}}(e)}),Object.keys(r).forEach(function(e){r[e]&&t.resources[e]+r[e]>=o[e]&&(r[e]=o[e]-t.resources[e])}),r},Wr=function(e,t){var n=[],r=[];return t.quests.forEach(function(t){if(t.status===Qe.active){var o=tn[t.name],c=t.progress,s=Math.floor(c);if(o.nodes[s].type===Jt.nothing){for(var i=e/6e4*4,u=Math.min(c+i,o.nodes.length-1),l=Math.floor(u)-s,m=t.currentEncounter,d=1;d<=l;d++){var p=o.nodes[s+d];if(p.type===Jt.encounter){var g=Yn[p.encounter],v=Pn[t.name];u=s+d,m=p.encounter,n.push(Object(S.a)({channel:a.quest,channelContext:t.name},g.getDescription(v)));break}p.type===Jt.nothing&&(m=null,p.log&&n.push({channel:a.quest,channelContext:t.name,key:p.log}))}r.push({currentEncounter:m,name:t.name,progress:u})}}}),{log:n,quests:r}},Mr=function(){return Un?(Un=!1,Sn.state()):null},Br=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Lr(){if("serviceWorker"in navigator){if(new URL("/gilles-game",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/gilles-game","/service-worker.js");Br?(!function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Qr(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Qr(e)})}}function Qr(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var Hr,_r=function(){return{strength:100*Math.random(),perception:100*Math.random(),endurance:100*Math.random(),charisma:100*Math.random(),intelligenge:100*Math.random(),agility:100*Math.random(),luck:100*Math.random()}},Gr=[{id:"c4a5d270",equipment:{},stats:_r(),health:100*Math.random(),room:0,name:"Ximena Maddox",avatarImg:"/img/avatars/andy-victorovych-a1.jpg",inventory:[A.deedForLumbermill,null,A.crossbow,A.dagger,A.khopesh,null,A.sword,null,null,null,null,null,null,null,null,null]},{id:"2e655832",equipment:{},stats:_r(),name:"Donte Houston",health:100*Math.random(),room:1,avatarImg:"/img/avatars/andy-victorovych-a2.jpg",inventory:[A.crossbow,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]},{id:"ec6f1050",equipment:{},stats:_r(),name:"Zackary Morris",health:100*Math.random(),room:2,avatarImg:"/img/avatars/andy-victorovych-a3.jpg",inventory:[A.greatswordOfGwai,null,null,null]},{id:"d299f98a",stats:_r(),equipment:{},name:"Mike Keith",health:100*Math.random(),room:4,avatarImg:"/img/avatars/andy-victorovych-a4.jpg",inventory:[null,null,null,null,A.khopesh,A.hornedHelmet]},{id:"96c686c3",equipment:{},stats:_r(),name:"Wayne Monroe",health:100*Math.random(),room:5,avatarImg:"/img/avatars/andy-victorovych-a5.jpg",inventory:[null,null,null]},{id:"250d1a9d",stats:_r(),equipment:{},name:"Mike Keith",health:100*Math.random(),room:9,avatarImg:"/img/avatars/andy-victorovych-a6.jpg",inventory:[null,null,null,null,null]},{id:"169384ef",equipment:{},stats:_r(),name:"Karlee Nolan",health:100*Math.random(),room:3,avatarImg:"/img/avatars/andy-victorovych-a7.jpg",inventory:[A.greatswordOfGwai,null,null,null]},{id:"f22d66cb",stats:_r(),equipment:{},name:"Gylbarde the Earnest",health:100*Math.random(),room:8,avatarImg:"/img/avatars/andy-victorovych-a8.jpg",inventory:[null,null,null,null,null]},{id:"36c686c1",equipment:{},stats:_r(),name:"Lanslet of the Water",health:100*Math.random(),room:6,avatarImg:"/img/avatars/andy-victorovych-a9.jpg",inventory:[A.greatswordOfGwai,null,null,null]},{id:"12c613d4",equipment:{},stats:_r(),name:"Tedric the Bold",health:100*Math.random(),room:7,avatarImg:"/img/avatars/andy-victorovych-a10.jpg",inventory:[A.greatswordOfGwai,null,null,null]}],Fr={lastTick:Date.now()},Ur=[null,null,null,A.dagger,A.deedForWeaponsmith],zr=function(e,t){if(!t.log.length)return e;var n=t.log.map(function(e){return Object(S.a)({},e,{time:Date.now()})});return[].concat(Object(b.a)(n),Object(b.a)(e))},Pr=[{name:"kill10Boars",status:Qe.active,party:["c4a5d270","2e655832","ec6f1050","d299f98a"],progress:0,questVars:{},encounterResults:[],icon:"sigil1.png",currentEncounter:null},{name:"retrieveMagicAmulet",party:[],status:Qe.available,progress:0,questVars:{},encounterResults:[],icon:"sigil2.png",currentEncounter:null,reward:{gold:4,items:[A.deedForWeaponsmith]}}],Vr=function(e,t){var n=t.assignedAventurers.filter(function(e){return!!e}).map(function(e){return e.id});return e.map(function(e){return e.name===t.questName?Object(S.a)({},e,{status:Qe.active,party:n}):e})},Kr=function(e,t){return e.map(function(e){if(e.name===t.questName){var n=e.progress+1;tn[e.name].nodes[Math.floor(n)];return Object(S.a)({},e,{progress:n})}return e})},Xr=function(e,t){return e.map(function(e){return e.name===t.questName?Object(S.a)({},e,{currentEncounter:t.encounter}):e})},Yr=function(e,t){var n=t.quests;return n.length?e.map(function(e){var t=n.find(function(t){return t.name===e.name});if(t){var r=t.progress,a=t.currentEncounter;return Object(S.a)({},e,{progress:r,currentEncounter:a})}return e}):e},Jr=function(e,t){return e.map(function(e){if(e.name===t.questName){var n=Object.assign({},e.questVars,t.vars);return Object(S.a)({},e,{questVars:n})}return e})},Zr=function(e,t){return e.map(function(e){if(e.name===t.questName){var n=e.encounterResults.concat();return n[t.nodeIndex]=t.result,Object(S.a)({},e,{encounterResults:n})}return e})},$r={fabric:0,food:0,iron:60,leather:0,stone:0,wood:40},ea=(Hr={},Object(y.a)(Hr,M.alchemist,{level:0,workers:1,state:Ge.NotBuilt}),Object(y.a)(Hr,M.armoursmith,{level:0,workers:0,state:Ge.NotBuilt}),Object(y.a)(Hr,M.garden,{level:0,workers:0,state:Ge.Built}),Object(y.a)(Hr,M.lumberMill,{level:0,workers:0,state:Ge.NotBuilt}),Object(y.a)(Hr,M.mine,{level:0,workers:0,state:Ge.NotBuilt}),Object(y.a)(Hr,M.quarry,{level:0,workers:0,state:Ge.NotBuilt}),Object(y.a)(Hr,M.tavern,{level:0,workers:0,state:Ge.Built}),Object(y.a)(Hr,M.tannery,{level:0,workers:0,state:Ge.NotBuilt}),Object(y.a)(Hr,M.warehouse,{level:0,workers:0,state:Ge.Built}),Object(y.a)(Hr,M.weaponsmith,{level:0,workers:0,state:Ge.Built}),Object(y.a)(Hr,M.weaver,{level:0,workers:0,state:Ge.NotBuilt}),Object(y.a)(Hr,M.workshop,{level:0,workers:0,state:Ge.NotBuilt}),Hr),ta=function(e,t,n){var r=Object(S.a)({},e[t],{state:n});return Object(S.a)({},e,Object(y.a)({},t,r))},na={completed:[],running:[]},ra=function(e){return{name:e.name,origin:e.origin,type:e.taskType,callbacks:e.callbacks,timeRemaining:e.time,startTime:Date.now(),lastTick:Date.now(),progress:0}},aa=Object(ot.b)({adventurers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ln.moveItemInInventory:var n=t,r=n.adventurerId,a=n.fromSlot,o=n.toSlot,c=e.find(function(e){return e.id===r}),s=c.inventory.map(function(e,t){return t===a?c.inventory[o]:t===o?c.inventory[a]:e});return e.map(function(e){return e===c?Object(S.a)({},e,{inventory:s}):e});case ln.moveItemToOtherAdventurer:var i=t,u=i.adventurerId,l=i.fromSlot,m=i.toAdventurerId,d=e.find(function(e){return e.id===u}).inventory[l];return e.map(function(e){if(e.id===u){var t=e.inventory.concat();return t[l]=null,Object(S.a)({},e,{inventory:t})}if(e.id===m){var n=e.inventory.concat(),r=n.findIndex(function(e){return null===e});return n[r]=d,Object(S.a)({},e,{inventory:n})}return e});case ln.addItemToInventory:var p=t.item;return e.map(function(e){if(e.id===t.adventurerId){var n=e.inventory.concat(),r=t.toSlot;return null===r&&(r=n.findIndex(function(e){return null===e||void 0===e})),n[r]=p,Object(S.a)({},e,{inventory:n})}return e});case ln.removeItemFromInventory:var g=t.fromSlot;return e.map(function(e){if(e.id===t.adventurerId){var n=e.inventory.map(function(e,t){return t!==g?e:null});return Object(S.a)({},e,{inventory:n})}return e});case ln.assignEquipment:var v=t,f=v.equipmentType,h=v.item;return e.map(function(e){return e.id===t.adventurerId?Object(S.a)({},e,{equipment:Object(S.a)({},e.equipment,Object(y.a)({},ie[f],h))}):e})}return e},engine:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fr;switch((arguments.length>1?arguments[1]:void 0).type){case r.gameTick:return Object(S.a)({},e,{lastTick:Date.now()})}return e},gold:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ct.addGold:return e+t.amount;case It.startBuildingStructure:return e-(ce[t.structure].cost.gold||0)}return e},items:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ur,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Tt.addItem:var n=t.item,r=t.toSlot;return void 0===r&&-1===(r=e.findIndex(function(e){return null===e}))?[].concat(Object(b.a)(e),[n]):e.map(function(e,t){return t===r?n:e});case Tt.moveItemInWarehouse:var a=t,o=a.fromSlot,c=a.toSlot;return e.map(function(t,n){return n===o?null:n===c?e[o]:t});case Tt.removeItem:var s=t.fromSlot;return e.map(function(e,t){return t!==s?e:null})}return e},log:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.addLogEntry:var n=t,a=n.key;return[{channel:n.channel,channelContext:n.channelContext,context:n.context,key:a,time:Date.now()}].concat(Object(b.a)(e));case r.gameTick:return zr(e,t)}return e},quests:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ht.launchQuest:return Vr(e,t);case Ht.advanceQuest:return Kr(e,t);case Ht.updateQuestVars:return Jr(e,t);case Ht.updateEncounterResult:return Zr(e,t);case Ht.startEncounter:return Xr(e,t);case r.gameTick:return Yr(e,t)}return e},resources:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$r,t=arguments.length>1?arguments[1]:void 0,n=function(t){return Object.keys(e).reduce(function(n,r){return n[r]=e[r]+(t[r]||0),n},{})};switch(t.type){case st.addResources:return n(t.resources);case st.removeResources:var a=t.resources;return Object.keys(e).reduce(function(t,n){return t[n]=e[n]-(a[n]||0),t},{});case r.gameTick:return n(t.resources)}return e},rngState:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===r.gameTick&&null!=t.rngState&&(e=Object.assign({},t.rngState)),e},structures:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ea,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case It.startBuildingStructure:return ta(e,t.structure,Ge.Building);case It.finishBuildingStructure:return ta(e,t.structure,Ge.Built);case It.upgradeStructure:var n=e[t.structure].level+1,r=Object(S.a)({},e[t.structure],{level:n});return Object(S.a)({},e,Object(y.a)({},t.structure,r));case It.increaseWorkers:var a=t.workers,o=e[t.structure].workers+a,c=Object(S.a)({},e[t.structure],{workers:o});return Object(S.a)({},e,Object(y.a)({},t.structure,c));case It.decreaseWorkers:var s=t.workers,i=e[t.structure].workers-s,u=Object(S.a)({},e[t.structure],{workers:i});return Object(S.a)({},e,Object(y.a)({},t.structure,u));case It.setStructureState:var l=t.state;return ta(e,t.structure,l)}return e},tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:na,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ct.start:var n=ra(t),a=e.running.concat(n);return Object(S.a)({},e,{running:a});case r.gameTick:var o=Date.now(),c=[],s=[];return e.running.forEach(function(e){var t=o+e.timeRemaining,n=(o-e.startTime)/(t-e.startTime),r=e.timeRemaining-(o-e.lastTick),a=Object(S.a)({},e,{progress:n,lastTick:o,timeRemaining:r});r<0?s.push(a):c.push(a)}),{running:c,completed:s}}return e},workers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:13,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case rr.addWorkers:return e+t.value}return e}}),oa=n(63),ca=n(93),sa={key:"root",storage:n.n(ca).a,version:h},ia=Object(oa.a)(sa,aa),ua=Object(i.a)(s.a.mark(function e(){var t,n=arguments;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.abrupt("return",new Promise(function(e,n){var r=Object(ot.d)(ia,t,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),a=Object(oa.b)(r,void 0,function(){var t=Hn(r.getState());e({store:r,persistor:a,isHydrated:t})})}));case 2:case"end":return e.stop()}},e)})),la=function(){var e=Object(i.a)(s.a.mark(function e(){var t,n,r,a,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("lang/en-US.json");case 2:return t=e.sent,n=t.data,Re.init(n),c="GILLESROX2",Un=!0,Sn=Gn()(c,{state:!0}),e.next=8,ua();case 8:r=e.sent,a=r.store,o=r.persistor,r.isHydrated?da(a):ma(a),pa(a,o);case 14:case"end":return e.stop()}var c},e)}));return function(){return e.apply(this,arguments)}}(),ma=function(e){e.dispatch(v("test-game-welcome")),console.log("Starting new GILLES-IDLE-GAME (version ".concat("0.0.4",")"))},da=function(e){console.log("Continuing existing GILLES-IDLE-GAME (version ".concat("0.0.4",")"))},pa=function(e,t){p.render(m.createElement(g.a,{store:e},m.createElement(Ar,{persistor:t})),document.getElementById("root")),Lr();var n=function(t){t.completed.forEach(function(t){return function(t){t.callbacks.forEach(function(t){return e.dispatch(t)})}(t)})};setInterval(function(){var t=e.getState(),a=Date.now()-t.engine.lastTick,o=Rr(a,t),c=Mr(),s=Wr(a,t),i=s.quests,u=s.log;e.dispatch(function(e,t,n,a,o){return{type:r.gameTick,delta:e,rngState:t,resources:n,quests:a,log:o}}(a,c,o,i,u)),n(t.tasks)},2500)};la()},45:function(e,t,n){},58:function(e,t,n){},72:function(e,t,n){},86:function(e,t,n){},95:function(e,t,n){e.exports=n(232)}},[[95,1,2]]]);
//# sourceMappingURL=main.fb42a298.chunk.js.map